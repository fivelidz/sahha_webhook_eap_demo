(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{84799:function(e,a,t){Promise.resolve().then(t.t.bind(t,47960,23)),Promise.resolve().then(t.bind(t,49294))},49294:function(e,a,t){"use strict";t.d(a,{ClientProviders:function(){return r}});var i=t(57437),n=t(93514);function r(e){let{children:a}=e;return(0,i.jsx)(n.By,{children:a})}},93514:function(e,a,t){"use strict";t.d(a,{By:function(){return s},Lu:function(){return p},uy:function(){return g}});var i=t(57437),n=t(2265);let r={profiles:[],organizationMetrics:null,assignments:{},editableIds:{},demographics:{},isLoadingProfiles:!1,isLoadingMetrics:!1,isLoadingDemographics:!1,lastApiCall:null,orgId:"demo_techcorp_industries",error:null};function o(e,a){switch(a.type){case"SET_PROFILES":return{...e,profiles:a.payload,isLoadingProfiles:!1};case"UPDATE_PROFILE":return{...e,profiles:e.profiles.map(e=>e.profileId===a.payload.profileId?{...e,...a.payload.updates}:e)};case"SET_ORGANIZATION_METRICS":return{...e,organizationMetrics:a.payload,isLoadingMetrics:!1};case"SET_ASSIGNMENTS":return{...e,assignments:a.payload};case"UPDATE_ASSIGNMENT":return{...e,assignments:{...e.assignments,[a.payload.profileId]:a.payload.departmentId}};case"SET_EDITABLE_IDS":return{...e,editableIds:a.payload};case"UPDATE_EDITABLE_ID":return{...e,editableIds:{...e.editableIds,[a.payload.profileId]:a.payload.editableId}};case"SET_LOADING_PROFILES":return{...e,isLoadingProfiles:a.payload};case"SET_LOADING_METRICS":return{...e,isLoadingMetrics:a.payload};case"SET_LAST_API_CALL":return{...e,lastApiCall:a.payload};case"SET_ORG_ID":return{...e,orgId:a.payload};case"SET_ERROR":return{...e,error:a.payload,isLoadingProfiles:!1,isLoadingMetrics:!1};case"CLEAR_DATA":return{...r,orgId:e.orgId};default:return e}}let l=(0,n.createContext)(null);function s(e){let{children:a}=e,[t,s]=(0,n.useReducer)(o,r);return n.useEffect(()=>{console.log("\uD83D\uDE80 SahhaDataProvider initializing with demo data...");let e=c();s({type:"SET_PROFILES",payload:e});let a=u(e);s({type:"SET_ASSIGNMENTS",payload:a}),s({type:"SET_EDITABLE_IDS",payload:e.reduce((e,a)=>(e[a.profileId]=a.editableProfileId||"",e),{})}),s({type:"SET_LAST_API_CALL",payload:new Date}),console.log("\uD83D\uDCCB Demo data initialized: ".concat(e.length," profiles, ").concat(Object.keys(a).length," assignments"))},[]),(0,i.jsx)(l.Provider,{value:{state:t,dispatch:s},children:a})}function d(){let e=(0,n.useContext)(l);if(!e)throw Error("useSahhaData must be used within a SahhaDataProvider");return e}let c=()=>Array.from({length:57},(e,a)=>{let t="demo_profile_".concat(a+1),i=t.split("").reduce((e,a)=>e+a.charCodeAt(0),0),n=(e,a)=>{let t=1e4*Math.sin(i+e+a);return Math.floor((t-Math.floor(t))*(a-e+1))+e};return{profileId:t,externalId:"ext_".concat(a+1),editableProfileId:"EMP-".concat(String(a+1).padStart(3,"0")),deviceType:["iOS","Android"][a%2],isSampleProfile:!0,createdAtUtc:new Date(Date.now()-864e5*n(1,365)).toISOString(),wellbeingScore:n(30,95),activityScore:n(25,90),sleepScore:n(35,85),mentalHealthScore:n(40,88),readinessScore:n(30,92),subScores:{activity:[{name:"steps",value:n(1e3,8e3),unit:"steps"},{name:"active_hours",value:n(4,12),unit:"hrs"},{name:"extended_inactivity",value:n(8,16),unit:"hrs"},{name:"activity_regularity",value:n(15,90),unit:"%"}],sleep:[{name:"sleep_duration",value:n(5.5,9.5),unit:"hrs"},{name:"sleep_regularity",value:n(60,95),unit:"%"},{name:"sleep_debt",value:n(0,120),unit:"mins"},{name:"circadian_alignment",value:n(1,5),unit:"hrs"}],mentalWellbeing:[{name:"circadian_alignment",value:n(1,5),unit:"hrs"},{name:"steps",value:n(1e3,8e3),unit:"steps"},{name:"active_hours",value:n(4,12),unit:"hrs"},{name:"extended_inactivity",value:n(8,16),unit:"hrs"},{name:"activity_regularity",value:n(15,90),unit:"%"},{name:"sleep_regularity",value:n(60,95),unit:"%"}],readiness:[{name:"sleep_debt",value:n(0,120),unit:"mins"},{name:"activity_balance",value:n(60,95),unit:"%"},{name:"recovery_index",value:n(50,90),unit:"score"}],wellbeing:[{name:"overall_wellness",value:n(30,95),unit:"score"},{name:"life_satisfaction",value:n(40,85),unit:"score"}]}}}),u=e=>e.reduce((e,a,t)=>(e[a.profileId]=["tech","operations","sales","admin"][t%4],e),{});function p(){let{state:e,dispatch:a}=d(),t=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t&&e.profiles.length>0)return console.log("\uD83D\uDCCB Using cached profile data, skipping API call"),e.profiles;a({type:"SET_LOADING_PROFILES",payload:!0}),a({type:"SET_ERROR",payload:null}),console.log("\uD83D\uDE80 Loading dashboard with demo data (default mode)");try{let t=c();a({type:"SET_PROFILES",payload:t});let i=u(t);a({type:"SET_ASSIGNMENTS",payload:i}),localStorage.setItem("assignments_".concat(e.orgId),JSON.stringify(i));let n=t.reduce((e,a)=>(e[a.profileId]=a.editableProfileId||"",e),{});return a({type:"SET_EDITABLE_IDS",payload:n}),localStorage.setItem("editableIds_".concat(e.orgId),JSON.stringify(n)),a({type:"SET_LAST_API_CALL",payload:new Date}),a({type:"SET_LOADING_PROFILES",payload:!1}),t}catch(e){return console.error("❌ Unexpected error loading demo data:",e),a({type:"SET_ERROR",payload:"Failed to initialize dashboard"}),a({type:"SET_LOADING_PROFILES",payload:!1}),[]}};return{profiles:e.profiles,assignments:e.assignments,editableIds:e.editableIds,isLoading:e.isLoadingProfiles,error:e.error,lastApiCall:e.lastApiCall,fetchProfiles:t,updateProfileScores:(e,t)=>{a({type:"UPDATE_PROFILE",payload:{profileId:e,updates:t}})},updateAssignment:(t,i)=>{a({type:"UPDATE_ASSIGNMENT",payload:{profileId:t,departmentId:i}});let n={...e.assignments,[t]:i};localStorage.setItem("assignments_".concat(e.orgId),JSON.stringify(n))},updateEditableId:(t,i)=>{a({type:"UPDATE_EDITABLE_ID",payload:{profileId:t,editableId:i}});let n={...e.editableIds,[t]:i};localStorage.setItem("editableIds_".concat(e.orgId),JSON.stringify(n))},setProfiles:e=>{a({type:"SET_PROFILES",payload:e}),a({type:"SET_LAST_API_CALL",payload:new Date})}}}function g(){let{state:e,dispatch:a}=d(),t=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i&&e.organizationMetrics&&Date.now()-new Date(e.organizationMetrics.lastUpdated).getTime()<3e5)return console.log("\uD83D\uDCCA Using cached organization metrics, skipping API call"),e.organizationMetrics;a({type:"SET_LOADING_METRICS",payload:!0}),a({type:"SET_ERROR",payload:null});try{let i=await fetch("/api/sahha/organization-metrics?orgId=".concat(e.orgId,"&dimension=").concat(t)),n=await i.json();if(n.success){let e=n.data;return a({type:"SET_ORGANIZATION_METRICS",payload:e}),console.log("\uD83D\uDCCA Organization metrics loaded into shared data store"),e}throw Error(n.error||"Failed to fetch organization metrics")}catch(e){throw a({type:"SET_ERROR",payload:e.message}),e}};return{organizationMetrics:e.organizationMetrics,isLoading:e.isLoadingMetrics,error:e.error,fetchOrganizationMetrics:t}}},47960:function(){}},function(e){e.O(0,[587,971,117,744],function(){return e(e.s=84799)}),_N_E=e.O()}]);