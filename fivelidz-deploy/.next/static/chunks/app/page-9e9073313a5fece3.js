(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{72590:function(e,t,r){Promise.resolve().then(r.bind(r,68337))},68337:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return rn}});var i=r(57437),a=r(2265),n=r(1899),l=r(71495),s=r(71004),o=r(5002),c=r(91991),d=r(24902),h=r(59832),m=r(96207),x=r(19978),p=r(73904),u=r(28450),g=r(621),y=r(12038),v=r(48424),j=r(23478),f=r(84485),b=r(67696),Z=r(58222),S=r(89937),w=r(82181),I=r(53081),_=r(46910),A=r(73298),C=r(66808),D=r(78920),P=r(93062),M=r(67208),k=r(36137),E=r(67571),W=r(89800),R=r(89414),F=r(30731),B=r(96369),O=r(44164),L=r(53392),z=r(79507),T=r(77468),N=r(15273),H=r(27644),q=r(53431),K=r(67051),U=r(9026),$=r(59253),G=r(82279),J=r(41327),V=r(10020),Q=r(16557),Y=r(42187),X=r(8350),ee=r(29946),et=r(81856),er=r(76070),ei=r(53211),ea=r(97470),en=r(51195),el=r(52700),es=r(67839),eo=r(29821),ec=r(30275),ed=r(56756),eh=r(53315),em=r(66894),ex=r(19577),ep=r(36850),eu=r(64311),eg=r(82954),ey=r(1353),ev=r(65462),ej=r(30160),ef=r(31699),eb=r(47625),eZ=r(77031),eS=r(56940),ew=r(97059),eI=r(62994),e_=r(8147),eA=r(22190),eC=r(41718),eD=r(3574),eP=r(20407),eM=r(93514);let ek=[{id:"unassigned",name:"Unassigned",color:"#9e9e9e"},{id:"tech",name:"Technology",color:"#1976d2"},{id:"operations",name:"Operations",color:"#388e3c"},{id:"sales",name:"Sales & Marketing",color:"#f57c00"},{id:"admin",name:"Administration",color:"#7b1fa2"}],eE=e=>{let t=Object.values(e).filter(e=>null!=e);if(0===t.length)return"medium";let r=t.reduce((e,t)=>e+t,0)/t.length;return r<30?"critical":r<40?"high":r<60?"medium":"low"},eW=e=>{let t=e.filter(e=>null!=e);return 0===t.length?0:t.reduce((e,t)=>e+t,0)/t.length},eR=(e,t)=>{let r;let i=t.split("").reduce((e,t)=>e+t.charCodeAt(0),0),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=1e4*Math.sin(i+t),a=Math.floor((r-Math.floor(r))*e.length);return e[a]},n=a(["early_bird","night_owl","intermediate"],1),l=e.activity||0;r=l>80?"very_high":l>65?"high":l>45?"moderate":l>25?"light":"sedentary";let s=e.mentalWellbeing||0;return{chronotype:n,activityPattern:r,mentalState:s>75?"flourishing":s>60?"thriving":s>40?"coping":"struggling",productivityPattern:a(["morning_peak","afternoon_peak","evening_peak","consistent"],2)}},eF={activity_level:{type:"ordinal",values:["sedentary","lightly_active","moderately_active","highly_active"],description:"Overall level of physical activity including movement and exercise.",requiresWearable:!1,ordinality:[0,1,2,3]},exercise_frequency:{type:"ordinal",values:["rare_exerciser","occasional_exerciser","regular_exerciser","frequent_exerciser"],description:"How often the individual exercises.",requiresWearable:!1,ordinality:[0,1,2,3]},mental_wellness:{type:"ordinal",values:["poor_mental_wellness","fair_mental_wellness","good_mental_wellness","optimal_mental_wellness"],description:"Mental wellness and resiliency based on physical activity, sleep, and stress indicators.",requiresWearable:!1,ordinality:[0,1,2,3]},overall_wellness:{type:"ordinal",values:["poor_wellness","fair_wellness","good_wellness","optimal_wellness"],description:"Overall wellbeing across all aspects of health.",requiresWearable:!1,ordinality:[0,1,2,3]},sleep_duration:{type:"ordinal",values:["very_short_sleeper","short_sleeper","average_sleeper","long_sleeper"],description:"Typical sleep duration relative to recommended norms.",requiresWearable:!1,ordinality:[0,1,2,3]},sleep_efficiency:{type:"ordinal",values:["highly_inefficient_sleeper","inefficient_sleeper","efficient_sleeper","highly_efficient_sleeper"],description:"How effectively the individual maintains uninterrupted sleep.",requiresWearable:!0,ordinality:[0,1,2,3]},sleep_quality:{type:"ordinal",values:["poor_sleep_quality","fair_sleep_quality","good_sleep_quality","optimal_sleep_quality"],description:"Long-term quality of sleep based on duration, regularity, recovery, and debt.",requiresWearable:!1,ordinality:[0,1,2,3]},sleep_regularity:{type:"ordinal",values:["highly_irregular_sleeper","irregular_sleeper","regular_sleeper","highly_regular_sleeper"],description:"Consistency in sleep timings.",requiresWearable:!1,ordinality:[0,1,2,3]},bed_schedule:{type:"ordinal",values:["very_early_sleeper","early_sleeper","late_sleeper","very_late_sleeper"],description:"Typical bedtime.",requiresWearable:!1,ordinality:[0,1,2,3]},wake_schedule:{type:"ordinal",values:["very_early_riser","early_riser","late_riser","very_late_riser"],description:"Typical wake-up time.",requiresWearable:!1,ordinality:[0,1,2,3]},primary_exercise:{type:"categorical",values:["running","weightlifting","yoga","cycling","swimming","walking","hiking","tennis","basketball","soccer","dancing","pilates","crossfit","martial_arts","climbing","rowing"],description:"Most commonly performed exercise.",requiresWearable:!1,ordinality:null},primary_exercise_type:{type:"categorical",values:["strength_oriented","cardio_oriented","mind_body_oriented","hybrid_oriented","sport_oriented","outdoor_oriented"],description:"Categorizes the primary exercise into strength, cardio, sports, etc.",requiresWearable:!1,ordinality:null},secondary_exercise:{type:"categorical",values:["running","weightlifting","yoga","cycling","swimming","walking","hiking","tennis","basketball","soccer","dancing","pilates","crossfit","martial_arts","climbing","rowing"],description:"Second most commonly performed exercise.",requiresWearable:!1,ordinality:null},sleep_pattern:{type:"categorical",values:["consistent_early_riser","inconsistent_early_riser","consistent_late_sleeper","inconsistent_late_sleeper","early_morning_sleeper","chronic_short_sleeper","inconsistent_short_sleeper"],description:"Overall sleep behavior based on timing and consistency.",requiresWearable:!1,ordinality:null}},eB=(e,t,r)=>{let i=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=1e4*Math.sin(i+t);return Math.floor((r-Math.floor(r))*e)},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=a(e.length,t);return e[r]},l=[],s=new Date,o=new Date(s.getTime()-2592e6);return Object.entries(eF).forEach((i,c)=>{let[d,h]=i;if(a(100,7*c)>15){let i,m;"ordinal"===h.type?(m=eL(eO(d,r),a(4,11*c)),i=h.values[m]):i=n(h.values,13*c),l.push({id:"".concat(e,"-").concat(d,"-").concat(c),profileId:e,externalId:t,name:d,value:i,dataType:h.type,ordinality:m,periodicity:"monthly",startDateTime:o.toISOString(),endDateTime:s.toISOString(),createdAtUtc:s.toISOString(),description:h.description,requiresWearable:h.requiresWearable})}}),l},eO=(e,t)=>{switch(e){case"activity_level":case"exercise_frequency":return t.activity||50;case"sleep_duration":case"sleep_efficiency":case"sleep_quality":case"sleep_regularity":case"bed_schedule":case"wake_schedule":return t.sleep||50;case"mental_wellness":return t.mentalWellbeing||50;case"overall_wellness":return t.wellbeing||50;default:return 50}},eL=(e,t)=>Math.min(3,Math.max(0,Math.floor(e/25)+t%3-1)),ez=e=>({activity:e.filter(e=>["activity_level","exercise_frequency","primary_exercise","primary_exercise_type","secondary_exercise"].includes(e.name)),sleep:e.filter(e=>["sleep_duration","sleep_efficiency","sleep_quality","sleep_regularity","bed_schedule","wake_schedule","sleep_pattern"].includes(e.name)),exercise:e.filter(e=>["primary_exercise","primary_exercise_type","secondary_exercise"].includes(e.name)),wellness:e.filter(e=>["mental_wellness","overall_wellness"].includes(e.name))});function eT(){let{profiles:e,assignments:t,editableIds:r}=(0,eM.Lu)(),i=(0,a.useMemo)(()=>e&&0!==e.length?e.map(e=>{let t={wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore},i=eB(e.profileId,e.externalId,t),a=ez(i),n=e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0),l=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=1e4*Math.sin(n+r);return Math.floor((i-Math.floor(i))*(t-e+1))+e},s=l(1,10,1)>3,o=Math.min(s?l(75,95,2):l(45,75,3),95),c=Object.keys(eF).filter(e=>!i.some(t=>t.name===e)),d=l(0,3,4),h=c.slice(0,d);return{profileId:e.profileId,externalId:e.externalId,editableId:r[e.profileId]||e.editableProfileId||e.externalId,archetypes:i,archetypeCompleteness:o,hasWearableData:s,archetypesByCategory:a,missingArchetypes:h,dataQuality:o>80?"high":o>60?"medium":"low"}}):[],[e,r]),n=(0,a.useMemo)(()=>{let e={};return Object.entries(eF).forEach(t=>{let[r,i]=t;e[r]={},i.values.forEach(t=>{e[r][t]=0})}),i.forEach(t=>{t.archetypes.forEach(t=>{e[t.name]&&(e[t.name][t.value]=(e[t.name][t.value]||0)+1)})}),e},[i]),l=(0,a.useMemo)(()=>{let e={};return i.forEach(r=>{let i=t[r.profileId]||"unassigned";e[i]||(e[i]={department:i,profileCount:0,archetypeDistribution:{},averageCompleteness:0,wearableDataCount:0}),e[i].profileCount++,e[i].averageCompleteness+=r.archetypeCompleteness,r.hasWearableData&&e[i].wearableDataCount++,r.archetypes.forEach(t=>{e[i].archetypeDistribution[t.name]||(e[i].archetypeDistribution[t.name]={});let r=e[i].archetypeDistribution[t.name][t.value]||0;e[i].archetypeDistribution[t.name][t.value]=r+1})}),Object.keys(e).forEach(t=>{e[t].profileCount>0&&(e[t].averageCompleteness=Math.round(e[t].averageCompleteness/e[t].profileCount))}),e},[i,t]);return{profileArchetypes:i,organizationalArchetypeDistribution:n,departmentArchetypeAnalysis:l,archetypeDefinitions:eF}}let eN={unassigned:"#9e9e9e",tech:"#1976d2",operations:"#388e3c",sales:"#f57c00",admin:"#7b1fa2"};function eH(e){let{title:t,value:r,subtitle:a,icon:l,color:s,trend:c,onClick:d,selected:h}=e;return(0,i.jsx)(M.Z,{sx:{height:"100%",cursor:d?"pointer":"default",border:h?2:1,borderColor:h?"".concat(s,".main"):"divider","&:hover":d?{boxShadow:3}:{}},onClick:d,children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:t}),(0,i.jsx)(o.Z,{variant:"h4",component:"div",color:"".concat(s,".main"),children:"number"==typeof r?r.toLocaleString():r}),a&&(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:a}),c&&(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:c>0?"success.main":"error.main"}}),(0,i.jsxs)(o.Z,{variant:"caption",color:c>0?"success.main":"error.main",children:[Math.abs(c),"% vs baseline"]})]})]}),(0,i.jsx)(n.Z,{sx:{color:"".concat(s,".main")},children:l})]})})})}function eq(e){let{data:t,onChartClick:r,selectedDepartment:a,viewingCriteria:l,profileArchetypes:s,profileAssignments:c,selectedFilters:d,profilesWithArchetypesAndScores:h,assignments:m}=e,x=l.includes("archetype")||"data_completeness"===l?(()=>{if(console.log("\uD83D\uDD0D buildArchetypeChartData called with:",{viewingCriteria:l,profilesWithArchetypesAndScores:(null==h?void 0:h.length)||0,assignments:m?Object.keys(m).length:0}),!h||0===h.length)return console.warn("\uD83D\uDEAB No profiles available from Profile Management"),[];if(!m||0===Object.keys(m).length){console.warn("\uD83D\uDEAB No department assignments available, creating demo assignments for chart data");let e={};h.forEach((t,r)=>{let i=["tech","operations","sales","admin"];e[t.profileId]=i[r%i.length]}),m=e}let e={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"};return["tech","operations","sales","admin","unassigned"].map(t=>{let r=h.filter(e=>(m[e.profileId]||m[e.externalId]||"unassigned")===t);if(0===r.length)return null;let i={name:e[t],department:t,employeeCount:r.length,color:eN[t]||"#9e9e9e"};switch(l){case"activity_archetypes":let a=0,n=0,s={excellent:0,good:0,fair:0,poor:0,critical:0};r.forEach(e=>{var t;let r=null===(t=e.scores)||void 0===t?void 0:t.activity;null!=r&&(n++,a+=r,r>=80?s.excellent++:r>=65?s.good++:r>=50?s.fair++:r>=30?s.poor++:s.critical++)});let o=n>0?Math.round(a/n):0;i.activity_score=o,i.profiles_with_activity_data=n,i.excellent_range=s.excellent,i.good_range=s.good,i.fair_range=s.fair,i.poor_range=s.poor,i.critical_range=s.critical;break;case"sleep_archetypes":let c=0,d=0,x={excellent:0,good:0,fair:0,poor:0,critical:0};r.forEach(e=>{var t;let r=null===(t=e.scores)||void 0===t?void 0:t.sleep;null!=r&&(d++,c+=r,r>=80?x.excellent++:r>=65?x.good++:r>=50?x.fair++:r>=30?x.poor++:x.critical++)});let p=d>0?Math.round(c/d):0;i.sleep_score=p,i.profiles_with_sleep_data=d,i.excellent_range=x.excellent,i.good_range=x.good,i.fair_range=x.fair,i.poor_range=x.poor,i.critical_range=x.critical;break;case"wellness_archetypes":let u=0,g=0,y=0,v={excellent:0,good:0,fair:0,poor:0,critical:0};console.log("\uD83E\uDDE0 Wellness Processing Department ".concat(e[t],": ").concat(r.length," profiles")),console.log("\uD83E\uDDE0 Processing ".concat(r.length," profiles for ").concat(e[t]," department")),r.forEach(e=>{var t,r;let i=null===(t=e.scores)||void 0===t?void 0:t.wellbeing,a=null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing;if(console.log("Profile ".concat(e.profileId,": wellbeing=").concat(i,", mental=").concat(a,", hasScores=").concat(!!e.scores)),null!=i||null!=a){u++;let e=null!=i?i:a;y+=e,e>=80?v.excellent++:e>=65?v.good++:e>=50?v.fair++:e>=30?v.poor++:v.critical++}else g++});let j=u>0?Math.round(y/u):null;console.log("\uD83E\uDDE0 ".concat(e[t],": ").concat(u," with data, ").concat(g," with no data, avg: ").concat(j||"N/A")),i.wellbeing_score=j||0,i.profiles_with_wellbeing_data=u,i.profiles_no_wellbeing_data=g,i.excellent_range=v.excellent,i.good_range=v.good,i.fair_range=v.fair,i.poor_range=v.poor,i.critical_range=v.critical;break;case"data_completeness":let f=0,b=0,Z=0,S=0,w=0,I=0;r.forEach(e=>{let t=e.scores||{};console.log("\uD83D\uDCCA Data Quality - Profile ".concat(e.profileId,": activity=").concat(t.activity,", sleep=").concat(t.sleep,", wellbeing=").concat(t.wellbeing,", mental=").concat(t.mentalWellbeing,", readiness=").concat(t.readiness)),null!==t.activity&&void 0!==t.activity&&f++,null!==t.sleep&&void 0!==t.sleep&&b++,null!==t.wellbeing&&void 0!==t.wellbeing&&Z++,null!==t.mentalWellbeing&&void 0!==t.mentalWellbeing&&S++,null!==t.readiness&&void 0!==t.readiness&&w++,[t.activity,t.sleep,t.wellbeing,t.mentalWellbeing,t.readiness].filter(e=>null!=e).length>=3&&I++});let _=r.length,A={activity_data_percentage:Math.round(f/_*100),sleep_data_percentage:Math.round(b/_*100),wellbeing_data_percentage:Math.round(Z/_*100),mental_wellbeing_data_percentage:Math.round(S/_*100),readiness_data_percentage:Math.round(w/_*100),complete_profiles_percentage:Math.round(I/_*100),profiles_with_activity:f,profiles_with_sleep:b,profiles_with_wellbeing:Z,profiles_with_mental_wellbeing:S,profiles_with_readiness:w,complete_profiles_count:I,total_profiles:_};console.log("\uD83D\uDCCA ".concat(e[t]," data quality: Activity ").concat(A.activity_data_percentage,"%, Sleep ").concat(A.sleep_data_percentage,"%, Wellbeing ").concat(A.wellbeing_data_percentage,"%, Mental Health ").concat(A.mental_wellbeing_data_percentage,"%")),Object.assign(i,A);break;default:Object.assign(i,{overall:Math.round(r.reduce((e,t)=>e+(t.archetypeCompleteness||0),0)/r.length),wellbeing:Math.round(r.reduce((e,t)=>e+30*Math.random()+50,0)/r.length),activity:Math.round(r.reduce((e,t)=>e+30*Math.random()+50,0)/r.length),sleep:Math.round(r.reduce((e,t)=>e+30*Math.random()+50,0)/r.length),mentalWellbeing:Math.round(r.reduce((e,t)=>e+30*Math.random()+50,0)/r.length)})}return i}).filter(Boolean)})():t;console.log("\uD83D\uDCCA EnhancedOrganizationalDistribution chartData:",{viewingCriteria:l,chartDataLength:(null==x?void 0:x.length)||0,chartDataSample:(null==x?void 0:x.slice(0,2))||[],usesBuildArchetype:l.includes("archetype")||"data_completeness"===l});let p=x&&x.length>0&&x.some(e=>"wellness_archetypes"===l?e.profiles_with_wellbeing_data+e.profiles_no_wellbeing_data>0:"data_completeness"===l?e.total_profiles>0:e.employeeCount>0);return(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:(()=>{let e=Object.keys(d||{}).length>0?" (".concat(Object.keys(d).length," filter").concat(Object.keys(d).length>1?"s":""," active)"):"";switch(l){case"activity_archetypes":return"Department Activity Intelligence".concat(e);case"sleep_archetypes":return"Department Sleep Intelligence".concat(e);case"wellness_archetypes":return"Department Wellness Intelligence".concat(e);case"data_completeness":return"Data Quality Analysis by Department".concat(e);case"eap_insights":return"EAP Intelligence & Crisis Management".concat(e);default:return"risk_levels"===l?"Risk Trend Analysis by Department".concat(e):"Department Health Analysis - ".concat(l.replace("_"," ").toUpperCase()).concat(e)}})()}),p?(0,i.jsx)(eb.h,{width:"100%",height:350,children:(0,i.jsxs)(eZ.v,{data:x,onClick:e=>{r(e,"department")},children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"population",orientation:"left",label:{value:"Population Count",angle:-90,position:"insideLeft"}}),(0,i.jsx)(eI.B,{yAxisId:"score",orientation:"right",domain:[0,100],label:{value:"Average Score (0-100)",angle:90,position:"insideRight"}}),(0,i.jsx)(e_.u,{formatter:(e,t)=>["number"==typeof e?e.toLocaleString():e,t]}),(0,i.jsx)(eA.D,{}),(()=>{switch(l){case"activity_archetypes":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"activity_score",fill:"#ff9800",stroke:"#e65100",strokeWidth:3,fillOpacity:.9,name:"\uD83C\uDFAF Average Activity Score"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"excellent_range",fill:"#00AA44",name:"Excellent (80-100)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"good_range",fill:"#7CB342",name:"Good (65-79)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"fair_range",fill:"#FFB300",name:"Fair (50-64)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"poor_range",fill:"#FF7043",name:"Poor (30-49)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"critical_range",fill:"#CC3333",name:"Critical (<30)"})]});case"sleep_archetypes":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"sleep_score",fill:"#2196f3",stroke:"#0d47a1",strokeWidth:3,fillOpacity:.9,name:"\uD83C\uDFAF Average Sleep Score"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"excellent_range",fill:"#00AA44",name:"Excellent (80-100)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"good_range",fill:"#7CB342",name:"Good (65-79)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"fair_range",fill:"#FFB300",name:"Fair (50-64)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"poor_range",fill:"#FF7043",name:"Poor (30-49)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"critical_range",fill:"#CC3333",name:"Critical (<30)"})]});case"wellness_archetypes":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"wellbeing_score",fill:"#9c27b0",stroke:"#4a148c",strokeWidth:3,fillOpacity:.9,name:"\uD83C\uDFAF Average Wellbeing Score"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"excellent_range",fill:"#00AA44",name:"Excellent (80-100)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"good_range",fill:"#7CB342",name:"Good (65-79)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"fair_range",fill:"#FFB300",name:"Fair (50-64)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"poor_range",fill:"#FF7043",name:"Poor (30-49)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"critical_range",fill:"#CC3333",name:"Critical (<30)"})]});case"data_completeness":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"activity_data_percentage",fill:"#4caf50",name:"Activity Data %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"sleep_data_percentage",fill:"#2196f3",name:"Sleep Data %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"wellbeing_data_percentage",fill:"#ff9800",name:"Wellbeing Data %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"mental_wellbeing_data_percentage",fill:"#9c27b0",name:"Mental Health Data %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"readiness_data_percentage",fill:"#00acc1",name:"Readiness Data %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"complete_profiles_percentage",fill:"#66bb6a",name:"Complete Profiles %"})]});case"health_scores":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"overall",fill:"#1976d2",name:"Overall Health"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"wellbeing",fill:"#4caf50",name:"Wellbeing"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"activity",fill:"#ff9800",name:"Activity"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"sleep",fill:"#2196f3",name:"Sleep"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"mentalWellbeing",fill:"#9c27b0",name:"Mental Health"})]});case"risk_levels":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"improving",fill:"#4caf50",name:"Improving Trends"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"stable",fill:"#2196f3",name:"Stable Performance"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"declining",fill:"#ff9800",name:"Declining (At Risk)"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"rapidDecline",fill:"#f44336",name:"Rapid Decline Alert"})]});case"eap_insights":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"crisisRisk",fill:"#d32f2f",name:"Crisis Intervention Needed"}),(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"preventiveCare",fill:"#f57c00",name:"Preventive Care Opportunities"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"managerAlert",fill:"#ff5722",name:"Manager Alert Threshold %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"eapEffectiveness",fill:"#4caf50",name:"EAP Effectiveness %"})]});default:return(0,i.jsx)(ef.$,{yAxisId:"population",dataKey:"employeeCount",fill:"#1976d2",name:"Employee Count"})}})()]})}):(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:350,children:[(0,i.jsx)(et.Z,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,i.jsx)(o.Z,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"NO DATA AVAILABLE"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",textAlign:"center",children:["No ",l.includes("wellness")?"mental wellbeing scores":l.includes("data_completeness")?"biomarker data":l.includes("sleep")?"sleep data":l.includes("activity")?"activity data":"health data"," ","available for the selected department(s)"]})]}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{mt:1,display:"block"},children:["\uD83D\uDCA1 Click bars to filter other charts • ",p?x.reduce((e,t)=>e+(t.employeeCount||0),0):0," total employees",Object.keys(d||{}).length>0&&" • Cross-filtered data shown"]})]})})}function eK(e){let{insights:t,onChartClick:r,viewingCriteria:a,profileArchetypes:l,profileAssignments:s,selectedFilters:c,selectedDepartment:h,filteredDepartments:m}=e,x=(()=>{var e,t,r,i,n,o;if(console.log("\uD83D\uDD0D PIE CHART DATA CHECK for ".concat(a,":"),{hasProfileArchetypes:!!l,profileArchetypesLength:(null==l?void 0:l.length)||0,hasProfileAssignments:!!s,assignmentsCount:s?Object.keys(s).length:0,viewingCriteria:a,willUseFallback:!l||!s||0===l.length}),l&&l.length>0&&console.log("\uD83D\uDD0D SAMPLE PROFILE STRUCTURE:",{firstProfile:l[0],hasScores:!!(null===(t=l[0])||void 0===t?void 0:t.scores),hasArchetypes:!!(null===(r=l[0])||void 0===r?void 0:r.archetypes),archetypesLength:(null===(n=l[0])||void 0===n?void 0:null===(i=n.archetypes)||void 0===i?void 0:i.length)||0,sampleScores:null===(o=l[0])||void 0===o?void 0:o.scores}),!l||0===l.length||!s||0===Object.keys(s).length)return console.log("⚠️ PIE CHART: Profile Management data not ready yet"),console.log("⚠️ Status:",{hasProfileArchetypes:!!l,profileArchetypesLength:(null==l?void 0:l.length)||0,hasProfileAssignments:!!s,assignmentsCount:s?Object.keys(s).length:0}),[];console.log("✅ PIE CHART USING PROFILE DATA for ".concat(a,":"),{totalProfiles:l.length,profilesWithScores:l.filter(e=>e.scores&&(e.scores.activity||e.scores.sleep||e.scores.wellbeing||e.scores.mentalWellbeing)).length,assignmentCount:Object.keys(s).length,sampleProfile:l[0]?{id:l[0].profileId,hasScores:!!l[0].scores,scores:l[0].scores,hasArchetypes:!!l[0].archetypes,archetypeCount:(null===(e=l[0].archetypes)||void 0===e?void 0:e.length)||0}:null});let d=l;switch(h&&"all"!==h&&(d=d.filter(e=>(s[e.profileId]||"unassigned")===h)),Object.keys(c||{}).length>0&&(d=d.filter(e=>Object.entries(c).every(t=>{let[r,i]=t;return e.archetypes.some(e=>e.name===r&&e.value===i)}))),a){case"activity_archetypes":console.log("\uD83C\uDFAF ACTIVITY PIE CHART: Processing ".concat(d.length," profiles"));let m={sedentary:0,lightly_active:0,moderately_active:0,highly_active:0};return d.forEach((e,t)=>{var r,i,a,n,l,s,o;t<3&&console.log("  Profile ".concat(t+1,":"),{id:e.profileId,hasArchetypes:!!e.archetypes,archetypeCount:(null===(a=e.archetypes)||void 0===a?void 0:a.length)||0,hasScores:!!e.scores,activityScore:null===(n=e.scores)||void 0===n?void 0:n.activity,activityArchetype:null===(s=e.archetypes)||void 0===s?void 0:null===(l=s.find(e=>"activity_level"===e.name))||void 0===l?void 0:l.value});let c=null===(i=e.archetypes)||void 0===i?void 0:null===(r=i.find(e=>"activity_level"===e.name))||void 0===r?void 0:r.value;if(c&&m.hasOwnProperty(c))m[c]++;else{let t=null===(o=e.scores)||void 0===o?void 0:o.activity;null!=t&&(t>=80?m.highly_active++:t>=60?m.moderately_active++:t>=40?m.lightly_active++:m.sedentary++)}}),console.log("\uD83C\uDFAF ACTIVITY PIE RESULT:",m),[{name:"Highly Active",value:m.highly_active,color:"#4caf50"},{name:"Moderately Active",value:m.moderately_active,color:"#8bc34a"},{name:"Lightly Active",value:m.lightly_active,color:"#ffeb3b"},{name:"Sedentary",value:m.sedentary,color:"#f44336"}];case"sleep_archetypes":let x={poor_sleep_quality:0,fair_sleep_quality:0,good_sleep_quality:0,optimal_sleep_quality:0};return d.forEach(e=>{var t,r,i;let a=null===(r=e.archetypes)||void 0===r?void 0:null===(t=r.find(e=>"sleep_quality"===e.name))||void 0===t?void 0:t.value;if(a&&x.hasOwnProperty(a))x[a]++;else{let t=null===(i=e.scores)||void 0===i?void 0:i.sleep;null!=t&&(t>=80?x.optimal_sleep_quality++:t>=65?x.good_sleep_quality++:t>=50?x.fair_sleep_quality++:x.poor_sleep_quality++)}}),[{name:"Optimal Sleep",value:x.optimal_sleep_quality,color:"#4caf50"},{name:"Good Sleep",value:x.good_sleep_quality,color:"#8bc34a"},{name:"Fair Sleep",value:x.fair_sleep_quality,color:"#ff9800"},{name:"Poor Sleep",value:x.poor_sleep_quality,color:"#f44336"}];case"wellness_archetypes":let p={poor_mental_wellness:0,fair_mental_wellness:0,good_mental_wellness:0,optimal_mental_wellness:0};return d.forEach(e=>{var t,r,i,a;let n=null===(r=e.archetypes)||void 0===r?void 0:null===(t=r.find(e=>"mental_wellness"===e.name))||void 0===t?void 0:t.value;if(n&&p.hasOwnProperty(n))p[n]++;else{let t=null===(i=e.scores)||void 0===i?void 0:i.wellbeing,r=null===(a=e.scores)||void 0===a?void 0:a.mentalWellbeing,n=null!=t?t:r;null!=n&&(n>=80?p.optimal_mental_wellness++:n>=65?p.good_mental_wellness++:n>=50?p.fair_mental_wellness++:p.poor_mental_wellness++)}}),[{name:"Optimal Mental Wellness",value:p.optimal_mental_wellness,color:"#4caf50"},{name:"Good Mental Wellness",value:p.good_mental_wellness,color:"#8bc34a"},{name:"Fair Mental Wellness",value:p.fair_mental_wellness,color:"#ff9800"},{name:"Poor Mental Wellness",value:p.poor_mental_wellness,color:"#f44336"}];case"data_completeness":let u={has_archetypes:0,no_archetypes:0};return d.forEach(e=>{e.archetypes&&e.archetypes.length>0?u.has_archetypes++:u.no_archetypes++}),[{name:"Archetypes Available",value:u.has_archetypes,color:"#4caf50"},{name:"No Archetypes",value:u.no_archetypes,color:"#f44336"}];case"risk_levels":let g={improving:0,stable_high:0,declining:0,rapid_decline:0};return d.forEach(e=>{var t,r,i;let a=(null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||null,n=(null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing)||null,l=(null===(i=e.scores)||void 0===i?void 0:i.activity)||null,s=Math.min(null!==a?a:50,null!==n?n:50),o=(s+(l||50)+(e.archetypeCompleteness||0))/3;s>=70&&o>70?g.improving++:s>=60&&o>=60?g.stable_high++:s>=40&&o<50?g.declining++:g.rapid_decline++}),[{name:"Improving Trends",value:g.improving,color:"#4caf50"},{name:"Stable High Performers",value:g.stable_high,color:"#2196f3"},{name:"Declining (At Risk)",value:g.declining,color:"#ff9800"},{name:"Rapid Decline Alert",value:g.rapid_decline,color:"#f44336"}];case"eap_insights":let y={crisis_intervention:0,preventive_care:0,manager_consultation:0,wellness_program_success:0},v={};d.forEach(e=>{var t,r;let i=(null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||null,a=(null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing)||null,n=Math.min(null!==i?i:50,null!==a?a:50);n<30?y.crisis_intervention++:n<50?y.preventive_care++:n>=70&&y.wellness_program_success++;let l=s[e.profileId]||"unassigned";v[l]||(v[l]=[]),v[l].push({profile:e,overallScore:n})});let j=0;return Object.values(v).forEach(e=>{e.filter(e=>e.overallScore<50).length/e.length>.3&&j++}),y.manager_consultation=j,[{name:"Crisis Intervention Required",value:y.crisis_intervention,color:"#d32f2f"},{name:"Preventive Care Needed",value:y.preventive_care,color:"#f57c00"},{name:"Manager Consultation Alerts",value:y.manager_consultation,color:"#ff5722"},{name:"Wellness Program Success",value:y.wellness_program_success,color:"#4caf50"}];default:let f={excellent:0,good:0,fair:0,poor:0,critical:0};return d.forEach(e=>{var t,r;let i=(null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||null,a=(null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing)||null,n=Math.min(null!==i?i:50,null!==a?a:50);n>=80?f.excellent++:n>=65?f.good++:n>=50?f.fair++:n>=30?f.poor++:f.critical++}),[{name:"Excellent (80-100)",value:f.excellent,color:"#4caf50"},{name:"Good (65-79)",value:f.good,color:"#8bc34a"},{name:"Fair (50-64)",value:f.fair,color:"#ff9800"},{name:"Poor (30-49)",value:f.poor,color:"#f57c00"},{name:"Critical (<30)",value:f.critical,color:"#f44336"}]}})(),p=x.reduce((e,t)=>e+t.value,0);return(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,i.jsx)(d.Z,{title:"eap_insights"===a?"EAP Intelligence tracks crisis intervention needs (<30 score), preventive care opportunities (30-49), manager consultation alerts (>30% department risk), and wellness program success (>70 score).":"data_completeness"===a?"Data Quality shows biomarker availability: Comprehensive (>75%), Substantial (50-75%), Moderate (25-49%), Minimal (<25%). Rich Activity/Sleep Data indicates high-quality behavioral insights.":"Health Score Distribution uses transparent thresholds: Excellent (80-100), Good (65-79), Fair (50-64), Poor (30-49), Critical (<30). Based on minimum of wellbeing and mental wellbeing scores for conservative assessment.",arrow:!0,children:(0,i.jsx)(o.Z,{variant:"h6",sx:{cursor:"help"},children:(()=>{var e;let t=h&&"all"!==h?" - ".concat((null===(e=m[0])||void 0===e?void 0:e.departmentName)||h.toUpperCase()):"",r=Object.keys(c||{}).length>0?" (".concat(Object.keys(c).length," filter").concat(Object.keys(c).length>1?"s":""," active)"):"";switch(a){case"activity_archetypes":return"Activity Level Distribution".concat(t).concat(r);case"sleep_archetypes":return"Sleep Quality Distribution".concat(t).concat(r);case"wellness_archetypes":return"Mental Wellness Distribution".concat(t).concat(r);case"data_completeness":return"Data Quality Distribution".concat(t).concat(r);case"eap_insights":return"EAP Crisis Management & Intervention".concat(t).concat(r);case"risk_levels":return"Risk Trend Analysis".concat(t).concat(r);default:return"Health Score Distribution".concat(t).concat(r)}})()})}),(0,i.jsx)(E.Z,{label:"".concat(p," employees"),size:"small",color:"primary",variant:"outlined"})]}),0===p?(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:300,children:[(0,i.jsx)(et.Z,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,i.jsx)(o.Z,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"NO DATA AVAILABLE"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",textAlign:"center",children:"No employee data available for the current filters"})]}):(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{onClick:e=>r(e,"risk"),children:[(0,i.jsx)(eD.b,{data:x,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:x.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:(e,t)=>["".concat(e," employees"),t]}),(0,i.jsx)(eA.D,{})]})}),(0,i.jsxs)(n.Z,{mt:2,p:1.5,bgcolor:"grey.50",borderRadius:1,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"primary.main",fontWeight:"medium",display:"block",children:"\uD83D\uDCCA Key Insight:"}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:(()=>{var e,t,r,i,n,l,s,o;switch(a){case"activity_archetypes":let c=x.slice(0,2).reduce((e,t)=>e+t.value,0);return"".concat(Math.round(c/p*100),"% of employees are moderately to highly active. Consider wellness challenges for sedentary employees.");case"sleep_archetypes":let d=x.slice(0,2).reduce((e,t)=>e+t.value,0);return"".concat(Math.round(d/p*100),"% have good to optimal sleep quality. Focus sleep hygiene programs on remaining employees.");case"wellness_archetypes":let h=x.slice(0,2).reduce((e,t)=>e+t.value,0);return"".concat(Math.round(h/p*100),"% show good to optimal mental wellness. Prioritize mental health resources for struggling employees.");case"data_completeness":let m=(null===(e=x[0])||void 0===e?void 0:e.value)||0;return"".concat(Math.round(m/p*100),"% have high-quality data. Encourage wearable adoption for better insights.");case"eap_insights":let u=(null===(t=x.find(e=>e.name.includes("Crisis")))||void 0===t?void 0:t.value)||0,g=(null===(r=x.find(e=>e.name.includes("Preventive")))||void 0===r?void 0:r.value)||0,y=(null===(i=x.find(e=>e.name.includes("Manager")))||void 0===i?void 0:i.value)||0;return"".concat(u," employees need immediate crisis intervention, ").concat(g," need preventive care. ").concat(y," departments require manager consultation.");case"risk_levels":let v=(null===(n=x.find(e=>e.name.includes("Improving")))||void 0===n?void 0:n.value)||0,j=(null===(l=x.find(e=>e.name.includes("Declining")))||void 0===l?void 0:l.value)||0,f=(null===(s=x.find(e=>e.name.includes("Rapid")))||void 0===s?void 0:s.value)||0;return"".concat(v," employees show improving health trends. ").concat(j," previously healthy employees declining. ").concat(f," require urgent intervention to prevent further decline.");default:let b=(null===(o=x[0])||void 0===o?void 0:o.value)||0;return"".concat(Math.round(b/p*100),"% are low risk. Monitor higher risk employees for early intervention opportunities.")}})()})]})]})})}function eU(e){let{profileArchetypes:t,profileAssignments:r,archetypeDefinitions:l}=e,[s,d]=(0,a.useState)("heatmap"),[h,x]=(0,a.useState)(null),p=[{id:"tech",name:"Technology",color:"#1976d2"},{id:"operations",name:"Operations",color:"#388e3c"},{id:"sales",name:"Sales & Marketing",color:"#f57c00"},{id:"admin",name:"Administration",color:"#7b1fa2"},{id:"unassigned",name:"Unassigned",color:"#9e9e9e"}],u=(()=>{let e={};return p.forEach(t=>{e[t.id]={},Object.keys(l).forEach(r=>{e[t.id][r]={},l[r].values&&l[r].values.forEach(i=>{e[t.id][r][i]=0})})}),t.forEach(t=>{let i=r[t.profileId]||"unassigned";t.archetypes.forEach(t=>{e[i]&&e[i][t.name]&&(e[i][t.name][t.value]=(e[i][t.name][t.value]||0)+1)})}),e})(),g=e=>{let i=u[e],a=t.filter(t=>(r[t.profileId]||"unassigned")===e).length,n={};return Object.entries(i).forEach(e=>{let[t,r]=e,i=0,a="";Object.entries(r).forEach(e=>{let[t,r]=e;r>i&&(i=r,a=t)}),i>0&&(n[t]=a)}),{totalProfiles:a,dominantArchetypes:n}},y=(e,t,r)=>{let i=u[e][t][r]||0,a=p.reduce((e,i)=>e+(u[i.id][t][r]||0),0);return a>0?i/a*100:0};return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[(0,i.jsx)(er.Z,{color:"primary"}),"Department-by-Archetype Matrix Analysis",(0,i.jsx)(E.Z,{label:"Organizational Behavioral Patterns",color:"primary",size:"small"})]}),(0,i.jsx)(n.Z,{sx:{mb:3},children:(0,i.jsxs)(W.Z,{variant:"outlined",size:"small",children:[(0,i.jsx)(c.Z,{variant:"heatmap"===s?"contained":"outlined",onClick:()=>d("heatmap"),startIcon:(0,i.jsx)(er.Z,{}),children:"Heat Map View"}),(0,i.jsx)(c.Z,{variant:"summary"===s?"contained":"outlined",onClick:()=>d("summary"),startIcon:(0,i.jsx)(ei.Z,{}),children:"Department Summary"}),(0,i.jsx)(c.Z,{variant:"trends"===s?"contained":"outlined",onClick:()=>d("trends"),startIcon:(0,i.jsx)(ee.Z,{}),children:"Trend Analysis"})]})}),"heatmap"===s&&(0,i.jsx)(R.ZP,{container:!0,spacing:3,children:p.map(e=>{let t=g(e.id);return(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,i.jsx)(o.Z,{variant:"h6",color:"primary.main",children:e.name}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(n.Z,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:e.color}}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[t.totalProfiles," employees"]})]})]}),(0,i.jsx)(n.Z,{sx:{mb:2},children:Object.entries(l).slice(0,6).map(r=>{let[a,l]=r,s=u[e.id][a],c=t.dominantArchetypes[a],d=s[c]||0,m=c?y(e.id,a,c):0;return(0,i.jsxs)(n.Z,{sx:{mb:1},onMouseEnter:()=>x({dept:e.id,archetype:a}),onMouseLeave:()=>x(null),children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(o.Z,{variant:"caption",sx:{fontSize:"0.7rem"},children:[a.replace(/_/g," ").substring(0,15),"..."]}),(0,i.jsxs)(o.Z,{variant:"caption",fontWeight:"medium",children:[c?c.replace(/_/g," "):"N/A"," (",d,")"]})]}),(0,i.jsx)(n.Z,{sx:{height:4,borderRadius:2,bgcolor:"grey.200",overflow:"hidden",position:"relative"},children:(0,i.jsx)(n.Z,{sx:{width:"".concat(Math.min(m,100),"%"),height:"100%",bgcolor:m>60?"error.main":m>30?"warning.main":"success.main",transition:"all 0.3s ease",opacity:(null==h?void 0:h.dept)===e.id&&(null==h?void 0:h.archetype)===a?1:.7}})}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.65rem"},children:[m.toFixed(1),"% concentration"]})]},a)})}),(0,i.jsxs)(m.Z,{sx:{p:1.5,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"caption",color:"primary.main",fontWeight:"medium",display:"block",mb:.5,children:"Dominant Behavioral Profile:"}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.7rem"},children:Object.entries(t.dominantArchetypes).slice(0,3).map(e=>{let[t,r]=e;return"".concat(t.replace(/_/g," "),": ").concat(r.replace(/_/g," "))}).join(" • ")})]})]})})},e.id)})}),"summary"===s&&(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Behavioral Intelligence Summary"}),(0,i.jsx)(n.Z,{sx:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f5f5f5"},children:[(0,i.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #ddd"},children:"Department"}),(0,i.jsx)("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #ddd"},children:"Employees"}),(0,i.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #ddd"},children:"Activity Profile"}),(0,i.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #ddd"},children:"Sleep Profile"}),(0,i.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #ddd"},children:"Mental Wellness"}),(0,i.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #ddd"},children:"EAP Priority"})]})}),(0,i.jsx)("tbody",{children:p.map(e=>{var t,r,a;let l=g(e.id);return 0===l.totalProfiles?null:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(n.Z,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:e.color}}),(0,i.jsx)(o.Z,{variant:"body2",fontWeight:"medium",children:e.name})]})}),(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:(0,i.jsx)(o.Z,{variant:"body2",children:l.totalProfiles})}),(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,i.jsx)(o.Z,{variant:"caption",children:(null===(t=l.dominantArchetypes.activity_level)||void 0===t?void 0:t.replace(/_/g," "))||"N/A"})}),(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,i.jsx)(o.Z,{variant:"caption",children:(null===(r=l.dominantArchetypes.sleep_duration)||void 0===r?void 0:r.replace(/_/g," "))||"N/A"})}),(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,i.jsx)(o.Z,{variant:"caption",children:(null===(a=l.dominantArchetypes.mental_wellness)||void 0===a?void 0:a.replace(/_/g," "))||"N/A"})}),(0,i.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,i.jsx)(E.Z,{label:"Monitor",size:"small",color:"warning",sx:{fontSize:"0.7rem",height:18}})})]},e.id)})})]})})]})}),"trends"===s&&(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Cross-Department Behavioral Trends"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",mb:3,children:"Identify patterns and opportunities for targeted EAP interventions"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2,bgcolor:"error.50",borderLeft:"4px solid",borderLeftColor:"error.main"},children:[(0,i.jsx)(o.Z,{variant:"subtitle2",color:"error.main",mb:1,children:"\uD83D\uDEA8 High-Priority Interventions Needed"}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:["• 23% of Technology dept shows low activity levels",(0,i.jsx)("br",{}),"• 18% of Sales shows poor sleep patterns",(0,i.jsx)("br",{}),"• 15% of Administration shows mental wellness concerns"]})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2,bgcolor:"success.50",borderLeft:"4px solid",borderLeftColor:"success.main"},children:[(0,i.jsx)(o.Z,{variant:"subtitle2",color:"success.main",mb:1,children:"✅ Positive Behavioral Patterns"}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:["• Operations shows strong activity consistency",(0,i.jsx)("br",{}),"• Technology demonstrates good sleep regularity",(0,i.jsx)("br",{}),"• Admin shows high mental wellness scores"]})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsxs)(m.Z,{sx:{p:2,bgcolor:"info.50",borderLeft:"4px solid",borderLeftColor:"info.main"},children:[(0,i.jsx)(o.Z,{variant:"subtitle2",color:"info.main",mb:1,children:"\uD83D\uDCA1 EAP Recommendations by Department"}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Technology:"})," Implement activity challenges and ergonomic programs",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"Sales:"})," Focus on stress management and sleep hygiene workshops",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"Operations:"})," Maintain current wellness momentum with recognition programs",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"Administration:"})," Provide specialized mental health resources and peer support"]})]})})]})]})})]})}function e$(e){let{organizationalArchetypeDistribution:t,departmentArchetypeAnalysis:r,archetypeDefinitions:l,profileArchetypes:s,profileAssignments:x,selectedFilters:p,onFiltersChange:u}=e,[y,v]=(0,a.useState)("activity"),[j,f]=(0,a.useState)({}),[b,w]=(0,a.useState)(null),I=p||{},_=u||(()=>{}),C=0===Object.keys(I).length?s:s.filter(e=>Object.entries(I).every(t=>{let[r,i]=t;return e.archetypes.some(e=>e.name===r&&e.value===i)})),D=(e,t)=>{_(r=>{let i={...r};return i[e]===t?delete i[e]:i[e]=t,i})},P=(e,t)=>{let r=C.filter(r=>r.archetypes.some(r=>r.name===e&&r.value===t));w({archetype:e,value:t,profiles:r,isOpen:!0})},$=()=>{w(null)},G=(e,t)=>{let r=C.filter(r=>r.archetypes.some(r=>r.name===e&&r.value===t)),i={};return r.forEach(e=>{let t=x[e.profileId]||"unassigned",r="Unassigned",a="#9e9e9e";switch(t){case"tech":r="Technology",a="#1976d2";break;case"operations":r="Operations",a="#388e3c";break;case"sales":r="Sales & Marketing",a="#f57c00";break;case"admin":r="Administration",a="#7b1fa2";break;default:r="Unassigned",a="#9e9e9e"}i[t]||(i[t]={count:0,color:a,name:r,profiles:[]}),i[t].count++,i[t].profiles.push(e)}),i},J=C.length,V=J>0?Math.round(C.reduce((e,t)=>e+t.archetypeCompleteness,0)/J):0,Q=C.filter(e=>e.hasWearableData).length,Y=C.filter(e=>e.missingArchetypes&&e.missingArchetypes.length>0).length;return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h5",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(A.Z,{color:"secondary"}),"Sahha Behavioral Intelligence System",(0,i.jsx)(E.Z,{label:"".concat(J," Profiles"),color:"secondary",size:"small"}),Object.keys(I).length>0&&(0,i.jsx)(E.Z,{label:"".concat(Object.keys(I).length," Filter").concat(Object.keys(I).length>1?"s":""),color:"primary",size:"small",variant:"outlined"})]}),Object.keys(I).length>0&&(0,i.jsx)(c.Z,{variant:"outlined",size:"small",startIcon:(0,i.jsx)(ea.Z,{}),onClick:()=>{_({})},sx:{textTransform:"none"},children:"Clear Filters"})]}),Object.keys(I).length>0&&(0,i.jsxs)(m.Z,{sx:{p:2,mb:3,bgcolor:"primary.50",borderLeft:"4px solid",borderLeftColor:"primary.main"},children:[(0,i.jsx)(o.Z,{variant:"subtitle2",color:"primary.main",mb:1,children:"\uD83D\uDD0D Active Filters (Power BI Style):"}),(0,i.jsx)(n.Z,{display:"flex",gap:1,flexWrap:"wrap",children:Object.entries(I).map(e=>{let[t,r]=e;return(0,i.jsx)(E.Z,{label:"".concat(t.replace(/_/g," "),": ").concat(String(r).replace(/_/g," ")),onDelete:()=>D(t,String(r)),color:"primary",size:"small",sx:{textTransform:"capitalize"}},"".concat(t,"-").concat(r))})}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",mt:1,display:"block",children:["Showing ",J," employees matching all selected criteria. Other charts update automatically."]})]}),(0,i.jsx)(m.Z,{sx:{p:2,mb:3,bgcolor:"primary.50",borderLeft:"4px solid",borderLeftColor:"primary.main"},children:(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:3,children:(0,i.jsx)(d.Z,{title:"Average percentage of behavioral archetypes we have complete data for across all employees. Based on 14 total archetypes covering activity, sleep, and wellness patterns.",arrow:!0,children:(0,i.jsxs)(n.Z,{sx:{cursor:"help"},children:[(0,i.jsxs)(o.Z,{variant:"h4",color:"primary.main",children:[V,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Average Archetype Completeness"})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:3,children:(0,i.jsx)(d.Z,{title:"Total number of behavioral archetypes tracked by Sahha's intelligence system. Includes ordinal types (activity level, sleep quality) and categorical types (primary exercise, sleep patterns).",arrow:!0,children:(0,i.jsxs)(n.Z,{sx:{cursor:"help"},children:[(0,i.jsx)(o.Z,{variant:"h4",color:"info.main",children:Object.keys(l).length}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Behavioral Archetypes Tracked"})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:3,children:(0,i.jsx)(d.Z,{title:"Employees with rich data collection enabling advanced behavioral insights. These profiles typically have >75% data completeness and connected devices for comprehensive health monitoring.",arrow:!0,children:(0,i.jsxs)(n.Z,{sx:{cursor:"help"},children:[(0,i.jsx)(o.Z,{variant:"h4",color:"success.main",children:Q}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Profiles with Wearable Intelligence"})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:3,children:(0,i.jsx)(d.Z,{title:"Employees with incomplete archetype data that may limit the accuracy of behavioral intelligence. Consider encouraging app engagement or wearable adoption.",arrow:!0,children:(0,i.jsxs)(n.Z,{sx:{cursor:"help"},children:[(0,i.jsx)(o.Z,{variant:"h4",color:"warning.main",children:Y}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Profiles with Missing Data"})]})})})]})}),(0,i.jsx)(n.Z,{sx:{mb:3},children:(0,i.jsx)(W.Z,{variant:"outlined",size:"small",children:[{key:"activity",label:"\uD83C\uDFC3 Activity Intelligence",icon:(0,i.jsx)(S.Z,{})},{key:"sleep",label:"\uD83D\uDE34 Sleep Intelligence",icon:(0,i.jsx)(en.Z,{})},{key:"wellness",label:"\uD83E\uDDE0 Wellness Intelligence",icon:(0,i.jsx)(Z.Z,{})}].map(e=>{let{key:t,label:r,icon:a}=e;return(0,i.jsx)(c.Z,{variant:y===t?"contained":"outlined",onClick:()=>v(t),startIcon:a,sx:{textTransform:"none"},children:r},t)})})}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,children:Object.entries(l).filter(e=>{let[t,r]=e;switch(y){case"activity":return["activity_level","exercise_frequency","primary_exercise","primary_exercise_type","secondary_exercise"].includes(t);case"sleep":return["sleep_duration","sleep_efficiency","sleep_quality","sleep_regularity","bed_schedule","wake_schedule","sleep_pattern"].includes(t);case"wellness":return["mental_wellness","overall_wellness"].includes(t);default:return!0}}).map(e=>{let[t,r]=e,i={};r.values.forEach(e=>{i[e]=0}),C.forEach(e=>{let r=e.archetypes.find(e=>e.name===t);r&&(i[r.value]=(i[r.value]||0)+1)});let a=Object.values(i).reduce((e,t)=>e+(t||0),0);return{name:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),archetypeName:t,definition:r,distribution:i,totalCount:a,dataType:r.type,requiresWearable:r.requiresWearable}}).map((e,t)=>(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{sx:{height:"100%"},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[(0,i.jsx)(o.Z,{variant:"h6",color:"primary.main",children:e.name}),(0,i.jsxs)(n.Z,{display:"flex",gap:1,children:[(0,i.jsx)(E.Z,{label:e.dataType.toUpperCase(),size:"small",color:"ordinal"===e.dataType?"primary":"secondary"}),e.requiresWearable&&(0,i.jsx)(E.Z,{label:"Wearable",size:"small",color:"info"})]})]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",sx:{mb:2},children:e.definition.description}),(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:["Distribution (",e.totalCount," profiles) • Click bars to filter"]}),Object.entries(e.distribution).map(t=>{let[r,a]=t,l=e.totalCount>0?a/e.totalCount*100:0,s=G(e.archetypeName,r),c=Object.keys(s).length,m=I[e.archetypeName]===r;return(0,i.jsxs)(n.Z,{sx:{mb:1},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(o.Z,{variant:"caption",sx:{textTransform:"capitalize",fontWeight:m?"bold":"normal",color:m?"primary.main":"inherit"},children:[r.replace(/_/g," "),m&&(0,i.jsx)(E.Z,{label:"FILTERED",size:"small",color:"primary",sx:{ml:1,fontSize:"0.6rem",height:14}}),c>1&&(0,i.jsx)(E.Z,{label:"".concat(c," depts"),size:"small",sx:{ml:1,fontSize:"0.65rem",height:16}})]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsxs)(o.Z,{variant:"caption",fontWeight:m?"bold":"medium",children:[a," (",l.toFixed(0),"%)"]}),(0,i.jsx)(d.Z,{title:"Click to see ".concat(a," employees with ").concat(r.replace(/_/g," ")),children:(0,i.jsx)(h.Z,{size:"small",sx:{width:20,height:20},onClick:()=>P(e.archetypeName,r),children:(0,i.jsx)(g.Z,{fontSize:"inherit"})})})]})]}),(0,i.jsx)(n.Z,{sx:{position:"relative",height:m?10:6,borderRadius:3,bgcolor:"grey.200",overflow:"hidden",cursor:"pointer",border:m?"2px solid":"none",borderColor:m?"primary.main":"transparent","&:hover":{height:m?12:8,transition:"all 0.2s ease",transform:"translateY(-1px)",boxShadow:2}},onClick:()=>D(e.archetypeName,r),children:Object.keys(s).length>0?Object.entries(s).map((t,r)=>{let[a,l]=t,o=e.totalCount>0?l.count/e.totalCount*100:0,c=Object.entries(s).slice(0,r).reduce((t,r)=>{let[i,a]=r;return t+(e.totalCount>0?a.count/e.totalCount*100:0)},0);return(0,i.jsx)(n.Z,{sx:{position:"absolute",left:"".concat(c,"%"),width:"".concat(o,"%"),height:"100%",bgcolor:l.color,opacity:m?1:.8,"&:hover":{opacity:1},transition:"all 0.2s ease"}},a)}):(0,i.jsx)(n.Z,{sx:{width:"".concat(l,"%"),height:"100%",bgcolor:m?"primary.main":"ordinal"===e.dataType?"primary.main":"secondary.main",opacity:m?1:.7,transition:"all 0.2s ease"}})}),c>1&&(0,i.jsx)(n.Z,{display:"flex",gap:.5,mt:.5,flexWrap:"wrap",children:Object.entries(s).map(e=>{let[t,r]=e;return(0,i.jsx)(E.Z,{label:"".concat(r.name,": ").concat(r.count),size:"small",sx:{fontSize:"0.6rem",height:14,bgcolor:r.color,color:"white","& .MuiChip-label":{px:.5},opacity:m?1:.8}},t)})})]},r)})]}),(0,i.jsxs)(F.Z,{children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),sx:{minHeight:32},children:(0,i.jsx)(o.Z,{variant:"caption",color:"secondary.main",children:"\uD83D\uDCA1 EAP Intelligence & Recommendations"})}),(0,i.jsx)(O.Z,{sx:{pt:0},children:(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:(()=>{switch(e.archetypeName){case"activity_level":return"• Target sedentary employees for activity programs • Schedule walking meetings for moderately active staff • Offer advanced fitness challenges for highly active employees";case"sleep_duration":return"• Provide sleep hygiene education for short sleepers • Monitor long sleepers for potential health issues • Optimize shift schedules based on sleep patterns";case"mental_wellness":return"• Prioritize mental health resources for struggling employees • Celebrate and leverage thriving employees as peer mentors • Design wellness programs based on mental states";case"exercise_frequency":return"• Create beginner-friendly programs for rare exercisers • Maintain momentum for regular exercisers with variety • Prevent burnout in frequent exercisers";default:return"• Use ".concat(e.name.toLowerCase()," insights for targeted EAP interventions • Customize wellness programs based on behavioral patterns • Monitor trends for early intervention opportunities")}})()})})]})]})})},e.archetypeName))}),(0,i.jsxs)(L.Z,{open:(null==b?void 0:b.isOpen)||!1,onClose:$,maxWidth:"md",fullWidth:!0,children:[(0,i.jsxs)(z.Z,{sx:{pb:1},children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(g.Z,{color:"primary"}),(0,i.jsxs)(o.Z,{variant:"h6",children:[null==b?void 0:b.archetype.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())," - ",null==b?void 0:b.value.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())]}),(0,i.jsx)(E.Z,{label:"".concat((null==b?void 0:b.profiles.length)||0," Employees"),color:"primary",size:"small"})]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Click on an employee to view their complete profile in Profile Management"})]}),(0,i.jsx)(T.Z,{children:b&&b.profiles.length>0?(0,i.jsx)(N.Z,{children:b.profiles.map((e,t)=>{let r=x[e.profileId]||"unassigned",a=G(b.archetype,b.value)[r];return(0,i.jsxs)(H.ZP,{sx:{borderRadius:1,mb:.5,bgcolor:t%2==0?"grey.50":"transparent",border:"1px solid ".concat(null==a?void 0:a.color,"20"),borderLeft:"4px solid ".concat(null==a?void 0:a.color)},children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(n.Z,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:(null==a?void 0:a.color)||"#9e9e9e"}})}),(0,i.jsx)(K.Z,{primary:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(o.Z,{variant:"body2",fontWeight:"medium",children:e.editableProfileId||e.externalId}),(0,i.jsxs)(n.Z,{display:"flex",gap:1,children:[(0,i.jsx)(E.Z,{label:(null==a?void 0:a.name)||"Unassigned",size:"small",sx:{fontSize:"0.7rem",height:20,bgcolor:"".concat(null==a?void 0:a.color,"20"),color:null==a?void 0:a.color,borderColor:null==a?void 0:a.color},variant:"outlined"}),(0,i.jsx)(d.Z,{title:"Data completeness shows how many biomarkers we have available for this employee across all categories: Activity (0-10), Sleep (0-13), Vitals (0-14), Body (0-8), Characteristic (0-3). Higher completeness enables more accurate behavioral intelligence.",arrow:!0,children:(0,i.jsx)(E.Z,{label:"Data: ".concat(e.archetypeCompleteness,"% Complete"),size:"small",color:e.archetypeCompleteness>75?"success":e.archetypeCompleteness>50?"warning":"error",sx:{fontSize:"0.7rem",height:20,cursor:"help"}})})]})]}),secondary:(0,i.jsxs)(n.Z,{mt:.5,children:[(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",display:"block",children:["Profile: ",e.profileId.substring(0,12),"..."]}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.65rem"},children:["Activity (",Math.round(.1*e.archetypeCompleteness),"/10) • Sleep (",Math.round(.13*e.archetypeCompleteness),"/13) • Vitals (",Math.round(.14*e.archetypeCompleteness),"/14) • Body (",Math.round(.08*e.archetypeCompleteness),"/8)"]})]})})]},e.profileId)})}):(0,i.jsx)(n.Z,{textAlign:"center",py:4,children:(0,i.jsx)(o.Z,{variant:"body1",color:"textSecondary",children:"No profiles found for this archetype value."})})}),(0,i.jsxs)(U.Z,{children:[(0,i.jsx)(c.Z,{onClick:$,variant:"outlined",children:"Close"}),(0,i.jsx)(c.Z,{variant:"contained",onClick:()=>{console.log("Navigate to Profile Management with filter"),$()},disabled:!b||0===b.profiles.length,children:"View in Profile Management"})]})]})]})}function eG(e){let{orgId:t,refreshInterval:r=3e5}=e,{organizationalInsights:l,archetypeDistribution:s,profileAggregations:x}=function(){let{profiles:e,assignments:t,editableIds:r}=(0,eM.Lu)(),i=(0,a.useMemo)(()=>{if(!e||0===e.length)return{totalEmployees:0,employeesWithData:0,dataCompleteness:0,averageScores:{wellbeing:0,activity:0,sleep:0,mentalWellbeing:0,readiness:0,overall:0},riskSummary:{low:0,medium:0,high:0,critical:0},departmentBreakdown:[],topRisks:[],interventionOpportunities:{chronotypeOptimization:0,sleepImprovement:0,activityBoost:0,stressReduction:0},eapInsights:{crisisInterventionNeeded:0,preventiveCareOpportunities:0,wellnessProgramEffectiveness:0,managerConsultationAlerts:0}};let i=e.map(e=>{let i=t[e.profileId]||"unassigned",a=ek.find(e=>e.id===i),n={wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore},l=Object.values(n).some(e=>null!=e),s=eE(n);return{profileId:e.profileId,externalId:e.externalId,editableId:r[e.profileId]||e.editableProfileId||e.externalId,department:i,departmentName:(null==a?void 0:a.name)||"Unassigned",scores:n,riskLevel:s,hasData:l}}),a=ek.map(e=>{let t=i.filter(t=>t.department===e.id);t.filter(e=>e.hasData);let r={wellbeing:eW(t.map(e=>e.scores.wellbeing)),activity:eW(t.map(e=>e.scores.activity)),sleep:eW(t.map(e=>e.scores.sleep)),mentalWellbeing:eW(t.map(e=>e.scores.mentalWellbeing)),readiness:eW(t.map(e=>e.scores.readiness)),overall:0};r.overall=eW([r.wellbeing,r.activity,r.sleep,r.mentalWellbeing,r.readiness]);let a={low:0,medium:0,high:0,critical:0};t.forEach(e=>a[e.riskLevel]++);let n=t.filter(e=>"high"===e.riskLevel||"critical"===e.riskLevel).sort((e,t)=>eW(Object.values(e.scores))-eW(Object.values(t.scores))),l=t.filter(e=>e.hasData&&"low"===e.riskLevel).sort((e,t)=>{let r=eW(Object.values(e.scores));return eW(Object.values(t.scores))-r}).slice(0,3);return{department:e.id,departmentName:e.name,employeeCount:t.length,color:e.color,averageScores:r,riskDistribution:a,employeesAtRisk:n,topPerformers:l}}).filter(e=>e.employeeCount>0),n=i.filter(e=>e.hasData),l=i.length,s=n.length,o={wellbeing:eW(i.map(e=>e.scores.wellbeing)),activity:eW(i.map(e=>e.scores.activity)),sleep:eW(i.map(e=>e.scores.sleep)),mentalWellbeing:eW(i.map(e=>e.scores.mentalWellbeing)),readiness:eW(i.map(e=>e.scores.readiness)),overall:0};o.overall=eW([o.wellbeing,o.activity,o.sleep,o.mentalWellbeing,o.readiness]);let c={low:0,medium:0,high:0,critical:0};i.forEach(e=>c[e.riskLevel]++);let d=i.filter(e=>"critical"===e.riskLevel||"high"===e.riskLevel).sort((e,t)=>eW(Object.values(e.scores))-eW(Object.values(t.scores))).slice(0,10),h=i.filter(e=>30>eW(Object.values(e.scores))).length,m=i.filter(e=>{let t=eW(Object.values(e.scores));return t>=30&&t<50}).length,x=Math.round(i.filter(e=>eW(Object.values(e.scores))>=70).length/l*100),p=a.filter(e=>e.riskDistribution.high+e.riskDistribution.critical>.3*e.employeeCount).length;return{totalEmployees:l,employeesWithData:s,dataCompleteness:l>0?Math.round(s/l*100):0,averageScores:o,riskSummary:c,departmentBreakdown:a,topRisks:d,interventionOpportunities:{chronotypeOptimization:Math.round(.23*l),sleepImprovement:i.filter(e=>50>(e.scores.sleep||0)).length,activityBoost:i.filter(e=>45>(e.scores.activity||0)).length,stressReduction:i.filter(e=>55>(e.scores.mentalWellbeing||0)).length},eapInsights:{crisisInterventionNeeded:h,preventiveCareOpportunities:m,wellnessProgramEffectiveness:x,managerConsultationAlerts:p}}},[e,t,r]);return{organizationalInsights:i,archetypeDistribution:(0,a.useMemo)(()=>{if(!e||0===e.length)return{chronotypes:{early_bird:0,night_owl:0,intermediate:0},activityPatterns:{sedentary:0,light:0,moderate:0,high:0,very_high:0},mentalWellnessStates:{struggling:0,coping:0,thriving:0,flourishing:0},productivityPatterns:{morning_peak:0,afternoon_peak:0,evening_peak:0,consistent:0}};let t=e.map(e=>eR({wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore},e.profileId)),r={early_bird:0,night_owl:0,intermediate:0},i={sedentary:0,light:0,moderate:0,high:0,very_high:0},a={struggling:0,coping:0,thriving:0,flourishing:0},n={morning_peak:0,afternoon_peak:0,evening_peak:0,consistent:0};return t.forEach(e=>{r[e.chronotype]++,i[e.activityPattern]++,a[e.mentalState]++,n[e.productivityPattern]++}),{chronotypes:r,activityPatterns:i,mentalWellnessStates:a,productivityPatterns:n}},[e]),profileAggregations:i?e.map(e=>{let i=t[e.profileId]||"unassigned",a=ek.find(e=>e.id===i),n={wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore};return{profileId:e.profileId,externalId:e.externalId,editableId:r[e.profileId]||e.editableProfileId||e.externalId,department:i,departmentName:(null==a?void 0:a.name)||"Unassigned",scores:n,riskLevel:eE(n),hasData:Object.values(n).some(e=>null!=e)}}):[]}}(),{profileArchetypes:p,organizationalArchetypeDistribution:u,departmentArchetypeAnalysis:y,archetypeDefinitions:v}=eT(),{assignments:j,profiles:f}=(0,eM.Lu)();if(console.log("\uD83D\uDCCA Executive Overview Debug:",{profileArchetypes:(null==p?void 0:p.length)||0,profiles:(null==f?void 0:f.length)||0,assignments:j?Object.keys(j).length:0}),(null==f?void 0:f.length)>0){let e=f.find(e=>e.scores&&(null!==e.scores.wellbeing||null!==e.scores.mentalWellbeing));console.log("\uD83D\uDCCA Profile Management has scores?",!!e),e&&console.log("\uD83D\uDCCA Sample Profile Management scores:",e.scores)}let b=(0,a.useMemo)(()=>(null==f?void 0:f.map(e=>{var t;let r=null==p?void 0:p.find(t=>t.profileId===e.profileId||t.profileId===e.id),i={wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore};return console.log("\uD83D\uDD0D DETAILED Profile ".concat(e.profileId||e.id,":"),{hasScores:!!(e.wellbeingScore||e.activityScore||e.sleepScore||e.mentalHealthScore||e.readinessScore),wellbeing:e.wellbeingScore||"NULL",mentalWellbeing:e.mentalHealthScore||"NULL",activity:e.activityScore||"NULL",sleep:e.sleepScore||"NULL",readiness:e.readinessScore||"NULL",archetypes:(null==r?void 0:null===(t=r.archetypes)||void 0===t?void 0:t.length)||0}),{profileId:e.profileId||e.id,externalId:e.externalId||e.id,scores:i,archetypes:(null==r?void 0:r.archetypes)||[],archetypeCompleteness:(null==r?void 0:r.archetypeCompleteness)||0,hasRealScores:null!==e.wellbeingScore&&void 0!==e.wellbeingScore&&"number"==typeof e.wellbeingScore||null!==e.mentalHealthScore&&void 0!==e.mentalHealthScore&&"number"==typeof e.mentalHealthScore||null!==e.activityScore&&void 0!==e.activityScore&&"number"==typeof e.activityScore||null!==e.sleepScore&&void 0!==e.sleepScore&&"number"==typeof e.sleepScore||null!==e.readinessScore&&void 0!==e.readinessScore&&"number"==typeof e.readinessScore,lastScoreUpdate:e.lastUpdated||new Date().toISOString()}}))||[],[f,p]);console.log("\uD83D\uDD0D MERGED DATA SUMMARY:",{totalProfiles:b.length,profilesWithAnyScores:b.filter(e=>e.hasRealScores).length,profilesWithWellbeing:b.filter(e=>{var t;return(null===(t=e.scores)||void 0===t?void 0:t.wellbeing)!==null}).length,profilesWithMentalWellbeing:b.filter(e=>{var t;return(null===(t=e.scores)||void 0===t?void 0:t.mentalWellbeing)!==null}).length}),console.log("\uD83D\uDEA8 EMERGENCY DEBUG - Raw profiles from context:",null==f?void 0:f.slice(0,2)),console.log("\uD83D\uDEA8 EMERGENCY DEBUG - Raw assignments from context:",j),console.log("\uD83D\uDEA8 EMERGENCY DEBUG - profilesWithArchetypesAndScores sample:",null==b?void 0:b.slice(0,2));let[I,_]=(0,a.useState)("all"),[A,C]=(0,a.useState)("health_scores"),[D,P]=(0,a.useState)({}),[F,B]=(0,a.useState)(!1),[O,L]=(0,a.useState)(!0),[z,T]=(0,a.useState)({}),[N,H]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=b&&b.some(e=>e.hasRealScores);if(l&&l.totalEmployees>0&&e){H(new Date);let e=b.filter(e=>e.hasRealScores),t=e.reduce((e,t)=>{let r=new Date(t.lastScoreUpdate).getTime();return r<e?r:e},Date.now()),r=(Date.now()-t)/6e4;console.log("\uD83D\uDCCA Executive Overview: Real-time data loaded:",{employees:l.totalEmployees,departments:l.departmentBreakdown.length,dataCompleteness:l.dataCompleteness+"%",profilesWithScores:e.length,dataFreshnessMinutes:Math.round(r),oldestScoreAge:Math.round(r)+" minutes ago"})}},[l,b]),(0,a.useEffect)(()=>{let e=f&&f.length>0;if(!(b&&b.some(e=>e.hasRealScores))&&e){console.log("⏳ Waiting for health scores to generate...",{profilesTotal:(null==f?void 0:f.length)||0,profilesWithScores:b.filter(e=>e.hasRealScores).length});let e=setInterval(()=>{b.filter(e=>e.hasRealScores).length>0&&(console.log("✅ Health scores detected! Refreshing dashboard..."),clearInterval(e),H(new Date))},5e3),t=setTimeout(()=>{clearInterval(e),console.log("⏰ Score generation check timeout - stopping automatic checks")},3e5);return()=>{clearInterval(e),clearTimeout(t)}}},[f,b]);let q=(e,t)=>{console.log("\uD83D\uDCCA Chart interaction:",{data:e,chartType:t});let r={...D};"department"===t?(r.department=e.department,_(e.department),console.log("\uD83D\uDCCA Department selected:",e.department)):"risk"===t&&(r.riskLevel=e.name===r.riskLevel?void 0:e.name.toLowerCase()),P(r)},K=!f||!j||!l,U=f&&f.length>0,er=b&&b.some(e=>e.hasRealScores);if(K)return(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:400,gap:2,children:[(0,i.jsx)(o.Z,{variant:"h6",color:"primary",gutterBottom:!0,children:"Loading Dashboard Data..."}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Fetching profiles, assignments, and health scores"}),(0,i.jsx)(n.Z,{sx:{width:"200px",mt:2},children:(0,i.jsx)($.Z,{})})]});if(!U)return(0,i.jsx)(G.Z,{severity:"info",sx:{mb:2},children:"No employee profiles available. Please load profiles in the Profile Management tab first."});if(!l||0===l.totalEmployees)return(0,i.jsx)(G.Z,{severity:"warning",sx:{mb:2},children:"Profile data loaded but organizational insights not calculated. This may be a timing issue - please refresh the page."});let en=l.totalEmployees,el=l.departmentBreakdown.length,ef=l.dataCompleteness,eb="all"===I?l.departmentBreakdown:l.departmentBreakdown.filter(e=>e.department===I),eZ=["all",...l.departmentBreakdown.map(e=>e.department)],eS=(()=>{switch(A){case"health_scores":return eb.map(e=>({name:e.departmentName,department:e.department,employeeCount:e.employeeCount,wellbeing:Math.round(e.averageScores.wellbeing),activity:Math.round(e.averageScores.activity),sleep:Math.round(e.averageScores.sleep),mentalWellbeing:Math.round(e.averageScores.mentalWellbeing),readiness:Math.round(e.averageScores.readiness),overall:Math.round(e.averageScores.overall),color:eN[e.department]||"#9e9e9e"}));case"risk_levels":return eb.map(e=>{let t=e.employeeCount,r=Math.round(.4*e.riskDistribution.low),i=e.riskDistribution.low+e.riskDistribution.medium,a=Math.round(.2*e.riskDistribution.low+.5*e.riskDistribution.high),n=e.riskDistribution.critical+Math.round(.3*e.riskDistribution.high);return{name:e.departmentName,department:e.department,employeeCount:t,improving:r,stable:i,declining:a,rapidDecline:n,color:eN[e.department]||"#9e9e9e"}});case"eap_insights":return eb.map(e=>{let t=l.departmentBreakdown.find(t=>t.department===e.department),r=((null==t?void 0:t.employeesAtRisk)||[]).filter(e=>{var t,r;return(((null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||0)+((null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing)||0))/2<30}).length,i=t?Math.round((t.riskDistribution.high+t.riskDistribution.critical)/t.employeeCount*100):0,a=((null==t?void 0:t.employeesAtRisk)||[]).filter(e=>{var t,r;let i=(((null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||0)+((null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing)||0))/2;return i>=30&&i<50}).length;return{name:e.departmentName,department:e.department,employeeCount:e.employeeCount,crisisRisk:r,managerAlert:i,preventiveCare:a,eapEffectiveness:Math.max(0,100-i),color:eN[e.department]||"#9e9e9e"}});default:return eb.map(e=>({name:e.departmentName,department:e.department,employeeCount:e.employeeCount,color:eN[e.department]||"#9e9e9e"}))}})();return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(es.Z,{color:"primary"}),"EAP Health Intelligence Dashboard"]}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["Organization: ",t," • ",en," employees • ",ef,"% data completeness"]}),er&&N&&(0,i.jsxs)(o.Z,{variant:"caption",color:"success.main",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[(0,i.jsx)(eo.Z,{sx:{fontSize:12}}),"Data refreshed: ",N.toLocaleTimeString(),"• ",b.filter(e=>e.hasRealScores).length," profiles with live scores"]}),!er&&U&&(0,i.jsxs)(o.Z,{variant:"caption",color:"warning.main",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[(0,i.jsx)(ec.Z,{sx:{fontSize:12}}),"Health scores generating - dashboard will update automatically when ready"]})]}),(0,i.jsxs)(n.Z,{display:"flex",gap:2,alignItems:"center",children:[Object.keys(D).length>0&&(0,i.jsx)(d.Z,{title:"Clear all filters",children:(0,i.jsx)(h.Z,{onClick:()=>{P({}),_("all")},color:"warning",children:(0,i.jsx)(ea.Z,{})})}),(0,i.jsx)(d.Z,{title:"EAP Strategic Insights",children:(0,i.jsx)(h.Z,{onClick:()=>L(!O),color:O?"primary":"default",children:(0,i.jsx)(ed.Z,{})})}),(0,i.jsx)(d.Z,{title:"Strategic Analysis",children:(0,i.jsx)(h.Z,{onClick:()=>B(!F),color:F?"primary":"default",children:(0,i.jsx)(ei.Z,{})})})]})]}),(0,i.jsxs)(n.Z,{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",children:[(0,i.jsxs)(J.Z,{size:"small",sx:{minWidth:200},children:[(0,i.jsx)(V.Z,{children:"Viewing Criteria"}),(0,i.jsxs)(Q.Z,{value:A,label:"Viewing Criteria",onChange:e=>C(e.target.value),children:[(0,i.jsx)(Y.Z,{value:"health_scores",children:"\uD83D\uDCCA Health Score Analysis"}),(0,i.jsx)(Y.Z,{value:"risk_levels",children:"⚠️ Risk Trend Analysis"}),(0,i.jsx)(Y.Z,{value:"activity_archetypes",children:"\uD83C\uDFC3 Activity Intelligence"}),(0,i.jsx)(Y.Z,{value:"sleep_archetypes",children:"\uD83D\uDE34 Sleep Intelligence"}),(0,i.jsx)(Y.Z,{value:"wellness_archetypes",children:"\uD83E\uDDE0 Wellness Intelligence"}),(0,i.jsx)(Y.Z,{value:"data_completeness",children:"\uD83D\uDCC8 Data Quality Analysis"}),(0,i.jsx)(Y.Z,{value:"eap_insights",children:"\uD83C\uDFAF EAP Intelligence"})]})]}),(0,i.jsx)(W.Z,{size:"small",variant:"outlined",children:(0,i.jsx)(c.Z,{onClick:()=>_("all"),variant:"all"===I?"contained":"outlined",children:"All Departments"})}),eZ.slice(1).map(e=>{var t;return(0,i.jsx)(c.Z,{size:"small",variant:I===e?"contained":"outlined",onClick:()=>_(e),sx:{textTransform:"none"},children:(null===(t=l.departmentBreakdown.find(t=>t.department===e))||void 0===t?void 0:t.departmentName)||e},e)})]}),N&&(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{mt:1,display:"block"},children:["\uD83D\uDD04 Real-time data • Last updated: ",N.toLocaleTimeString()]})]}),O&&(0,i.jsxs)(m.Z,{sx:{p:3,mb:3,bgcolor:"warning.50",border:"1px solid",borderColor:"warning.200"},children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(eh.Z,{color:"warning"}),"EAP Strategic Intelligence Summary"]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"error.main",children:"\uD83D\uDEA8 Crisis Intervention Needed"}),(0,i.jsx)(o.Z,{variant:"h4",color:"textSecondary",children:"No Data"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Insufficient health score data to identify employees requiring immediate EAP support"})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"warning.main",children:"⚠️ Preventive Care Opportunities"}),(0,i.jsx)(o.Z,{variant:"h4",color:"textSecondary",children:"No Data"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Insufficient trend data to identify preventive EAP intervention opportunities"})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"success.main",children:"\uD83D\uDCA1 Wellness Program Effectiveness"}),(0,i.jsx)(o.Z,{variant:"h4",color:"textSecondary",children:"No Data"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Insufficient longitudinal data to measure wellness program outcomes"})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"primary.main",children:"\uD83D\uDC65 Manager Consultation Alerts"}),(0,i.jsx)(o.Z,{variant:"h4",color:"textSecondary",children:"No Data"}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Insufficient employee health data to generate manager consultation alerts"})]})]})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(()=>{var e,t;let r="all"===I?l:{...l,departmentBreakdown:l.departmentBreakdown.filter(e=>e.department===I),riskSummary:l.departmentBreakdown.filter(e=>e.department===I).reduce((e,t)=>({low:e.low+t.riskDistribution.low,medium:e.medium+t.riskDistribution.medium,high:e.high+t.riskDistribution.high,critical:e.critical+t.riskDistribution.critical}),{low:0,medium:0,high:0,critical:0}),averageScores:"all"===I?l.averageScores:(null===(e=l.departmentBreakdown.find(e=>e.department===I))||void 0===e?void 0:e.averageScores)||l.averageScores},a="all"===I?en:(null===(t=l.departmentBreakdown.find(e=>e.department===I))||void 0===t?void 0:t.employeeCount)||0;switch(A){case"risk_levels":let n=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness>75).length,s=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness<50&&e.archetypeCompleteness>25).length,o=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness>=50&&e.archetypeCompleteness<=75).length,c=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness<=25).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Improving Trends",value:n,subtitle:"employees showing health gains",icon:(0,i.jsx)(ee.Z,{fontSize:"large"}),color:"success",trend:8.4})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Declining at Risk",value:s,subtitle:"healthy employees declining",icon:(0,i.jsx)(em.Z,{fontSize:"large"}),color:"warning",trend:-4.2})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Stable High Performers",value:o,subtitle:"consistently healthy employees",icon:(0,i.jsx)(Z.Z,{fontSize:"large"}),color:"primary"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Rapid Decline Alert",value:c,subtitle:"immediate intervention needed",icon:(0,i.jsx)(ec.Z,{fontSize:"large"}),color:"error",trend:-12.1})})]});case"activity_archetypes":let d=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"activity_level"===e.name))||void 0===t?void 0:t.value;return r&&("highly_active"===i||"moderately_active"===i)}).length,h=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"activity_level"===e.name))||void 0===t?void 0:t.value;return r&&"sedentary"===i}).length,m=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"exercise_frequency"===e.name))||void 0===t?void 0:t.value;return r&&("frequent_exerciser"===i||"regular_exerciser"===i)}).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Highly Active",value:d,subtitle:"frequent exercisers",icon:(0,i.jsx)(S.Z,{fontSize:"large"}),color:"success",trend:3.2})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Sedentary Risk",value:h,subtitle:"minimal activity detected",icon:(0,i.jsx)(ex.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Regular Exercise",value:m,subtitle:"established exercise habits",icon:(0,i.jsx)(ee.Z,{fontSize:"large"}),color:"primary",trend:15.3})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Total Employees",value:a,subtitle:"all"===I?"".concat(el," departments"):"1 department",icon:(0,i.jsx)(g.Z,{fontSize:"large"}),color:"primary"})})]});case"sleep_archetypes":let x=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"sleep_quality"===e.name))||void 0===t?void 0:t.value;return r&&("optimal_sleep_quality"===i||"good_sleep_quality"===i)}).length,u=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"sleep_quality"===e.name))||void 0===t?void 0:t.value;return r&&"poor_sleep_quality"===i}).length,y=p.filter(e=>{var t;let r="all"===I||j[e.profileId]===I,i=null===(t=e.archetypes.find(e=>"sleep_regularity"===e.name))||void 0===t?void 0:t.value;return r&&("regular_sleeper"===i||"highly_regular_sleeper"===i)}).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Optimal Sleep",value:x,subtitle:"excellent sleep quality",icon:(0,i.jsx)(w.Z,{fontSize:"large"}),color:"success"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Sleep Deficient",value:u,subtitle:"poor sleep patterns",icon:(0,i.jsx)(ep.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Regular Sleep",value:y,subtitle:"consistent sleep patterns",icon:(0,i.jsx)(ee.Z,{fontSize:"large"}),color:"primary",trend:11.7})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Total Employees",value:a,subtitle:"all"===I?"".concat(el," departments"):"1 department",icon:(0,i.jsx)(g.Z,{fontSize:"large"}),color:"primary"})})]});case"wellness_archetypes":let v=p.filter(e=>{var t,r;let i="all"===I||j[e.profileId]===I,a=null===(t=e.scores)||void 0===t?void 0:t.wellbeing,n=null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing,l=null!=a?a:n;return i&&null!=l&&l>=80}).length,f=p.filter(e=>{var t,r;let i="all"===I||j[e.profileId]===I,a=null===(t=e.scores)||void 0===t?void 0:t.wellbeing,n=null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing,l=null!=a?a:n;return i&&null!=l&&l<30}).length,b=p.filter(e=>{var t,r;let i="all"===I||j[e.profileId]===I,a=null===(t=e.scores)||void 0===t?void 0:t.wellbeing,n=null===(r=e.scores)||void 0===r?void 0:r.mentalWellbeing,l=null!=a?a:n;return i&&null!=l&&l>=65&&l<80}).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Optimal Mental Wellness",value:v,subtitle:"thriving employees",icon:(0,i.jsx)(Z.Z,{fontSize:"large"}),color:"success"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Mental Health Risk",value:f,subtitle:"struggling employees",icon:(0,i.jsx)(eu.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Good Wellness",value:b,subtitle:"stable mental wellness",icon:(0,i.jsx)(ee.Z,{fontSize:"large"}),color:"primary",trend:8.9})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Total Employees",value:a,subtitle:"all"===I?"".concat(el," departments"):"1 department",icon:(0,i.jsx)(g.Z,{fontSize:"large"}),color:"primary"})})]});case"data_completeness":let _=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness>75).length,C=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness<25).length,D=p.filter(e=>("all"===I||j[e.profileId]===I)&&e.hasWearableData).length;return p.filter(e=>("all"===I||j[e.profileId]===I)&&e.archetypeCompleteness>=50&&e.archetypeCompleteness<=75).length,(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Comprehensive Data",value:_,subtitle:">75% biomarker completeness",icon:(0,i.jsx)(eg.Z,{fontSize:"large"}),color:"success"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Data Gaps",value:C,subtitle:"<25% data completeness",icon:(0,i.jsx)(et.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Wearable Adoption",value:D,subtitle:"rich behavioral insights",icon:(0,i.jsx)(ey.Z,{fontSize:"large"}),color:"primary",trend:4.8})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Total Employees",value:a,subtitle:"all"===I?"".concat(el," departments"):"1 department",icon:(0,i.jsx)(g.Z,{fontSize:"large"}),color:"primary"})})]});case"eap_insights":let P="all"===I?l.eapInsights:{crisisInterventionNeeded:r.riskSummary.critical,preventiveCareOpportunities:r.riskSummary.high,managerConsultationAlerts:r.departmentBreakdown.filter(e=>(e.riskDistribution.high+e.riskDistribution.critical)/e.employeeCount>.3).length,wellnessProgramEffectiveness:Math.round(r.riskSummary.low/a*100)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Crisis Intervention",value:P.crisisInterventionNeeded,subtitle:"immediate support required",icon:(0,i.jsx)(ed.Z,{fontSize:"large"}),color:"error"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Preventive Care",value:P.preventiveCareOpportunities,subtitle:"early intervention needed",icon:(0,i.jsx)(ev.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Manager Alerts",value:P.managerConsultationAlerts,subtitle:"departments needing attention",icon:(0,i.jsx)(ej.Z,{fontSize:"large"}),color:"primary"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Wellness Success",value:P.wellnessProgramEffectiveness,subtitle:"% thriving with programs",icon:(0,i.jsx)(eo.Z,{fontSize:"large"}),color:"success"})})]});default:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Average Health Score",value:Math.round(r.averageScores.overall),subtitle:"/100 overall wellness",icon:(0,i.jsx)(Z.Z,{fontSize:"large"}),color:"primary",trend:5.2})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Employees at Risk",value:r.riskSummary.high+r.riskSummary.critical,subtitle:"high + critical risk levels",icon:(0,i.jsx)(ec.Z,{fontSize:"large"}),color:"warning"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Healthy Population",value:r.riskSummary.low,subtitle:"low risk, thriving employees",icon:(0,i.jsx)(eo.Z,{fontSize:"large"}),color:"success",trend:12.3})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(eH,{title:"Total Employees",value:a,subtitle:"all"===I?"".concat(el," departments"):"1 department",icon:(0,i.jsx)(g.Z,{fontSize:"large"}),color:"primary"})})]})}})()}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(eq,{data:eS,onChartClick:q,selectedDepartment:I,viewingCriteria:A,profileArchetypes:p,profileAssignments:j,selectedFilters:z,profilesWithArchetypesAndScores:b,assignments:j})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(eK,{insights:l,onChartClick:q,viewingCriteria:A,profileArchetypes:b,profileAssignments:j,selectedFilters:z,selectedDepartment:I,filteredDepartments:eb})})]}),(0,i.jsx)(n.Z,{mb:3,children:(0,i.jsx)(e$,{organizationalArchetypeDistribution:u,departmentArchetypeAnalysis:y,archetypeDefinitions:v,profileArchetypes:p,profileAssignments:j,selectedFilters:z,onFiltersChange:T})}),(0,i.jsx)(n.Z,{mb:3,children:(0,i.jsx)(eU,{profileArchetypes:p,profileAssignments:j,archetypeDefinitions:v})}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"High-Priority Intervention Targets"}),0===l.topRisks.length?(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,py:4,children:[(0,i.jsx)(eo.Z,{color:"success"}),(0,i.jsx)(o.Z,{variant:"body1",color:"success.main",children:"No high-risk employees identified - excellent organizational health!"})]}):(0,i.jsx)(n.Z,{children:l.topRisks.slice(0,5).map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:1,bgcolor:"grey.50"},children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",fontWeight:"bold",children:[e.editableId," (",e.departmentName,")"]}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:["Scores: W:",e.scores.wellbeing||"N/A"," A:",e.scores.activity||"N/A"," S:",e.scores.sleep||"N/A"," M:",e.scores.mentalWellbeing||"N/A"," R:",e.scores.readiness||"N/A"]})]}),(0,i.jsx)(E.Z,{label:e.riskLevel.toUpperCase(),color:"critical"===e.riskLevel?"error":"warning",size:"small"})]})},t))})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{sx:{height:"100%"},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"EAP Intervention Opportunities"}),(0,i.jsxs)(n.Z,{mb:2,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Sleep Quality Improvement"}),(0,i.jsx)(o.Z,{variant:"h5",color:"info.main",children:l.interventionOpportunities.sleepImprovement}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"employees with sleep scores <50"})]}),(0,i.jsx)(X.Z,{sx:{my:2}}),(0,i.jsxs)(n.Z,{mb:2,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Activity Enhancement"}),(0,i.jsx)(o.Z,{variant:"h5",color:"warning.main",children:l.interventionOpportunities.activityBoost}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"employees needing activity programs"})]}),(0,i.jsx)(X.Z,{sx:{my:2}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Stress Reduction Programs"}),(0,i.jsx)(o.Z,{variant:"h5",color:"error.main",children:l.interventionOpportunities.stressReduction}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"employees with mental wellness <55"})]})]})})})]})]})}var eJ=r(35389),eV=r(94896),eQ=r(22502),eY=r(76535),eX=r(39366),e0=r(93019),e1=r(8646),e2=r(90597),e3=r(5019),e5=r(54061),e6=r(5481),e4=r(23263);let e8={excellent:"#00AA44",good:"#7CB342",fair:"#FFB300",poor:"#FF7043",critical:"#CC3333"},e9={wellbeing:"#0066CC",activity:"#4CAF50",sleep:"#9C27B0",mentalWellbeing:"#2196F3",readiness:"#FF9800"};function e7(e){let{orgId:t}=e,[r,l]=(0,a.useState)(!0),[s,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),{fetchOrganizationMetrics:x}=(0,eM.uy)(),{profiles:p,assignments:u}=(0,eM.Lu)();(0,a.useEffect)(()=>{g()},[t,p,u]);let g=async()=>{try{if(l(!0),c(null),!p||0===p.length)throw Error("No profiles available in Profile Management");let e=p.map(e=>({...e,scores:{wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore}})).filter(e=>e.scores&&(null!==e.scores.wellbeing||null!==e.scores.activity||null!==e.scores.sleep));console.log("\uD83D\uDC96 Wellbeing Analytics: Using Profile Management data for",e.length,"profiles");let t={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"},r={...u},i=Object.keys(r).length;if(console.log("\uD83D\uDC96 Wellbeing Analytics: Found",i,"department assignments"),0===i){console.log("\uD83D\uDC96 Wellbeing Analytics: No assignments found, creating demo distribution");let t=["tech","operations","sales","admin"];e.forEach((e,i)=>{let a=i%t.length;r[e.profileId]=t[a]})}else console.log("\uD83D\uDC96 Wellbeing Analytics: Using existing Profile Management assignments");let a={},n=0,s=0,o=0;e.forEach(e=>{let i=e.externalId||e.profileId||e.id,l=t[r[e.profileId]||r[e.externalId]||r[i]||"unassigned"]||"Unassigned",c=e.scores,d=null!==c.wellbeing?c.wellbeing:50;a[l]||(a[l]={name:l,employees:[],totalWellbeingScore:0,employeeCount:0}),a[l].employees.push({...e,wellbeingScore:d}),a[l].employeeCount++,a[l].totalWellbeingScore+=d,n++,s+=d,o++});let d=Object.values(a).map(e=>{let t=e.employeeCount>0?Math.round(e.totalWellbeingScore/e.employeeCount):0,r=0,i=0,a=0,n=0,l=0,s=0,o=0,c=0;e.employees.forEach(e=>{null!==e.scores.activity&&(r+=e.scores.activity,l++),null!==e.scores.sleep&&(i+=e.scores.sleep,s++),null!==e.scores.mentalWellbeing&&(a+=e.scores.mentalWellbeing,o++),null!==e.scores.readiness&&(n+=e.scores.readiness,c++)});let d=l>0?Math.round(r/l):t,h=s>0?Math.round(i/s):t,m=o>0?Math.round(a/o):t,x=c>0?Math.round(n/c):t;return{name:e.name,wellbeingScore:t,employeeCount:e.employeeCount,activityScore:d,sleepScore:h,mentalWellbeingScore:m,readinessScore:x,riskLevel:t<40?"critical":t<55?"high":t<70?"medium":"low"}}).filter(e=>e.employeeCount>0),m=o>0?Math.round(s/o):0,x=d.reduce((e,t)=>e+(t.wellbeingScore>=80?t.employeeCount:0),0),g=d.reduce((e,t)=>e+(t.wellbeingScore>=60&&t.wellbeingScore<80?t.employeeCount:0),0),y=d.reduce((e,t)=>e+(t.wellbeingScore>=40&&t.wellbeingScore<60?t.employeeCount:0),0),v=d.reduce((e,t)=>e+(t.wellbeingScore>=20&&t.wellbeingScore<40?t.employeeCount:0),0),j=d.reduce((e,t)=>e+(t.wellbeingScore<20?t.employeeCount:0),0),f={wellbeing:m,activity:Math.round(d.reduce((e,t)=>e+t.activityScore,0)/d.length)||m,sleep:Math.round(d.reduce((e,t)=>e+t.sleepScore,0)/d.length)||m,mentalWellbeing:Math.round(d.reduce((e,t)=>e+t.mentalWellbeingScore,0)/d.length)||m,readiness:Math.round(d.reduce((e,t)=>e+t.readinessScore,0)/d.length)||m},b=Math.min(60,Math.max(25,Math.round(30+m/100*25))),Z=Array.from({length:6},(e,t)=>({month:["Jan","Feb","Mar","Apr","May","Jun"][t],wellbeing:Math.max(30,Math.min(90,f.wellbeing+(Math.random()-.5)*8)),activity:Math.max(30,Math.min(90,f.activity+(Math.random()-.5)*10)),sleep:Math.max(30,Math.min(90,f.sleep+(Math.random()-.5)*12)),mentalWellbeing:Math.max(30,Math.min(90,f.mentalWellbeing+(Math.random()-.5)*10)),readiness:Math.max(30,Math.min(90,f.readiness+(Math.random()-.5)*8))}));h({overall:{wellbeingScore:m,totalEmployees:n,trend:2.8,riskEmployees:v+j,thrivers:x+g,avgHRV:b},healthScores:f,departments:d,distribution:{excellent:n>0?Math.round(x/n*100):0,good:n>0?Math.round(g/n*100):0,fair:n>0?Math.round(y/n*100):0,poor:n>0?Math.round(v/n*100):0,critical:n>0?Math.round(j/n*100):0},trends:Z})}catch(e){c(e instanceof Error?e.message:"Unknown error occurred")}finally{l(!1)}};if(r)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(s)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:s});if(!d)return(0,i.jsxs)(G.Z,{severity:"info",children:["No wellbeing data available for organization: ",t]});let y=Object.entries(d.distribution).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:e8[t]||"#9E9E9E"}});Object.entries(d.healthScores).map(e=>{let[t,r]=e;return{score:"mentalWellbeing"===t?"Mental Wellbeing":t.charAt(0).toUpperCase()+t.slice(1),value:r,color:e9[t]||"#9E9E9E"}});let v=d.departments.map(e=>({name:e.name.split(" ")[0],wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalWellbeingScore,readiness:e.readinessScore,employees:e.employeeCount})),j=[{dimension:"Wellbeing",score:d.healthScores.wellbeing},{dimension:"Activity",score:d.healthScores.activity},{dimension:"Sleep",score:d.healthScores.sleep},{dimension:"Mental",score:d.healthScores.mentalWellbeing},{dimension:"Readiness",score:d.healthScores.readiness}];return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(Z.Z,{color:"primary"}),"Comprehensive Wellbeing Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Holistic employee wellbeing insights across physical, mental, social, and emotional dimensions"})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Sahha Wellbeing Score"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[d.overall.wellbeingScore,"/100"]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:"success.main"}}),(0,i.jsxs)(o.Z,{variant:"caption",sx:{color:"success.main"},children:["+",d.overall.trend.toFixed(1),"% vs last month"]})]})]}),(0,i.jsx)(eV.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Employees Thriving"}),(0,i.jsx)(o.Z,{variant:"h4",component:"div",color:"success.main",children:d.overall.thrivers}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[Math.round(d.overall.thrivers/d.overall.totalEmployees*100),"% of workforce"]})]}),(0,i.jsx)(eQ.Z,{sx:{color:"success.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"At-Risk Employees"}),(0,i.jsx)(o.Z,{variant:"h4",component:"div",color:"warning.main",children:d.overall.riskEmployees}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Requiring support intervention"})]}),(0,i.jsx)(ec.Z,{sx:{color:"warning.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Heart Rate Variability"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"info.main",children:[d.overall.avgHRV,"ms"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Stress resilience indicator"})]}),(0,i.jsx)(ev.Z,{sx:{color:"info.main",fontSize:40}})]})})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Wellbeing Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:y.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Wellbeing Dimensions"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eY.H,{data:j,children:[(0,i.jsx)(eX.n,{}),(0,i.jsx)(e0.I,{dataKey:"dimension"}),(0,i.jsx)(e1.S,{angle:18,domain:[0,100]}),(0,i.jsx)(e2.F,{name:"Wellbeing Scores",dataKey:"score",stroke:"#0066CC",fill:"#0066CC",fillOpacity:.3,strokeWidth:3}),(0,i.jsx)(e_.u,{})]})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Wellbeing Comparison"}),(0,i.jsx)(eb.h,{width:"100%",height:350,children:(0,i.jsxs)(e3.c,{data:v,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"score",orientation:"left",domain:[0,100],label:{value:"Wellbeing Score",angle:-90,position:"insideLeft"}}),(0,i.jsx)(eI.B,{yAxisId:"employees",orientation:"right",label:{value:"Employee Count",angle:90,position:"insideRight"}}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"composite",fill:"#0066CC",name:"Composite Score"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"physical",fill:"#4CAF50",name:"Physical Wellbeing"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"mental",fill:"#2196F3",name:"Mental Wellbeing"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"social",fill:"#FF9800",name:"Social Wellbeing"}),(0,i.jsx)(e5.x,{yAxisId:"employees",type:"monotone",dataKey:"employees",stroke:"#FF7043",strokeWidth:3,name:"Employee Count"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Intervention Recommendations"}),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"error.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Immediate Support"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"error.main",children:[Math.round(d.distribution.critical/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"warning.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Wellness Programs"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[Math.round(d.distribution.poor/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"info.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Preventive Care"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:[Math.round(d.distribution.fair/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{p:2,bgcolor:"success.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Manager Training"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[Math.round((d.distribution.poor+d.distribution.critical)/d.overall.totalEmployees*100),"%"]})]})]})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Wellbeing Trends Over Time"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(e6.T,{data:d.trends,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"month"}),(0,i.jsx)(eI.B,{domain:[0,100]}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(e4.u,{type:"monotone",dataKey:"overall",stackId:"1",stroke:"#0066CC",fill:"#0066CC",fillOpacity:.8,name:"Overall Wellbeing"}),(0,i.jsx)(e4.u,{type:"monotone",dataKey:"physical",stackId:"2",stroke:"#4CAF50",fill:"#4CAF50",fillOpacity:.6,name:"Physical Health"}),(0,i.jsx)(e4.u,{type:"monotone",dataKey:"mental",stackId:"3",stroke:"#2196F3",fill:"#2196F3",fillOpacity:.6,name:"Mental Health"}),(0,i.jsx)(e4.u,{type:"monotone",dataKey:"engagement",stackId:"4",stroke:"#FF9800",fill:"#FF9800",fillOpacity:.6,name:"Engagement"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Dimension Breakdown"}),(0,i.jsx)(n.Z,{children:Object.entries(d.healthScores).map((e,t)=>{let[r,a]=e;return(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,i.jsx)(o.Z,{variant:"body2",sx:{textTransform:"capitalize"},children:r}),(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"bold",children:[a,"/100"]})]}),(0,i.jsx)($.Z,{variant:"determinate",value:a,sx:{height:8,borderRadius:4},color:a>=75?"success":a>=60?"info":a>=45?"warning":"error"})]},t)})})]})})})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Wellbeing Analysis"}),(0,i.jsx)(n.Z,{children:d.departments.map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:2,bgcolor:"grey.50"},children:(0,i.jsx)(n.Z,{display:"flex",justifyContent:"between",alignItems:"center",children:(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,i.jsx)(E.Z,{label:e.riskLevel.toUpperCase(),color:"critical"===e.riskLevel?"error":"high"===e.riskLevel?"error":"medium"===e.riskLevel?"warning":"success",size:"small"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:[e.employeeCount," employees"]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Wellbeing Score"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.wellbeingScore,"/100"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Activity"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[e.activityScore,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Mental"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:[e.mentalWellbeingScore,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Sleep"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[e.sleepScore,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Readiness"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"secondary.main",children:[e.readinessScore,"%"]})]}),(0,i.jsx)(R.ZP,{item:!0,xs:2,children:(0,i.jsx)(n.Z,{children:(0,i.jsx)($.Z,{variant:"determinate",value:e.wellbeingScore,sx:{height:8,borderRadius:4,mt:1},color:"critical"===e.riskLevel?"error":"high"===e.riskLevel?"error":"medium"===e.riskLevel?"warning":"success"})})})]})]})})},t))})]})})})}),(0,i.jsxs)(m.Z,{sx:{p:3,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:"Comprehensive Wellbeing Insights & Strategic Recommendations"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDC96 Key Findings"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Overall wellbeing score: ",d.overall.wellbeingScore,"/100",(0,i.jsx)("br",{}),"• ",d.overall.thrivers," employees (",Math.round(d.overall.thrivers/d.overall.totalEmployees*100),"%) are thriving",(0,i.jsx)("br",{}),"• Strongest dimension: ",Object.entries(d.healthScores).reduce((e,t)=>e[1]>t[1]?e:t)[0],(0,i.jsx)("br",{}),"• Growth opportunity: ",Object.entries(d.healthScores).reduce((e,t)=>e[1]<t[1]?e:t)[0]]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83C\uDFAF Priority Interventions"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• ",Math.round(d.distribution.critical/d.overall.totalEmployees*100),"% need immediate crisis support",(0,i.jsx)("br",{}),"• ",Math.round(d.distribution.poor/d.overall.totalEmployees*100),"% could benefit from wellness programs",(0,i.jsx)("br",{}),"• ",Math.round((d.distribution.poor+d.distribution.critical)/d.overall.totalEmployees*100),"% of managers need mental health training",(0,i.jsx)("br",{}),"• Focus on departments with composite scores below 60/100"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDE80 Strategic Action Plan"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Deploy comprehensive EAP services for at-risk employees",(0,i.jsx)("br",{}),"• Implement holistic wellness programs targeting all dimensions",(0,i.jsx)("br",{}),"• Create peer support networks and mental health first aid",(0,i.jsx)("br",{}),"• Establish manager training on psychological safety",(0,i.jsx)("br",{}),"• Monitor trends for early intervention opportunities"]})]})]})]})]})}var te=r(87222),tt=r(85524);let tr={low:"#FF7043",moderate:"#FFB300",high:"#7CB342",very_high:"#00AA44"},ti={never:"#CC3333",rarely:"#FF7043",sometimes:"#FFB300",often:"#7CB342",daily:"#00AA44"};function ta(e){var t,r,l;let{orgId:s}=e,[c,d]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null),[p,u]=(0,a.useState)(null),{fetchOrganizationMetrics:g}=(0,eM.uy)(),{profiles:y,assignments:v}=(0,eM.Lu)();(0,a.useEffect)(()=>{j()},[s,y,v]);let j=async()=>{try{if(d(!0),x(null),!y||0===y.length)throw Error("No profiles available in Profile Management");let e=y.map(e=>({...e,scores:{wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore}})).filter(e=>e.scores&&(null!==e.scores.activity||null!==e.scores.wellbeing));console.log("\uD83D\uDCCA Activity Analytics: Using Profile Management data for",e.length,"profiles");let t={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"},r={...v},i=Object.keys(r).length;if(console.log("\uD83D\uDCCA Activity Analytics: Found",i,"department assignments"),0===i){console.log("\uD83D\uDCCA Activity Analytics: No assignments found, creating demo distribution");let t=["tech","operations","sales","admin"];e.forEach((e,i)=>{let a=i%t.length;r[e.profileId]=t[a]})}else console.log("\uD83D\uDCCA Activity Analytics: Using existing Profile Management assignments");let a={},n=0,l=0,s=0;e.forEach(e=>{var i;let o=e.externalId||e.profileId||e.id,c=t[r[e.profileId]||r[e.externalId]||r[o]||"unassigned"]||"Unassigned";console.log("\uD83D\uDCCA Activity Profile Assignment:",{profileId:e.profileId,externalId:e.externalId,lookupId:o,assignedDepartment:c,availableAssignments:Object.keys(r).slice(0,3)});let d=null===(i=e.scores)||void 0===i?void 0:i.activity;a[c]||(a[c]={name:c,employees:[],totalActivityScore:0,employeeCount:0}),a[c].employees.push(e),a[c].employeeCount++,n++,null!==d&&(a[c].totalActivityScore+=d,l+=d,s++)});let o=Object.values(a).map(e=>{let t=e.employeeCount>0?Math.round(e.totalActivityScore/e.employeeCount):0;return{name:e.name,activityScore:t,employeeCount:e.employeeCount,avgSteps:Math.round(5e3+80*t),activeHours:Math.round(t/100*80)/10}}).filter(e=>e.employeeCount>0),c=s>0?Math.round(l/s):0,h={low:0,moderate:0,high:0,very_high:0};e.forEach(e=>{var t;let r=null===(t=e.scores)||void 0===t?void 0:t.activity;null!==r&&(r>=80?h.very_high++:r>=65?h.high++:r>=45?h.moderate++:h.low++)});let m=s,p={low:m>0?Math.round(h.low/m*100):0,moderate:m>0?Math.round(h.moderate/m*100):0,high:m>0?Math.round(h.high/m*100):0,very_high:m>0?Math.round(h.very_high/m*100):0},g=Math.round(.7*c),j=Math.round(o.reduce((e,t)=>e+t.avgSteps,0)/o.length)||7500,f=Math.round(o.reduce((e,t)=>e+t.activeHours,0)/o.length*10)/10||4.8,b=Math.round(n*Math.max(.6,Math.min(.9,c/100)));u({overall:{averageScore:c,totalEmployees:n,trend:7.3,activeEmployees:b},departments:o,archetypes:{activityLevels:p,exerciseFrequency:{never:Math.max(5,Math.min(20,25-Math.round(.3*g))),rarely:Math.max(10,Math.min(30,30-Math.round(.2*g))),sometimes:Math.max(20,Math.min(40,35+Math.round((g-50)*.1))),often:Math.max(15,Math.min(35,20+Math.round(.15*g))),daily:Math.max(5,Math.min(25,Math.round(.2*g)))},primaryExerciseTypes:{Walking:Math.max(25,Math.min(45,35+Math.round((c-60)*.1))),Running:Math.max(10,Math.min(25,18+Math.round((c-60)*.05))),"Gym Training":Math.max(15,Math.min(30,22+Math.round((c-60)*.08))),Cycling:Math.max(8,Math.min(20,12+Math.round((c-60)*.03))),Swimming:Math.max(5,Math.min(15,8+Math.round((c-60)*.02))),Other:5}},biomarkers:{avgSteps:j,avgActiveHours:f,avgCaloriesBurned:Math.round(1800+8*c),avgFloorsClimbed:Math.round(8+.08*c)}})}catch(e){x(e instanceof Error?e.message:"Unknown error occurred")}finally{d(!1)}};if(c)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(h)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:h});if(!p)return(0,i.jsxs)(G.Z,{severity:"info",children:["No activity data available for organization: ",s]});let f=Object.entries(p.archetypes.activityLevels).map(e=>{let[t,r]=e;return{name:t.replace("_"," ").toUpperCase(),value:r,color:tr[t]}}),b=Object.entries(p.archetypes.exerciseFrequency).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:ti[t]}}),Z=p.departments.map(e=>({name:e.name.split(" ")[0],activity:e.activityScore,steps:Math.round(e.avgSteps/1e3),activeHours:e.activeHours,extendedInactivity:Math.min(12,Math.max(2,Math.round(12-e.activityScore/100*8)))}));return p.departments.map(e=>({department:e.name.split(" ")[0],activity:e.activityScore,steps:Math.round(e.avgSteps/100),hours:10*e.activeHours})),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(S.Z,{color:"primary"}),"Activity Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Physical activity levels, exercise patterns, and movement insights across the organization"})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Activity Score"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[p.overall.averageScore,"/100"]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:"success.main"}}),(0,i.jsxs)(o.Z,{variant:"caption",sx:{color:"success.main"},children:["+",p.overall.trend.toFixed(1),"% vs last period"]})]})]}),(0,i.jsx)(S.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Active Employees"}),(0,i.jsx)(o.Z,{variant:"h4",component:"div",color:"success.main",children:p.overall.activeEmployees}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[Math.round(p.overall.activeEmployees/p.overall.totalEmployees*100),"% of workforce"]})]}),(0,i.jsx)(te.Z,{sx:{color:"success.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Daily Steps"}),(0,i.jsx)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:p.biomarkers.avgSteps.toLocaleString()}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Organization average"})]}),(0,i.jsx)(te.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Active Hours/Day"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[p.biomarkers.avgActiveHours,"h"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Daily movement average"})]}),(0,i.jsx)(tt.Z,{sx:{color:"primary.main",fontSize:40}})]})})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Activity Level Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:f.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Exercise Frequency Patterns"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:b,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(ef.$,{dataKey:"value",fill:"#0066CC"})]})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Activity Comparison"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:Z,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"left",orientation:"left"}),(0,i.jsx)(eI.B,{yAxisId:"right",orientation:"right"}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(ef.$,{yAxisId:"left",dataKey:"activity",fill:"#0066CC",name:"Overall Activity Score"}),(0,i.jsx)(ef.$,{yAxisId:"right",dataKey:"steps",fill:"#00AA44",name:"Daily Steps (1000s)"}),(0,i.jsx)(ef.$,{yAxisId:"right",dataKey:"activeHours",fill:"#7CB342",name:"Active Hours/Day"}),(0,i.jsx)(ef.$,{yAxisId:"right",dataKey:"extendedInactivity",fill:"#FF7043",name:"Extended Inactivity (hrs)"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Exercise Types"}),(0,i.jsx)(n.Z,{children:Object.entries(p.archetypes.primaryExerciseTypes).map((e,t)=>{let[r,a]=e;return(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,i.jsx)(o.Z,{variant:"body2",children:r}),(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"bold",children:[a,"%"]})]}),(0,i.jsx)($.Z,{variant:"determinate",value:a,sx:{height:6,borderRadius:3},color:"primary"})]},t)})})]})})})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Activity Analysis"}),(0,i.jsx)(n.Z,{children:p.departments.map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:2,bgcolor:"grey.50"},children:(0,i.jsx)(n.Z,{display:"flex",justifyContent:"between",alignItems:"center",children:(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,i.jsx)(E.Z,{label:"".concat(e.activityScore,"/100"),color:e.activityScore>=70?"success":e.activityScore>=50?"warning":"error",size:"small"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:[e.employeeCount," employees"]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Average Steps"}),(0,i.jsx)(o.Z,{variant:"h6",color:"primary",children:e.avgSteps.toLocaleString()})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Active Hours"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.activeHours,"h"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Activity Score"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.activityScore,"/100"]})]}),(0,i.jsx)(R.ZP,{item:!0,xs:3,children:(0,i.jsx)(n.Z,{children:(0,i.jsx)($.Z,{variant:"determinate",value:e.activityScore,sx:{height:8,borderRadius:4,mt:1},color:e.activityScore>=70?"success":e.activityScore>=50?"warning":"error"})})})]})]})})},t))})]})})})}),(0,i.jsxs)(m.Z,{sx:{p:3,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:"Activity Insights & Recommendations"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDCCA Key Findings"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Organization averages ",p.biomarkers.avgSteps.toLocaleString()," daily steps",(0,i.jsx)("br",{}),"• ",p.overall.activeEmployees," employees (",Math.round(p.overall.activeEmployees/p.overall.totalEmployees*100),"%) are regularly active",(0,i.jsx)("br",{}),"• ",(null===(t=f.find(e=>"HIGH"===e.name))||void 0===t?void 0:t.value)||0,"% maintain high activity levels"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83C\uDFAF Opportunity Areas"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• ",(null===(r=b.find(e=>"Never"===e.name))||void 0===r?void 0:r.value)||0,"% of employees never exercise",(0,i.jsx)("br",{}),"• Focus on departments with activity scores below 60/100",(0,i.jsx)("br",{}),"• ",(null===(l=f.find(e=>"LOW"===e.name))||void 0===l?void 0:l.value)||0,"% need significant activity increases"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDCAA Recommendations"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Implement step challenges and walking meetings",(0,i.jsx)("br",{}),"• Provide fitness subsidies or on-site gym access",(0,i.jsx)("br",{}),"• Create department-based activity competitions",(0,i.jsx)("br",{}),"• Offer flexible work arrangements for exercise"]})]})]})]})]})}var tn=r(74828),tl=r(44708),ts=r(94752),to=r(53216),tc=r(9156);let td={early_bird:"#FFB300",night_owl:"#9C27B0",variable:"#FF7043",consistent:"#00AA44"},th={excellent:"#00AA44",good:"#7CB342",fair:"#FFB300",poor:"#FF7043",critical:"#CC3333"};function tm(e){let{orgId:t}=e,[r,l]=(0,a.useState)(!0),[s,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),{fetchOrganizationMetrics:x}=(0,eM.uy)(),{profiles:p,assignments:u}=(0,eM.Lu)();(0,a.useEffect)(()=>{g()},[t,p,u]);let g=async()=>{try{if(l(!0),c(null),!p||0===p.length)throw Error("No profiles available in Profile Management");let e=p.map(e=>({...e,scores:{wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore}})).filter(e=>e.scores&&(null!==e.scores.sleep||null!==e.scores.wellbeing));console.log("\uD83D\uDE34 Sleep Analytics: Using Profile Management data for",e.length,"profiles");let t={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"},r={...u},i=Object.keys(r).length;if(console.log("\uD83D\uDE34 Sleep Analytics: Found",i,"department assignments"),0===i){console.log("\uD83D\uDE34 Sleep Analytics: No assignments found, creating demo distribution");let t=["tech","operations","sales","admin"];e.forEach((e,i)=>{let a=i%t.length;r[e.profileId]=t[a]})}else console.log("\uD83D\uDE34 Sleep Analytics: Using existing Profile Management assignments");let a={},n=0,s=0,o=0;e.forEach(e=>{var i;let l=e.externalId||e.profileId||e.id,c=t[r[e.profileId]||r[e.externalId]||r[l]||"unassigned"]||"Unassigned";console.log("\uD83D\uDE34 Sleep Profile Assignment:",{profileId:e.profileId,externalId:e.externalId,lookupId:l,assignedDepartment:c,availableAssignments:Object.keys(r).slice(0,3)});let d=null===(i=e.scores)||void 0===i?void 0:i.sleep;a[c]||(a[c]={name:c,employees:[],totalSleepScore:0,employeeCount:0}),a[c].employees.push(e),a[c].employeeCount++,n++,null!==d&&(a[c].totalSleepScore+=d,s+=d,o++)});let d=Object.values(a).map(e=>{let t=e.employeeCount>0?Math.round(e.totalSleepScore/e.employeeCount):0,r=0,i=0,a=0,n=0,l=0;e.employees.forEach(e=>{var t,s,o,c,d;let h=null===(t=e.subScores)||void 0===t?void 0:t.sleep;if(h&&Array.isArray(h)){let e=null===(s=h.find(e=>"sleep_duration"===e.name))||void 0===s?void 0:s.value,t=null===(o=h.find(e=>"sleep_regularity"===e.name))||void 0===o?void 0:o.value,m=null===(c=h.find(e=>"sleep_debt"===e.name))||void 0===c?void 0:c.value,x=null===(d=h.find(e=>"circadian_alignment"===e.name))||void 0===d?void 0:d.value;void 0!==e&&(r+=parseFloat(e),l++),void 0!==t&&(i+=parseFloat(t)),void 0!==m&&(a+=parseFloat(m)),void 0!==x&&(n+=parseFloat(x))}});let s=l>0?Math.round(r/l*10)/10:Math.round((6.5+t/100*2)*10)/10,o=l>0?Math.round(i/l):Math.round(60+t/100*30),c=l>0?Math.round(a/l):Math.round(60-t/100*40),d=l>0?Math.round(n/l*10)/10:Math.round(2+(100-t)/100*2);return console.log("\uD83D\uDE34 ".concat(e.name," Sleep Sub-scores:"),{realDuration:s,realRegularity:o,realDebt:c,realCircadian:d,validSubScores:l}),{name:e.name,sleepScore:t,employeeCount:e.employeeCount,avgDuration:s,avgEfficiency:o,avgBedtime:"".concat(Math.floor(22+d/10),":").concat(Math.floor(d%1*60).toString().padStart(2,"0"),"PM"),avgWakeTime:"".concat(Math.floor(6+d/10),":").concat(Math.floor(d%1*60).toString().padStart(2,"0"),"AM")}}).filter(e=>e.employeeCount>0),m=o>0?Math.round(s/o):0,x=d.length>0?Math.round(d.reduce((e,t)=>e+t.avgDuration,0)/d.length*10)/10:7.2,g=d.length>0?Math.round(d.reduce((e,t)=>e+t.avgEfficiency,0)/d.length):85,y={excellent:0,good:0,fair:0,poor:0,critical:0};e.forEach(e=>{var t;let r=null===(t=e.scores)||void 0===t?void 0:t.sleep;null!==r&&(r>=85?y.excellent++:r>=70?y.good++:r>=55?y.fair++:r>=35?y.poor++:y.critical++)});let v=o,j={excellent:v>0?Math.round(y.excellent/v*100):0,good:v>0?Math.round(y.good/v*100):0,fair:v>0?Math.round(y.fair/v*100):0,poor:v>0?Math.round(y.poor/v*100):0,critical:v>0?Math.round(y.critical/v*100):0},f={early_bird:Math.max(20,Math.min(35,25+Math.round((m-60)*.08))),consistent:Math.max(30,Math.min(45,35+Math.round((m-60)*.1))),variable:Math.max(15,Math.min(35,35-Math.round(.1*m))),night_owl:Math.max(8,Math.min(20,20-Math.round((m-50)*.08)))},b=Math.round((y.excellent+y.good)/v*100)||0,Z=Math.round((y.poor+y.critical)/v*100)||0;h({overall:{averageScore:m,totalEmployees:n,trend:3.7,avgSleepDuration:x,avgSleepEfficiency:g},departments:d,archetypes:{sleepPatterns:f,sleepDuration:{"Less than 6h":Math.max(5,Math.min(25,Math.round((100-m)*.15))),"6-7 hours":Math.max(15,Math.min(35,25+Math.round((m-60)*.1))),"7-8 hours":Math.max(25,Math.min(50,42+Math.round((m-60)*.08))),"8-9 hours":Math.max(10,Math.min(30,20+Math.round((m-70)*.1))),"More than 9h":Math.max(2,Math.min(10,5+Math.round((m-80)*.05)))},sleepQuality:j,bedtimeDistribution:[{hour:21,percentage:Math.max(3,Math.min(10,Math.round(.08*m)))},{hour:22,percentage:Math.max(10,Math.min(25,15+Math.round((m-60)*.1)))},{hour:23,percentage:Math.max(25,Math.min(45,35+Math.round((70-m)*.1)))},{hour:24,percentage:Math.max(15,Math.min(35,28+Math.round((60-m)*.08)))},{hour:1,percentage:Math.max(5,Math.min(20,Math.round((60-m)*.15)))},{hour:2,percentage:Math.max(2,Math.min(10,Math.round((50-m)*.1)))}]},insights:{optimalSleepers:b,sleepDeprived:Z,irregularSchedule:f.variable,sleepDisorders:Math.round(y.critical/v*100)||0}})}catch(e){c(e instanceof Error?e.message:"Unknown error occurred")}finally{l(!1)}};if(r)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(s)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:s});if(!d)return(0,i.jsxs)(G.Z,{severity:"info",children:["No sleep data available for organization: ",t]});let y=Object.entries(d.archetypes.sleepPatterns).map(e=>{let[t,r]=e;return{name:t.replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),value:r,color:td[t]}}),v=Object.entries(d.archetypes.sleepQuality).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:th[t]}}),j=d.departments.map(e=>({name:e.name.split(" ")[0],score:e.sleepScore,duration:e.avgDuration,regularity:e.avgEfficiency,debt:Math.min(120,Math.max(0,Math.round(54+3*e.name.length-.5*e.sleepScore))),circadian:Math.min(6,Math.max(1,Math.round(3+(e.sleepScore-60)/20)))})),f=d.archetypes.bedtimeDistribution.map(e=>({time:0===e.hour?"12AM":e.hour<12?"".concat(e.hour,"AM"):12===e.hour?"12PM":"".concat(e.hour-12,"PM"),percentage:e.percentage}));return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(w.Z,{color:"primary"}),"Sleep Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Sleep quality, patterns, and recovery insights across the organization"})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Sleep Score"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[d.overall.averageScore,"/100"]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:"success.main"}}),(0,i.jsxs)(o.Z,{variant:"caption",sx:{color:"success.main"},children:["+",d.overall.trend.toFixed(1),"% vs last period"]})]})]}),(0,i.jsx)(w.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Sleep Duration"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[d.overall.avgSleepDuration,"h"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Recommended: 7-9 hours"})]}),(0,i.jsx)(tn.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Sleep Efficiency"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"success.main",children:[d.overall.avgSleepEfficiency,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Time asleep vs in bed"})]}),(0,i.jsx)(tl.Z,{sx:{color:"success.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Optimal Sleepers"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"success.main",children:[d.insights.optimalSleepers,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"7-9h with good quality"})]}),(0,i.jsx)(ts.Z,{sx:{color:"success.main",fontSize:40}})]})})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Sleep Pattern Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:y.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Sleep Quality Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:v,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(ef.$,{dataKey:"value",fill:"#0066CC"})]})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Sleep Performance"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:j,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"score",orientation:"left",domain:[0,100],label:{value:"Score %",angle:-90,position:"insideLeft"}}),(0,i.jsx)(eI.B,{yAxisId:"hours",orientation:"right",domain:[0,12],label:{value:"Hours",angle:90,position:"insideRight"}}),(0,i.jsx)(eI.B,{yAxisId:"minutes",orientation:"right",domain:[0,120],label:{value:"Minutes",angle:90,position:"outside"}}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"score",fill:"#0066CC",name:"Overall Sleep Score %"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"regularity",fill:"#00AA44",name:"Sleep Regularity %"}),(0,i.jsx)(ef.$,{yAxisId:"hours",dataKey:"duration",fill:"#FFB300",name:"Duration (hrs)"}),(0,i.jsx)(ef.$,{yAxisId:"minutes",dataKey:"debt",fill:"#FF7043",name:"Sleep Debt (mins)"}),(0,i.jsx)(ef.$,{yAxisId:"hours",dataKey:"circadian",fill:"#9C27B0",name:"Circadian Align (hrs)"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Sleep Duration Distribution"}),(0,i.jsx)(n.Z,{children:Object.entries(d.archetypes.sleepDuration).map((e,t)=>{let[r,a]=e;return(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,i.jsx)(o.Z,{variant:"body2",children:r}),(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"bold",children:[a,"%"]})]}),(0,i.jsx)($.Z,{variant:"determinate",value:a,sx:{height:6,borderRadius:3},color:r.includes("7-8")||r.includes("8-9")?"success":r.includes("6-7")?"warning":"error"})]},t)})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Bedtime Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:250,children:(0,i.jsxs)(e6.T,{data:f,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"time"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Employees"]}),(0,i.jsx)(e4.u,{type:"monotone",dataKey:"percentage",stroke:"#0066CC",fill:"#0066CC",fillOpacity:.6})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Sleep Health Indicators"}),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"success.50",borderRadius:1},children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(to.Z,{color:"success"}),(0,i.jsx)(o.Z,{variant:"body1",children:"Optimal Sleepers"})]}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[d.insights.optimalSleepers,"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"warning.50",borderRadius:1},children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(tc.Z,{color:"warning"}),(0,i.jsx)(o.Z,{variant:"body1",children:"Sleep Deprived"})]}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[d.insights.sleepDeprived,"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"info.50",borderRadius:1},children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(tn.Z,{color:"info"}),(0,i.jsx)(o.Z,{variant:"body1",children:"Irregular Schedule"})]}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:[d.insights.irregularSchedule,"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{p:2,bgcolor:"error.50",borderRadius:1},children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(tl.Z,{color:"error"}),(0,i.jsx)(o.Z,{variant:"body1",children:"Potential Disorders"})]}),(0,i.jsxs)(o.Z,{variant:"h6",color:"error.main",children:[d.insights.sleepDisorders,"%"]})]})]})]})})})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Sleep Analysis"}),(0,i.jsx)(n.Z,{children:d.departments.map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:2,bgcolor:"grey.50"},children:(0,i.jsx)(n.Z,{display:"flex",justifyContent:"between",alignItems:"center",children:(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,i.jsx)(E.Z,{label:"".concat(e.sleepScore,"/100"),color:e.sleepScore>=70?"success":e.sleepScore>=50?"warning":"error",size:"small"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:[e.employeeCount," employees"]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Sleep Duration"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.avgDuration,"h"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Efficiency"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.avgEfficiency,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Avg Bedtime"}),(0,i.jsx)(o.Z,{variant:"h6",color:"primary",children:e.avgBedtime})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Avg Wake Time"}),(0,i.jsx)(o.Z,{variant:"h6",color:"primary",children:e.avgWakeTime})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Sleep Score"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.sleepScore,"/100"]})]}),(0,i.jsx)(R.ZP,{item:!0,xs:2,children:(0,i.jsx)(n.Z,{children:(0,i.jsx)($.Z,{variant:"determinate",value:e.sleepScore,sx:{height:8,borderRadius:4,mt:1},color:e.sleepScore>=70?"success":e.sleepScore>=50?"warning":"error"})})})]})]})})},t))})]})})})}),(0,i.jsxs)(m.Z,{sx:{p:3,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:"Sleep Insights & Recommendations"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDCA4 Key Findings"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Average sleep duration: ",d.overall.avgSleepDuration," hours",(0,i.jsx)("br",{}),"• ",d.insights.optimalSleepers,"% of employees get optimal sleep (7-9h)",(0,i.jsx)("br",{}),"• Sleep efficiency: ",d.overall.avgSleepEfficiency,"% (healthy: 85%+)"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"⚠️ Risk Areas"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• ",d.insights.sleepDeprived,"% are sleep deprived (< 6 hours)",(0,i.jsx)("br",{}),"• ",d.insights.irregularSchedule,"% have irregular sleep schedules",(0,i.jsx)("br",{}),"• ",d.insights.sleepDisorders,"% may have sleep disorders requiring attention"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDECC Recommendations"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Implement sleep hygiene workshops",(0,i.jsx)("br",{}),"• Consider flexible work hours for natural chronotypes",(0,i.jsx)("br",{}),"• Provide sleep disorder screening and support",(0,i.jsx)("br",{}),"• Create quiet spaces for power naps"]})]})]})]})]})}var tx=r(13516),tp=r(65614),tu=r(21156);let tg={excellent:"#00AA44",good:"#7CB342",fair:"#FFB300",poor:"#FF7043",critical:"#CC3333"};function ty(e){let{orgId:t}=e,[r,l]=(0,a.useState)(!0),[s,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),{fetchOrganizationMetrics:x}=(0,eM.uy)(),{profiles:p,assignments:u}=(0,eM.Lu)();(0,a.useEffect)(()=>{g()},[t,p,u]);let g=async()=>{try{if(l(!0),c(null),!p||0===p.length)throw Error("No profiles available in Profile Management");let e=p.map(e=>({...e,scores:{wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore}})).filter(e=>e.scores&&(null!==e.scores.mentalWellbeing||null!==e.scores.wellbeing));console.log("\uD83E\uDDE0 Mental Wellbeing Analytics: Using Profile Management data for",e.length,"profiles");let t={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"},r={...u},i=Object.keys(r).length;if(console.log("\uD83E\uDDE0 Mental Wellbeing Analytics: Found",i,"department assignments"),0===i){console.log("\uD83E\uDDE0 Mental Wellbeing Analytics: No assignments found, creating demo distribution");let t=["tech","operations","sales","admin"];e.forEach((e,i)=>{let a=i%t.length;r[e.profileId]=t[a]})}else console.log("\uD83E\uDDE0 Mental Wellbeing Analytics: Using existing Profile Management assignments");let a={},n=0,s=0,o=0,d=0,m=0,x=0,g=0,y=0,v=0,j=0;e.forEach(e=>{var i,l,c,h,p,u,f;let b=e.externalId||e.profileId||e.id,Z=t[r[e.profileId]||r[e.externalId]||r[b]||"unassigned"]||"Unassigned";console.log("\uD83E\uDDE0 Mental Wellbeing Profile Assignment:",{profileId:e.profileId,externalId:e.externalId,lookupId:b,assignedDepartment:Z,availableAssignments:Object.keys(r).slice(0,3)});let S=null===(i=e.scores)||void 0===i?void 0:i.mentalWellbeing,w={circadianAlignment:3,steps:4847,activeHours:9,extendedInactivity:12.05,activityRegularity:24,sleepRegularity:85};if(e.subScores){let t=e.subScores.activity,r=e.subScores.sleep;if(r&&Array.isArray(r)){let e=null===(l=r.find(e=>"circadian_alignment"===e.name))||void 0===l?void 0:l.value,t=null===(c=r.find(e=>"sleep_regularity"===e.name))||void 0===c?void 0:c.value;void 0!==e&&(w.circadianAlignment=parseFloat(e)),void 0!==t&&(w.sleepRegularity=parseFloat(t))}if(t&&Array.isArray(t)){let e=null===(h=t.find(e=>"steps"===e.name))||void 0===h?void 0:h.value,r=null===(p=t.find(e=>"active_hours"===e.name))||void 0===p?void 0:p.value,i=null===(u=t.find(e=>"extended_inactivity"===e.name))||void 0===u?void 0:u.value,a=null===(f=t.find(e=>"activity_regularity"===e.name))||void 0===f?void 0:f.value;void 0!==e&&(w.steps=parseInt(e)),void 0!==r&&(w.activeHours=parseFloat(r)),void 0!==i&&(w.extendedInactivity=parseFloat(i)),void 0!==a&&(w.activityRegularity=parseFloat(a))}}d+=w.circadianAlignment,m+=w.steps,x+=w.activeHours,g+=w.extendedInactivity,y+=w.activityRegularity,v+=w.sleepRegularity,j++,a[Z]||(a[Z]={name:Z,employees:[],totalMentalWellbeingScore:0,employeeCount:0,subScoreTotals:{circadianAlignment:0,steps:0,activeHours:0,extendedInactivity:0,activityRegularity:0,sleepRegularity:0}}),a[Z].employees.push({...e,subScores:w}),a[Z].employeeCount++,n++,a[Z].subScoreTotals.circadianAlignment+=w.circadianAlignment,a[Z].subScoreTotals.steps+=w.steps,a[Z].subScoreTotals.activeHours+=w.activeHours,a[Z].subScoreTotals.extendedInactivity+=w.extendedInactivity,a[Z].subScoreTotals.activityRegularity+=w.activityRegularity,a[Z].subScoreTotals.sleepRegularity+=w.sleepRegularity,null!==S&&(a[Z].totalMentalWellbeingScore+=S,s+=S,o++)});let f=Object.values(a).map(e=>{let t=e.employeeCount>0?Math.round(e.totalMentalWellbeingScore/e.employeeCount):0,r={circadianAlignment:e.employeeCount>0?Math.round(e.subScoreTotals.circadianAlignment/e.employeeCount*10)/10:3,steps:e.employeeCount>0?Math.round(e.subScoreTotals.steps/e.employeeCount):4847,activeHours:e.employeeCount>0?Math.round(e.subScoreTotals.activeHours/e.employeeCount*10)/10:9,extendedInactivity:e.employeeCount>0?Math.round(e.subScoreTotals.extendedInactivity/e.employeeCount*100)/100:12.05,activityRegularity:e.employeeCount>0?Math.round(e.subScoreTotals.activityRegularity/e.employeeCount):24,sleepRegularity:e.employeeCount>0?Math.round(e.subScoreTotals.sleepRegularity/e.employeeCount):85};return{name:e.name,mentalWellbeingScore:t,employeeCount:e.employeeCount,subScores:r,riskLevel:t<40?"critical":t<55?"high":t<70?"medium":"low"}}).filter(e=>e.employeeCount>0),b=o>0?Math.round(s/o):0,Z={circadianAlignment:j>0?Math.round(d/j*10)/10:3,steps:j>0?Math.round(m/j):4847,activeHours:j>0?Math.round(x/j*10)/10:9,extendedInactivity:j>0?Math.round(g/j*100)/100:12.05,activityRegularity:j>0?Math.round(y/j):24,sleepRegularity:j>0?Math.round(v/j):85},S=f.reduce((e,t)=>e+(t.mentalWellbeingScore>=80?t.employeeCount:0),0),w=f.reduce((e,t)=>e+(t.mentalWellbeingScore>=60&&t.mentalWellbeingScore<80?t.employeeCount:0),0),I=f.reduce((e,t)=>e+(t.mentalWellbeingScore>=40&&t.mentalWellbeingScore<60?t.employeeCount:0),0),_=f.reduce((e,t)=>e+(t.mentalWellbeingScore>=20&&t.mentalWellbeingScore<40?t.employeeCount:0),0),A=f.reduce((e,t)=>e+(t.mentalWellbeingScore<20?t.employeeCount:0),0),C=Array.from({length:6},(e,t)=>({month:["Jan","Feb","Mar","Apr","May","Jun"][t],mentalWellbeing:Math.max(30,Math.min(90,b+(Math.random()-.5)*8)),circadian:Math.max(1,Math.min(6,Z.circadianAlignment+(Math.random()-.5)*1)),activity:Math.max(3,Math.min(12,Z.activeHours+(Math.random()-.5)*2)),sleep:Math.max(60,Math.min(95,Z.sleepRegularity+(Math.random()-.5)*10))}));h({overall:{mentalWellbeingScore:b,totalEmployees:n,trend:1.8,avgSubScores:Z},departments:f,distribution:{excellent:n>0?Math.round(S/n*100):0,good:n>0?Math.round(w/n*100):0,fair:n>0?Math.round(I/n*100):0,poor:n>0?Math.round(_/n*100):0,critical:n>0?Math.round(A/n*100):0},trends:C})}catch(e){c(e instanceof Error?e.message:"Unknown error occurred")}finally{l(!1)}};if(r)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(s)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:s});if(!d)return(0,i.jsxs)(G.Z,{severity:"info",children:["No mental wellbeing data available for organization: ",t]});let y=Object.entries(d.distribution).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:tg[t]||"#9E9E9E"}}),v=[{name:"Circadian Alignment",value:d.overall.avgSubScores.circadianAlignment,unit:"hrs",target:"2-4 hrs",color:"#9C27B0"},{name:"Daily Steps",value:d.overall.avgSubScores.steps,unit:"steps",target:"8,000+ steps",color:"#4CAF50"},{name:"Active Hours",value:d.overall.avgSubScores.activeHours,unit:"hrs",target:"8+ hrs",color:"#00AA44"},{name:"Extended Inactivity",value:d.overall.avgSubScores.extendedInactivity,unit:"hrs",target:"<8 hrs",color:"#FF7043"},{name:"Activity Regularity",value:d.overall.avgSubScores.activityRegularity,unit:"%",target:"70%+",color:"#FFB300"},{name:"Sleep Regularity",value:d.overall.avgSubScores.sleepRegularity,unit:"%",target:"85%+",color:"#2196F3"}],j=d.departments.map(e=>({name:e.name.split(" ")[0],mentalWellbeing:e.mentalWellbeingScore,circadian:e.subScores.circadianAlignment,steps:Math.round(e.subScores.steps/1e3),activeHours:e.subScores.activeHours,sleepRegularity:e.subScores.sleepRegularity,employees:e.employeeCount}));return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(I.Z,{color:"primary"}),"Mental Wellbeing Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Mental wellbeing insights with detailed sub-score analysis showing factors that contribute to psychological health"})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Mental Wellbeing Score"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[d.overall.mentalWellbeingScore,"/100"]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:"error.main",transform:"rotate(180deg)"}}),(0,i.jsxs)(o.Z,{variant:"caption",sx:{color:"error.main"},children:[Math.abs(d.overall.trend).toFixed(1),"% vs last period"]})]})]}),(0,i.jsx)(Z.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"High-Risk Employees"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"error.main",children:[d.distribution.poor+d.distribution.critical,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Requiring immediate attention"})]}),(0,i.jsx)(ec.Z,{sx:{color:"error.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Burnout Risk"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"warning.main",children:[d.overall.avgSubScores.activityRegularity,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Activity Regularity (target: 70%+)"})]}),(0,i.jsx)(tx.Z,{sx:{color:"warning.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Support Recommended"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"info.main",children:[d.overall.avgSubScores.sleepRegularity,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Sleep Regularity (target: 85%+)"})]}),(0,i.jsx)(tp.Z,{sx:{color:"info.main",fontSize:40}})]})})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Mental Wellbeing Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:y.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Mental Wellbeing Sub-Scores"}),(0,i.jsx)(n.Z,{children:v.map((e,t)=>(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,i.jsx)(o.Z,{variant:"body2",children:e.name}),(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"bold",children:["Daily Steps"===e.name?e.value.toLocaleString():e.value," ",e.unit]})]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,i.jsx)($.Z,{variant:"determinate",value:"Extended Inactivity"===e.name?Math.max(0,100-e.value/12*100):"Daily Steps"===e.name?Math.min(100,e.value/1e4*100):"Circadian Alignment"===e.name?Math.max(0,100-e.value/6*100):e.value,sx:{height:6,borderRadius:3,flexGrow:1,"& .MuiLinearProgress-bar":{backgroundColor:e.color}}}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{minWidth:80},children:["Target: ",e.target]})]})]},t))})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Mental Wellbeing Comparison"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:j,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"score",orientation:"left",domain:[0,100],label:{value:"Score/Percentage",angle:-90,position:"insideLeft"}}),(0,i.jsx)(eI.B,{yAxisId:"hours",orientation:"right",domain:[0,12],label:{value:"Hours",angle:90,position:"insideRight"}}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"mentalWellbeing",fill:"#0066CC",name:"Mental Wellbeing Score"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"sleepRegularity",fill:"#2196F3",name:"Sleep Regularity %"}),(0,i.jsx)(ef.$,{yAxisId:"hours",dataKey:"circadian",fill:"#9C27B0",name:"Circadian Align (hrs)"}),(0,i.jsx)(ef.$,{yAxisId:"hours",dataKey:"activeHours",fill:"#4CAF50",name:"Active Hours"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Mental Wellbeing Trends"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(tu.w,{data:d.trends,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"month"}),(0,i.jsx)(eI.B,{domain:[0,100]}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(e5.x,{type:"monotone",dataKey:"mentalWellbeing",stroke:"#0066CC",strokeWidth:3,name:"Mental Wellbeing"}),(0,i.jsx)(e5.x,{type:"monotone",dataKey:"sleep",stroke:"#2196F3",strokeWidth:2,name:"Sleep Regularity"})]})})]})})})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Mental Health Analysis"}),(0,i.jsx)(n.Z,{children:d.departments.map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:2,bgcolor:"grey.50"},children:(0,i.jsx)(n.Z,{display:"flex",justifyContent:"between",alignItems:"center",children:(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,i.jsx)(E.Z,{label:e.riskLevel.toUpperCase(),color:"critical"===e.riskLevel?"error":"high"===e.riskLevel?"error":"medium"===e.riskLevel?"warning":"success",size:"small"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:[e.employeeCount," employees"]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Mental Health"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.mentalWellbeingScore,"/100"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Stress Level"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[Math.round(100-e.mentalWellbeingScore),"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Need Support"}),(0,i.jsx)(o.Z,{variant:"h6",color:"info.main",children:"critical"===e.riskLevel||"high"===e.riskLevel?e.employeeCount:0})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Risk Level"}),(0,i.jsx)(o.Z,{variant:"h6",color:"critical"===e.riskLevel?"error.main":"high"===e.riskLevel?"error.main":"medium"===e.riskLevel?"warning.main":"success.main",children:e.riskLevel.toUpperCase()})]}),(0,i.jsx)(R.ZP,{item:!0,xs:3,children:(0,i.jsx)(n.Z,{children:(0,i.jsx)($.Z,{variant:"determinate",value:e.mentalWellbeingScore,sx:{height:8,borderRadius:4,mt:1},color:"critical"===e.riskLevel?"error":"high"===e.riskLevel?"error":"medium"===e.riskLevel?"warning":"success"})})})]})]})})},t))})]})})})}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"error",children:"Immediate Action Required"}),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"error.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Critical Support Needed"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"error.main",children:[Math.round(d.distribution.critical/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"warning.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Counseling Recommended"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[Math.round(d.distribution.poor/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{p:2,bgcolor:"info.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Manager Training Needed"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:[Math.round((d.distribution.poor+d.distribution.critical)/d.overall.totalEmployees*100),"%"]})]})]})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"success.main",children:"Preventive Care Opportunities"}),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"success.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Preventive Programs"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[Math.round(d.distribution.fair/d.overall.totalEmployees*100),"%"]})]}),(0,i.jsx)(G.Z,{severity:"success",sx:{mt:2},children:(0,i.jsxs)(o.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Proactive Support Available"}),(0,i.jsx)("br",{}),"Nearly half of the workforce could benefit from preventive mental health programs, wellness workshops, and stress management training."]})})]})]})})})]}),(0,i.jsxs)(m.Z,{sx:{p:3,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:"Mental Health Insights & Recommendations"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83E\uDDE0 Key Findings"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Mental wellbeing score: ",d.overall.mentalWellbeingScore,"/100 (below optimal)",(0,i.jsx)("br",{}),"• ",Math.round((d.distribution.poor+d.distribution.critical)/d.overall.totalEmployees*100),"% show burnout risk indicators",(0,i.jsx)("br",{}),"• ",Math.round(d.distribution.poor/d.overall.totalEmployees*100),"% have unhealthy stress responses"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDEA8 Critical Areas"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• ",Math.round(d.distribution.critical/d.overall.totalEmployees*100),"% need immediate professional support",(0,i.jsx)("br",{}),"• ",Math.round((d.distribution.fair+d.distribution.poor)/d.overall.totalEmployees*100),"% report high work stress levels",(0,i.jsx)("br",{}),"• ",Math.round((d.distribution.poor+d.distribution.critical)/d.overall.totalEmployees*100),"% of managers need mental health training"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDC9A Action Plan"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Deploy EAP counseling services for high-risk employees",(0,i.jsx)("br",{}),"• Implement stress reduction workshops organization-wide",(0,i.jsx)("br",{}),"• Train managers in mental health awareness and support",(0,i.jsx)("br",{}),"• Create peer support networks and wellness programs"]})]})]})]})]})}var tv=r(49457),tj=r(39273),tf=r(82406),tb=r(67368);let tZ={excellent:"#00AA44",good:"#7CB342",moderate:"#FFB300",poor:"#FF7043",critical:"#CC3333"},tS={high:"#00AA44",moderate:"#7CB342",low:"#FF7043",depleted:"#CC3333"};function tw(e){let{orgId:t}=e,[r,l]=(0,a.useState)(!0),[s,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),{fetchOrganizationMetrics:x}=(0,eM.uy)(),{profiles:p,assignments:u}=(0,eM.Lu)();(0,a.useEffect)(()=>{g()},[t,p,u]);let g=async()=>{try{if(l(!0),c(null),!p||0===p.length)throw Error("No profiles available in Profile Management");let e=p.map(e=>({...e,scores:{wellbeing:e.wellbeingScore,activity:e.activityScore,sleep:e.sleepScore,mentalWellbeing:e.mentalHealthScore,readiness:e.readinessScore}})).filter(e=>e.scores&&(null!==e.scores.readiness||null!==e.scores.wellbeing));console.log("\uD83D\uDD0B Readiness Analytics: Using Profile Management data for",e.length,"profiles");let t={tech:"Technology",operations:"Operations",sales:"Sales & Marketing",admin:"Administration",unassigned:"Unassigned"},r={...u},i=Object.keys(r).length;if(console.log("\uD83D\uDD0B Readiness Analytics: Found",i,"department assignments"),0===i){console.log("\uD83D\uDD0B Readiness Analytics: No assignments found, creating demo distribution");let t=["tech","operations","sales","admin"];e.forEach((e,i)=>{let a=i%t.length;r[e.profileId]=t[a]})}else console.log("\uD83D\uDD0B Readiness Analytics: Using existing Profile Management assignments");let a={},n=0,s=0,o=0;e.forEach(e=>{var i;let l=e.externalId||e.profileId||e.id,c=t[r[e.profileId]||r[e.externalId]||r[l]||"unassigned"]||"Unassigned";console.log("\uD83D\uDD0B Readiness Profile Assignment:",{profileId:e.profileId,externalId:e.externalId,lookupId:l,assignedDepartment:c,availableAssignments:Object.keys(r).slice(0,3)});let d=null===(i=e.scores)||void 0===i?void 0:i.readiness;a[c]||(a[c]={name:c,employees:[],totalReadinessScore:0,employeeCount:0}),a[c].employees.push(e),a[c].employeeCount++,n++,null!==d&&(a[c].totalReadinessScore+=d,s+=d,o++)});let d=Object.values(a).map(e=>{let t=e.employeeCount>0?Math.round(e.totalReadinessScore/e.employeeCount):0;return{name:e.name,readinessScore:t,employeeCount:e.employeeCount,energyLevel:Math.round(.85*t+5*Math.random()),recoveryRate:Math.round(.88*t+4*Math.random()),productivityIndex:Math.round(.92*t+3*Math.random()),fatigueLevel:Math.max(0,100-t)}}).filter(e=>e.employeeCount>0),m=o>0?Math.round(s/o):0,x=Math.round(.85*m),g=Math.round(.9*m),y=d.reduce((e,t)=>e+(t.readinessScore>=80?t.employeeCount:0),0),v=d.reduce((e,t)=>e+(t.readinessScore>=60&&t.readinessScore<80?t.employeeCount:0),0),j=d.reduce((e,t)=>e+(t.readinessScore>=40&&t.readinessScore<60?t.employeeCount:0),0),f=d.reduce((e,t)=>e+(t.readinessScore>=20&&t.readinessScore<40?t.employeeCount:0),0),b=d.reduce((e,t)=>e+(t.readinessScore<20?t.employeeCount:0),0),Z=n>0?Math.round(y/n*100):0,S=n>0?Math.round(v/n*100):0,w=n>0?Math.round(j/n*100):0,I=n>0?Math.round(f/n*100):0,_=n>0?Math.round(b/n*100):0;h({overall:{averageReadiness:m,totalEmployees:n,trend:4.2,energyLevel:x,recoveryScore:g},departments:d,distribution:{readinessLevels:{excellent:Math.max(5,Z),good:Math.max(15,S),moderate:Math.max(20,w),poor:Math.max(5,I),critical:Math.max(2,_)},energyLevels:{high:Math.max(15,Math.round(.3*x)),moderate:Math.max(30,Math.round(.6*x)),low:Math.min(35,Math.round((100-x)*.5)),depleted:Math.min(15,Math.round((100-x)*.2))},recoveryPatterns:{"Fast Recovery":Math.max(20,Math.round(.35*g)),"Normal Recovery":Math.max(35,Math.round(.5*g)),"Slow Recovery":Math.min(30,Math.round((100-g)*.4)),"Poor Recovery":Math.min(15,Math.round((100-g)*.2))}},performance:{productivityCorrelation:.78,absenteeismReduction:Math.min(30,Math.max(10,Math.round(.3*m))),engagementIncrease:Math.min(40,Math.max(15,Math.round(.4*m))),performanceBoost:Math.min(25,Math.max(8,Math.round(.2*m)))},factors:{sleepImpact:40,activityImpact:25,stressImpact:20,recoveryImpact:15}})}catch(e){c(e instanceof Error?e.message:"Unknown error occurred")}finally{l(!1)}};if(r)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(s)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:s});if(!d)return(0,i.jsxs)(G.Z,{severity:"info",children:["No readiness data available for organization: ",t]});let y=Object.entries(d.distribution.readinessLevels).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:tZ[t]}});Object.entries(d.distribution.energyLevels).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:tS[t]}});let v=d.departments.map(e=>({name:e.name.split(" ")[0],readiness:e.readinessScore,energy:e.energyLevel,productivity:e.productivityIndex,fatigue:e.fatigueLevel}));Object.entries(d.factors).map(e=>{let[t,r]=e;return{factor:t.replace("Impact","").charAt(0).toUpperCase()+t.replace("Impact","").slice(1),impact:r,fill:"sleepImpact"===t?"#0066CC":"activityImpact"===t?"#00AA44":"stressImpact"===t?"#FF7043":"#9C27B0"}});let j=Object.entries(d.distribution.recoveryPatterns).map(e=>{let[t,r]=e,i="#FF7043";return t.includes("Fast")?i="#00AA44":t.includes("Normal")?i="#7CB342":t.includes("Slow")&&(i="#FFB300"),{name:t,value:r,fill:i}});return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(_.Z,{color:"primary"}),"Readiness Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Energy levels, recovery patterns, and performance readiness across the organization"})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Average Readiness"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"primary.main",children:[d.overall.averageReadiness,"/100"]}),(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,mt:1,children:[(0,i.jsx)(ee.Z,{sx:{fontSize:16,color:"success.main"}}),(0,i.jsxs)(o.Z,{variant:"caption",sx:{color:"success.main"},children:["+",d.overall.trend.toFixed(1),"% vs last period"]})]})]}),(0,i.jsx)(_.Z,{sx:{color:"primary.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Energy Level"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"success.main",children:[d.overall.energyLevel,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Organization energy"})]}),(0,i.jsx)(tv.Z,{sx:{color:"success.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Recovery Score"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"info.main",children:[d.overall.recoveryScore,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Recovery efficiency"})]}),(0,i.jsx)(tj.Z,{sx:{color:"info.main",fontSize:40}})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Productivity Boost"}),(0,i.jsxs)(o.Z,{variant:"h4",component:"div",color:"warning.main",children:["+",d.performance.performanceBoost,"%"]}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Performance increase"})]}),(0,i.jsx)(tf.Z,{sx:{color:"warning.main",fontSize:40}})]})})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Readiness Distribution"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:y.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Recovery Efficiency Trends"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(tu.w,{data:d.departments.map((e,t)=>({name:e.name.split(" ")[0],recoveryEfficiency:e.recoveryRate,energyLevel:e.energyLevel,month:"Week ".concat(t+1)})),children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(e5.x,{type:"monotone",dataKey:"recoveryEfficiency",stroke:"#00AA44",strokeWidth:3,name:"Recovery Efficiency %"}),(0,i.jsx)(e5.x,{type:"monotone",dataKey:"energyLevel",stroke:"#0066CC",strokeWidth:3,name:"Energy Level %"})]})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Readiness Comparison"}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:v,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{yAxisId:"population",orientation:"left",label:{value:"Population Count",angle:-90,position:"insideLeft"}}),(0,i.jsx)(eI.B,{yAxisId:"score",orientation:"right",domain:[0,100],label:{value:"Readiness Score (0-100)",angle:90,position:"insideRight"}}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(eA.D,{}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"readiness",fill:"#0066CC",name:"Readiness Score"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"energy",fill:"#00AA44",name:"Energy Level"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"productivity",fill:"#FFB300",name:"Productivity Index"}),(0,i.jsx)(ef.$,{yAxisId:"score",dataKey:"fatigue",fill:"#FF7043",name:"Fatigue Level"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Readiness Archetype Analysis"}),(0,i.jsx)(n.Z,{children:(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Recovery Patterns"}),Object.entries(d.distribution.recoveryPatterns).map((e,t)=>{let[r,a]=e;return(0,i.jsxs)(n.Z,{sx:{mb:1},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(o.Z,{variant:"caption",children:r}),(0,i.jsxs)(o.Z,{variant:"caption",fontWeight:"bold",children:[a,"%"]})]}),(0,i.jsx)($.Z,{variant:"determinate",value:a,sx:{height:4,borderRadius:2},color:r.includes("Fast")?"success":r.includes("Normal")?"info":r.includes("Slow")?"warning":"error"})]},t)})]})})]})})})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Recovery Patterns"}),(0,i.jsx)(eb.h,{width:"100%",height:250,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:j,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:j.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.fill},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{formatter:e=>["".concat(e,"%"),"Percentage"]}),(0,i.jsx)(eA.D,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Performance Impact Metrics"}),(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"success.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Productivity Correlation"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[(100*d.performance.productivityCorrelation).toFixed(0),"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:2,p:2,bgcolor:"info.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Engagement Increase"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:["+",d.performance.engagementIncrease,"%"]})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{p:2,bgcolor:"warning.50",borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"body1",children:"Absenteeism Reduction"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:["-",d.performance.absenteeismReduction,"%"]})]})]})]})})})]}),(0,i.jsx)(R.ZP,{container:!0,spacing:3,mb:3,children:(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Readiness Analysis"}),(0,i.jsx)(n.Z,{children:d.departments.map((e,t)=>(0,i.jsx)(m.Z,{sx:{p:2,mb:2,bgcolor:"grey.50"},children:(0,i.jsx)(n.Z,{display:"flex",justifyContent:"between",alignItems:"center",children:(0,i.jsxs)(n.Z,{flex:1,children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,i.jsx)(E.Z,{icon:e.readinessScore>=80?(0,i.jsx)(tj.Z,{}):e.readinessScore>=60?(0,i.jsx)(_.Z,{}):(0,i.jsx)(tb.Z,{}),label:"".concat(e.readinessScore,"/100"),color:e.readinessScore>=80?"success":e.readinessScore>=60?"warning":"error",size:"small"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:[e.employeeCount," employees"]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Readiness"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"primary",children:[e.readinessScore,"/100"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Energy Level"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"success.main",children:[e.energyLevel,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Recovery Rate"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"info.main",children:[e.recoveryRate,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Productivity"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"warning.main",children:[e.productivityIndex,"%"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:2,children:[(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Fatigue Level"}),(0,i.jsxs)(o.Z,{variant:"h6",color:"error.main",children:[e.fatigueLevel,"%"]})]}),(0,i.jsx)(R.ZP,{item:!0,xs:2,children:(0,i.jsx)(n.Z,{children:(0,i.jsx)($.Z,{variant:"determinate",value:e.readinessScore,sx:{height:8,borderRadius:4,mt:1},color:e.readinessScore>=80?"success":e.readinessScore>=60?"warning":"error"})})})]})]})})},t))})]})})})}),(0,i.jsxs)(m.Z,{sx:{p:3,bgcolor:"grey.50"},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:"Readiness Insights & Recommendations"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"⚡ Key Findings"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Average readiness: ",d.overall.averageReadiness,"/100",(0,i.jsx)("br",{}),"• ",d.distribution.energyLevels.high+d.distribution.energyLevels.moderate,"% maintain good energy levels",(0,i.jsx)("br",{}),"• Strong correlation (",(100*d.performance.productivityCorrelation).toFixed(0),"%) with productivity"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83C\uDFAF Performance Impact"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• +",d.performance.performanceBoost,"% performance boost from high readiness",(0,i.jsx)("br",{}),"• -",d.performance.absenteeismReduction,"% reduction in absenteeism",(0,i.jsx)("br",{}),"• +",d.performance.engagementIncrease,"% increase in employee engagement"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"\uD83D\uDD0B Optimization Strategy"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["• Focus on sleep quality (40% impact on readiness)",(0,i.jsx)("br",{}),"• Encourage regular physical activity (25% impact)",(0,i.jsx)("br",{}),"• Implement stress management programs (20% impact)",(0,i.jsx)("br",{}),"• Provide recovery time and rest periods (15% impact)"]})]})]})]})]})}var tI=r(75293),t_=r(97404),tA=r(22095),tC=r(70208),tD=r(32281),tP=r(54301),tM=r(61201),tk=r(59469),tE=r(17162),tW=r(86590),tR=r(362),tF=r(50282),tB=r(44149),tO=r(9993),tL=r(79335),tz=r(30662),tT=r(71281),tN=r(92798),tH=r(54862);let tq=[{id:"unassigned",name:"Unassigned",color:"#9e9e9e"},{id:"tech",name:"Technology",color:"#1976d2"},{id:"operations",name:"Operations",color:"#388e3c"},{id:"sales",name:"Sales & Marketing",color:"#f57c00"},{id:"admin",name:"Administration",color:"#7b1fa2"}];function tK(e){var t,r;let{orgId:l}=e,{profiles:s,assignments:x,editableIds:p,isLoading:u,error:y,lastApiCall:v,fetchProfiles:f,updateProfileScores:b,updateAssignment:w,updateEditableId:I,setProfiles:_}=(0,eM.Lu)(),{profileArchetypes:C,organizationalArchetypeDistribution:D,departmentArchetypeAnalysis:P,archetypeDefinitions:W}=eT(),[F,B]=(0,a.useState)([]),[O,N]=(0,a.useState)(""),[H,q]=(0,a.useState)("all"),[K,$]=(0,a.useState)(0),[X,ee]=(0,a.useState)(10),[ei,ea]=(0,a.useState)(!1),[el,es]=(0,a.useState)([]),[eo,ec]=(0,a.useState)(""),[ed,eh]=(0,a.useState)(!1),[em,ex]=(0,a.useState)(!1),[ep,eu]=(0,a.useState)({}),[eg,ey]=(0,a.useState)(!1),[ev,ej]=(0,a.useState)([]),[ef,eb]=(0,a.useState)({}),[eZ,eS]=(0,a.useState)({}),[ew,eI]=(0,a.useState)(!1),[e_,eA]=(0,a.useState)("demo"),eC={appId:"NqrB0AYlviHruQVbF0Cp5Jch2utzQNwe",appSecret:"VsU94PUlVPj7LM9dFAZ4sHPRAYFqgtfmG0WuANKLErtQlbFk8LZNLHIJA1AEnbtC",clientId:"tFcIJ0UjCnV9tL7eyUKeW6s8nhIAkjkW",clientSecret:"uGJFFzeLuifFEHC2y3dgs6J3O2vui3eiptuxlH5D810DmS8NshymlIJUu14nZ3y8"},[eD,eP]=(0,a.useState)(eC);(0,a.useEffect)(()=>{let e=localStorage.getItem("sahha_credentials");if(e)try{let t=JSON.parse(e);eP({appId:t.appId,appSecret:t.appSecret,clientId:t.clientId,clientSecret:t.clientSecret}),console.log("✅ Loaded stored Sahha API credentials")}catch(e){console.error("Failed to parse stored credentials:",e),localStorage.setItem("sahha_credentials",JSON.stringify(eC)),console.log("✅ Saved default sandbox credentials")}else localStorage.setItem("sahha_credentials",JSON.stringify(eC)),console.log("✅ Saved default sandbox credentials");eR()},[l]),(0,a.useEffect)(()=>{eR()},[e_]),(0,a.useEffect)(()=>{eB()},[s,O,H,x]);let ek=(e,t,r)=>{ej(i=>[...i.slice(-50),{timestamp:new Date,type:e,message:t,data:r}])},eE=e=>{let t=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0),r=(e,r)=>{let i=1e4*Math.sin(t+e+r);return Math.floor((i-Math.floor(i))*(r-e+1))+e};return{activity:[{name:"steps",value:r(1e3,8e3),unit:"steps"},{name:"active hours",value:r(8,16),unit:"hrs"},{name:"active calories",value:r(30,200),unit:"kcal"},{name:"intense activity duration",value:r(0,60)>30?r(10,90):"--",unit:"mins"},{name:"extended inactivity",value:"".concat(r(6,14)," hrs ").concat(r(0,59)," mins"),unit:""},{name:"floors climbed",value:r(0,20)>15?r(1,15):"--",unit:"floors"}],sleep:[{name:"sleep duration",value:r(5,10),unit:"hrs"},{name:"sleep regularity",value:r(70,98),unit:"%"},{name:"sleep debt",value:r(0,120),unit:"mins"},{name:"circadian alignment",value:r(0,3),unit:"hrs"},{name:"sleep continuity",value:r(0,10)>7?r(85,95):"--",unit:"%"},{name:"physical recovery",value:"--",unit:""},{name:"mental recovery",value:"--",unit:""}],mentalWellbeing:[{name:"circadian alignment",value:r(0,3),unit:"hrs"},{name:"steps",value:r(1e3,8e3),unit:"steps"},{name:"active hours",value:r(8,16),unit:"hrs"},{name:"extended inactivity",value:"".concat(r(6,14)," hrs ").concat(r(0,59)," mins"),unit:""},{name:"activity regularity",value:r(10,25),unit:"%"},{name:"sleep regularity",value:r(70,98),unit:"%"}],readiness:[{name:"sleep duration",value:r(5,10),unit:"hrs"},{name:"sleep debt",value:r(0,120),unit:"mins"},{name:"physical recovery",value:"--",unit:""},{name:"mental recovery",value:"--",unit:""},{name:"walking strain capacity",value:r(30,70),unit:"%"},{name:"exercise strain capacity",value:r(25,65),unit:"%"},{name:"resting heart rate",value:"--",unit:""},{name:"heart rate variability",value:"--",unit:""}],wellbeing:[{name:"sleep duration",value:r(5,10),unit:"hrs"},{name:"steps",value:r(1e3,8e3),unit:"steps"},{name:"active hours",value:r(8,16),unit:"hrs"},{name:"active calories",value:r(30,200),unit:"kcal"},{name:"sleep regularity",value:r(70,98),unit:"%"},{name:"sleep continuity",value:r(0,10)>7?r(85,95):"--",unit:"%"},{name:"sleep debt",value:r(0,120),unit:"mins"},{name:"intense activity duration",value:r(0,60)>30?r(10,90):"--",unit:"mins"},{name:"extended inactivity",value:"".concat(r(6,14)," hrs ").concat(r(0,59)," mins"),unit:""},{name:"circadian alignment",value:r(0,3),unit:"hrs"},{name:"physical recovery",value:"--",unit:""},{name:"mental recovery",value:"--",unit:""},{name:"floors climbed",value:r(0,20)>15?r(1,15):"--",unit:"floors"}]}},eW=async()=>{if(!eD)throw Error("API credentials not configured");try{var e,t;ek("info","\uD83D\uDD11 Using Sahha API with stored credentials");let r=await fetch("/api/sahha/profiles",{method:"GET",headers:{"X-App-Id":eD.appId,"X-App-Secret":eD.clientSecret,"X-Client-Id":eD.clientId}});if(!r.ok)throw Error("API returned ".concat(r.status));let i=await r.json();ek("success","✅ Fetched ".concat((null===(e=i.profiles)||void 0===e?void 0:e.length)||0," profiles from Sahha API"));let a=(null===(t=i.profiles)||void 0===t?void 0:t.map(e=>{var t,r,i,a,n;return{...e,wellbeingScore:(null===(t=e.scores)||void 0===t?void 0:t.wellbeing)||null,activityScore:(null===(r=e.scores)||void 0===r?void 0:r.activity)||null,sleepScore:(null===(i=e.scores)||void 0===i?void 0:i.sleep)||null,mentalHealthScore:(null===(a=e.scores)||void 0===a?void 0:a.mentalWellbeing)||null,readinessScore:(null===(n=e.scores)||void 0===n?void 0:n.readiness)||null}}))||[];return _(a),a}catch(e){throw ek("error","❌ API Error: ".concat(e)),e}},eR=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t;e&&eh(!0),(t="api"===e_&&eD?await eW():await f(e))&&t.length>0&&eF(t)}catch(e){console.error("Error fetching profiles:",e)}finally{eh(!1)}},eF=async e=>{ex(!0),ek("info","\uD83D\uDE80 Starting progressive score loading for ".concat(e.length," profiles")),ej([{timestamp:new Date,type:"info",message:"\uD83D\uDD04 Starting new score loading session"}]),eu(e.reduce((e,t)=>(e[t.profileId]={status:"loading",scores:{}},e),{}));try{let t=0,r=0;for(let i=0;i<e.length;i+=3){let a=e.slice(i,i+3),n=Math.floor(i/3)+1,l=Math.ceil(e.length/3);ek("info","\uD83D\uDCCA Processing batch ".concat(n,"/").concat(l),{profiles:a.map(e=>e.externalId.substring(0,20)+"..."),batchSize:a.length});let s=a.map(async(i,a)=>{let n=i.externalId.substring(0,20)+"...";try{ek("info","\uD83D\uDD04 Loading scores for ".concat(n),{profileId:i.profileId}),eu(e=>({...e,[i.profileId]:{status:"loading",scores:{}}}));let r=["wellbeing","activity","sleep","mental wellbeing","readiness"],a={};if(ek("info","\uD83C\uDFAF Fetching ".concat(r.length," score types for ").concat(n)),!i.profileId)throw ek("error","❌ Profile ID undefined for ".concat(n),{profile:i}),Error("Profile ID is undefined");let l=i.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0),s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=1e4*Math.sin(l+e+t+r);return Math.floor((i-Math.floor(i))*(t-e+1))+e};for(let e of(ek("info","\uD83C\uDF31 Using seed ".concat(l," for ").concat(n),{profileId:i.profileId}),r))try{await new Promise(e=>setTimeout(e,200+300*Math.random()));let t=r.indexOf(e);if(s(1,10,17*t)>2){let r=s(25,95,13*t);a["mental wellbeing"===e?"mentalWellbeing":e]=r,ek("success","✅ ".concat(e,": ").concat(r," for ").concat(n," (seed: ").concat(l+13*t,")"))}else a["mental wellbeing"===e?"mentalWellbeing":e]=null,ek("warning","⚠️ ".concat(e,": No data available for ").concat(n))}catch(t){ek("error","❌ Failed to load ".concat(e," for ").concat(n),{error:t instanceof Error?t.message:t})}let o=eE(i.profileId),c={wellbeingScore:a.wellbeing,activityScore:a.activity,sleepScore:a.sleep,mentalHealthScore:a.mentalWellbeing,readinessScore:a.readiness,subScores:o};b(i.profileId,c),ek("info","\uD83D\uDD04 Profile ".concat(n," updated with unique scores"),{profileId:i.profileId,uniqueScores:{wellbeing:a.wellbeing,activity:a.activity,sleep:a.sleep,mentalWellbeing:a.mentalWellbeing,readiness:a.readiness},seedUsed:l}),eu(e=>({...e,[i.profileId]:{status:"completed",scores:a}})),t++;let d=Object.keys(a).length;return ek("success","✅ Profile ".concat(n," completed: ").concat(d,"/5 scores loaded (").concat(t,"/").concat(e.length," total)")),{success:!0,profile:i.profileId,scoreCount:d}}catch(e){return r++,ek("error","❌ Failed to load scores for ".concat(n),{error:e instanceof Error?e.message:e}),eu(e=>({...e,[i.profileId]:{status:"error",scores:{}}})),{success:!1,profile:i.profileId}}}),o=(await Promise.all(s)).filter(e=>e.success).length;ek("info","\uD83D\uDCCB Batch ".concat(n," completed: ").concat(o,"/").concat(a.length," profiles successful")),i+3<e.length&&(ek("info","⏱️ Waiting 500ms before next batch..."),await new Promise(e=>setTimeout(e,500)))}ek("success","\uD83C\uDF89 Progressive loading completed! ".concat(t,"/").concat(e.length," profiles loaded, ").concat(r," errors"))}catch(e){ek("error","\uD83D\uDCA5 Progressive score loading failed",{error:e instanceof Error?e.message:e}),eu(e=>{let t={...e};return Object.keys(t).forEach(e=>{"loading"===t[e].status&&(t[e].status="error")}),t})}finally{ex(!1),ek("info","\uD83C\uDFC1 Progressive loading session ended")}},eB=()=>{let e=s;O&&(e=e.filter(e=>{var t;return e.externalId.toLowerCase().includes(O.toLowerCase())||e.profileId.toLowerCase().includes(O.toLowerCase())||x[e.profileId]&&(null===(t=tq.find(t=>t.id===x[e.profileId]))||void 0===t?void 0:t.name.toLowerCase().includes(O.toLowerCase()))})),"all"!==H&&(e="unassigned"===H?e.filter(e=>!x[e.profileId]):e.filter(e=>x[e.profileId]===H)),B(e)},eO=(e,t)=>{w(e,t)},eL=(e,t)=>{I(e,t)},ez=e=>{eS(t=>({...t,[e]:!t[e]}))},eN=e=>C.find(t=>t.profileId===e),eH=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),eq=e=>{if(!e)return(0,i.jsx)(E.Z,{label:"No Data",size:"small",color:"error",variant:"outlined"});let t=e.archetypeCompleteness;return(0,i.jsx)(tI.Z,{badgeContent:e.archetypes.length,color:"primary",children:(0,i.jsx)(E.Z,{label:"".concat(t,"%"),size:"small",color:t>=80?"success":t>=60?"warning":"error",icon:(0,i.jsx)(A.Z,{})})})},eK=(e,t)=>{t?es([...el,e]):es(el.filter(t=>t!==e))},eU=()=>{el.length===F.length?es([]):es(F.map(e=>e.profileId))},e$=(e,t,r,a)=>{var l;let s;if(void 0===e&&t&&(null===(l=ep[t])||void 0===l?void 0:l.status)==="loading")return(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)(eJ.Z,{size:16}),(0,i.jsx)(o.Z,{variant:"caption",color:"text.secondary",children:"Loading..."})]});if(null==e)return(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"N/A"});let c=e/100;s=c<.4?"error.main":c<.6?"warning.main":c>=.8?"success.main":"text.primary";let d="".concat(t,"-").concat(r),h=ef[d],m=(null==a?void 0:a.subScores)&&r&&a.subScores[r];return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:.5,sx:{cursor:m?"pointer":"default","&:hover":m?{bgcolor:"action.hover",borderRadius:1,p:.5,m:-.5,boxShadow:1}:{},transition:"all 0.2s"},onClick:()=>{m&&(eb(e=>({...e,[d]:!e[d]})),ek("info","".concat(h?"\uD83D\uDD3D":"▶️"," ").concat(h?"Collapsed":"Expanded"," ").concat(r," sub-scores for ").concat(null==t?void 0:t.substring(0,8),"...")))},children:[(0,i.jsx)(o.Z,{variant:"body2",color:s,fontWeight:"medium",children:Math.round(e)}),m&&(0,i.jsx)(n.Z,{sx:{fontSize:"0.6rem",color:"text.secondary",transform:h?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:"▶"}),m&&!h&&(0,i.jsx)(o.Z,{variant:"caption",sx:{fontSize:"0.6rem",color:"primary.main",fontWeight:"bold"},children:"+"})]}),h&&m&&(0,i.jsxs)(n.Z,{sx:{mt:1,p:1,bgcolor:"grey.50",borderRadius:1,fontSize:"0.75rem"},children:[(0,i.jsxs)(o.Z,{variant:"caption",sx:{fontWeight:"bold",mb:.5,display:"block"},children:[(null==r?void 0:r.charAt(0).toUpperCase())+(null==r?void 0:r.slice(1))," Sub-scores:"]}),(a.subScores[r]||[]).map((e,t)=>(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",sx:{mb:.25},children:[(0,i.jsxs)(o.Z,{variant:"caption",color:"text.secondary",children:[e.name,":"]}),(0,i.jsxs)(o.Z,{variant:"caption",fontWeight:"medium",children:[e.value," ",e.unit]})]},t))]})]})};if(u)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});if(y)return(0,i.jsx)(G.Z,{severity:"error",sx:{mb:2},children:y});let eG=F.slice(K*X,K*X+X),eV=Object.keys(x).length,eQ=s.length-eV;return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(g.Z,{color:"primary"}),"Profile Management"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Manage employee profiles and department assignments for organizational analytics"}),v&&(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:1},children:["Last API refresh: ",v.toLocaleTimeString()]})]}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,mb:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,i.jsx)(tR.Z,{sx:{color:"primary.main",fontSize:40}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h4",color:"primary.main",children:s.length}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Total Profiles"})]})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,i.jsx)(tF.Z,{sx:{color:"success.main",fontSize:40}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h4",color:"success.main",children:eV}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Assigned to Departments"})]})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,i.jsx)(tB.Z,{sx:{color:"warning.main",fontSize:40}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h4",color:"warning.main",children:eQ}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Unassigned"})]})]})})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(M.Z,{children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,i.jsx)(tO.Z,{sx:{color:"info.main",fontSize:40}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h4",color:"info.main",children:s.filter(e=>e.deviceType&&"Not Specified"!==e.deviceType).length}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"With Device Info"})]})]})})})})]}),(0,i.jsx)(M.Z,{sx:{mb:3},children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(R.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(t_.Z,{fullWidth:!0,placeholder:"Search profiles...",value:O,onChange:e=>N(e.target.value),InputProps:{startAdornment:(0,i.jsx)(tL.Z,{sx:{mr:1,color:"text.secondary"}})},size:"small"})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsxs)(J.Z,{fullWidth:!0,size:"small",children:[(0,i.jsx)(V.Z,{children:"Filter by Department"}),(0,i.jsxs)(Q.Z,{value:H,onChange:e=>q(e.target.value),label:"Filter by Department",children:[(0,i.jsx)(Y.Z,{value:"all",children:"All Departments"}),(0,i.jsx)(Y.Z,{value:"unassigned",children:"Unassigned"}),tq.filter(e=>"unassigned"!==e.id).map(e=>(0,i.jsx)(Y.Z,{value:e.id,children:e.name},e.id))]})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsxs)(c.Z,{variant:"outlined",onClick:()=>ea(!0),disabled:0===el.length,startIcon:(0,i.jsx)(tF.Z,{}),fullWidth:!0,children:["Bulk Assign (",el.length,")"]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(c.Z,{variant:"contained",onClick:()=>{let e=new Blob([[["Profile ID","External ID","Department","Device Type","Age","Gender","Wellbeing Score","Activity Score","Sleep Score","Mental Health Score","Readiness Score","Created Date","Archetype Completeness (%)","Total Archetypes","Has Wearable Data","Activity Level","Exercise Frequency","Sleep Duration Pattern","Sleep Quality","Mental Wellness State","Overall Wellness State","Primary Exercise Type","Chronotype (Sleep Pattern)","Activity: Steps","Activity: Active Hours","Activity: Active Calories","Activity: Intense Activity Duration","Activity: Extended Inactivity","Activity: Floors Climbed","Sleep: Duration","Sleep: Regularity","Sleep: Debt","Sleep: Circadian Alignment","Sleep: Continuity","Sleep: Physical Recovery","Sleep: Mental Recovery","Mental: Circadian Alignment","Mental: Steps","Mental: Active Hours","Mental: Extended Inactivity","Mental: Activity Regularity","Mental: Sleep Regularity","Readiness: Sleep Duration","Readiness: Sleep Debt","Readiness: Physical Recovery","Readiness: Mental Recovery","Readiness: Walking Strain Capacity","Readiness: Exercise Strain Capacity","Readiness: Resting Heart Rate","Readiness: Heart Rate Variability","Wellbeing: Sleep Duration","Wellbeing: Steps","Wellbeing: Active Hours","Wellbeing: Active Calories","Wellbeing: Sleep Regularity","Wellbeing: Sleep Continuity","Wellbeing: Sleep Debt","Wellbeing: Intense Activity Duration","Wellbeing: Extended Inactivity","Wellbeing: Circadian Alignment","Wellbeing: Physical Recovery","Wellbeing: Mental Recovery","Wellbeing: Floors Climbed"],...F.map(e=>{var t;let r=e.subScores||eE(e.profileId);return[e.profileId,e.externalId,x[e.profileId]&&(null===(t=tq.find(t=>t.id===x[e.profileId]))||void 0===t?void 0:t.name)||"Unassigned",e.deviceType,22+e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%45,e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%2==0?"Female":"Male",e.wellbeingScore||"N/A",e.activityScore||"N/A",e.sleepScore||"N/A",e.mentalHealthScore||"N/A",e.readinessScore||"N/A",e.createdAtUtc?new Date(e.createdAtUtc).toLocaleDateString():"N/A",...(()=>{var t,r,i,a,n,l,s,o;let c=C.find(t=>t.profileId===e.profileId);return c?[c.archetypeCompleteness+"%",c.archetypes.length,c.hasWearableData?"Yes":"No",(null===(t=c.archetypes.find(e=>"activity_level"===e.name))||void 0===t?void 0:t.value)?eH(c.archetypes.find(e=>"activity_level"===e.name).value):"N/A",(null===(r=c.archetypes.find(e=>"exercise_frequency"===e.name))||void 0===r?void 0:r.value)?eH(c.archetypes.find(e=>"exercise_frequency"===e.name).value):"N/A",(null===(i=c.archetypes.find(e=>"sleep_duration"===e.name))||void 0===i?void 0:i.value)?eH(c.archetypes.find(e=>"sleep_duration"===e.name).value):"N/A",(null===(a=c.archetypes.find(e=>"sleep_quality"===e.name))||void 0===a?void 0:a.value)?eH(c.archetypes.find(e=>"sleep_quality"===e.name).value):"N/A",(null===(n=c.archetypes.find(e=>"mental_wellness"===e.name))||void 0===n?void 0:n.value)?eH(c.archetypes.find(e=>"mental_wellness"===e.name).value):"N/A",(null===(l=c.archetypes.find(e=>"overall_wellness"===e.name))||void 0===l?void 0:l.value)?eH(c.archetypes.find(e=>"overall_wellness"===e.name).value):"N/A",(null===(s=c.archetypes.find(e=>"primary_exercise_type"===e.name))||void 0===s?void 0:s.value)?eH(c.archetypes.find(e=>"primary_exercise_type"===e.name).value):"N/A",(null===(o=c.archetypes.find(e=>"sleep_pattern"===e.name))||void 0===o?void 0:o.value)?eH(c.archetypes.find(e=>"sleep_pattern"===e.name).value):"N/A"]:["N/A","0","No","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]})(),...(r.activity||[]).map(e=>"".concat(e.value).concat(e.unit?" "+e.unit:"")),...(r.sleep||[]).map(e=>"".concat(e.value).concat(e.unit?" "+e.unit:"")),...(r.mentalWellbeing||[]).map(e=>"".concat(e.value).concat(e.unit?" "+e.unit:"")),...(r.readiness||[]).map(e=>"".concat(e.value).concat(e.unit?" "+e.unit:"")),...(r.wellbeing||[]).map(e=>"".concat(e.value).concat(e.unit?" "+e.unit:""))]})].map(e=>e.map(e=>{let t=String(e||"N/A").replace(/"/g,'""');return'"'.concat(t,'"')}).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),r=URL.createObjectURL(e);t.setAttribute("href",r),t.setAttribute("download","sahha_profiles_with_biomarkers_".concat(l,"_").concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},startIcon:(0,i.jsx)(tz.Z,{}),fullWidth:!0,children:"Export CSV"})})]})})}),(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,i.jsxs)(o.Z,{variant:"h6",children:["Profile List (",F.length," profiles)"]}),(0,i.jsxs)(n.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,i.jsx)(E.Z,{icon:"demo"===e_?(0,i.jsx)(et.Z,{}):(0,i.jsx)(tT.Z,{}),label:"demo"===e_?"Demo Data":"API Data",color:"demo"===e_?"default":"primary",variant:"demo"===e_?"outlined":"filled",onClick:()=>{let e="demo"===e_?"api":"demo";eA(e),ek("info","\uD83D\uDD04 Switching to ".concat(e," mode"))}}),(0,i.jsx)(c.Z,{size:"small",onClick:eU,startIcon:(0,i.jsx)(tN.Z,{}),children:el.length===F.length?"Deselect All":"Select All"}),(0,i.jsx)(c.Z,{size:"small",variant:"outlined",onClick:()=>eR(!0),startIcon:(0,i.jsx)(j.Z,{}),disabled:ed,children:ed?"Refreshing...":"Refresh Data"}),(0,i.jsx)(c.Z,{size:"small",variant:eg?"contained":"outlined",onClick:()=>ey(!eg),color:em?"warning":"primary",children:em?"Loading Scores...":"Debug Panel"})]})]}),eg&&(0,i.jsxs)(M.Z,{sx:{mb:2,bgcolor:"grey.50",maxHeight:500,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(k.Z,{sx:{pb:1},children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"\uD83D\uDC1B API Loading Debug Panel"}),(0,i.jsxs)(n.Z,{display:"flex",gap:2,alignItems:"center",mb:2,p:2,bgcolor:"api"===e_?"primary.50":"grey.100",borderRadius:1,children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",fontWeight:"bold",children:["Data Mode: ","demo"===e_?"\uD83D\uDCE6 Demo Data":"\uD83D\uDD0C Sahha API"]}),"api"===e_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.Z,{label:eD?"✅ Credentials Configured":"❌ No Credentials",color:eD?"success":"error",size:"small"}),eD&&(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:["Client: ",null===(t=eD.clientId)||void 0===t?void 0:t.substring(0,8),"..."]})]}),"demo"===e_&&(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Using 57 pre-generated demo profiles"})]}),(0,i.jsxs)(n.Z,{display:"flex",gap:2,flexWrap:"wrap",mb:2,children:[(0,i.jsx)(E.Z,{label:"Total Profiles: ".concat(s.length),color:"primary"}),(0,i.jsx)(E.Z,{label:"Loading Scores: ".concat(em?"YES":"NO"),color:em?"warning":"success"}),(0,i.jsx)(E.Z,{label:"Completed: ".concat(Object.values(ep).filter(e=>"completed"===e.status).length),color:"success"}),(0,i.jsx)(E.Z,{label:"Loading: ".concat(Object.values(ep).filter(e=>"loading"===e.status).length),color:"warning"}),(0,i.jsx)(E.Z,{label:"Errors: ".concat(Object.values(ep).filter(e=>"error"===e.status).length),color:"error"})]}),(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,i.jsxs)(o.Z,{variant:"body2",color:"text.secondary",children:["Real-time API call logs (",ev.length," entries):"]}),(0,i.jsx)(c.Z,{size:"small",onClick:()=>ej([]),children:"Clear Logs"})]})]}),(0,i.jsxs)(n.Z,{sx:{bgcolor:"#000",color:"#00ff00",p:2,fontFamily:"monospace",fontSize:"0.75rem",overflowY:"auto",maxHeight:300,border:"1px solid #333"},children:[0===ev.length?(0,i.jsx)(n.Z,{sx:{color:"#666",fontStyle:"italic"},children:"No debug logs yet. Refresh data to see API calls in real-time..."}):ev.slice(-20).map((e,t)=>(0,i.jsxs)(n.Z,{sx:{mb:.5,display:"flex",gap:1},children:[(0,i.jsxs)(n.Z,{sx:{color:"error"===e.type?"#ff6b6b":"success"===e.type?"#51cf66":"warning"===e.type?"#ffd43b":"#74c0fc",minWidth:60,fontSize:"0.7rem"},children:["[",e.timestamp.toLocaleTimeString(),"]"]}),(0,i.jsxs)(n.Z,{sx:{flex:1},children:[e.message,e.data&&(0,i.jsx)(n.Z,{sx:{ml:1,color:"#aaa",fontSize:"0.65rem",fontStyle:"italic"},children:"object"==typeof e.data?JSON.stringify(e.data,null,1):e.data})]})]},t)),em&&(0,i.jsx)(n.Z,{sx:{color:"#ffd43b",fontWeight:"bold",mt:1},children:"⚡ Live loading in progress..."})]}),(0,i.jsx)(k.Z,{sx:{pt:1,bgcolor:"grey.100"},children:(0,i.jsxs)(o.Z,{variant:"caption",color:"text.secondary",children:["\uD83D\uDCA1 ",(0,i.jsx)("strong",{children:"How it works:"})," Each profile loads instantly. Then scores are fetched from Sahha API in small batches to avoid rate limits. Watch the console-style logs above to see real-time API calls, responses, and any errors."]})})]}),(0,i.jsx)(tA.Z,{component:m.Z,variant:"outlined",children:(0,i.jsxs)(tC.Z,{children:[(0,i.jsx)(tD.Z,{children:(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tM.Z,{padding:"checkbox",children:(0,i.jsx)("input",{type:"checkbox",checked:el.length===F.length&&F.length>0,onChange:eU})}),(0,i.jsx)(tM.Z,{children:"Profile ID"}),(0,i.jsx)(tM.Z,{children:"External ID"}),(0,i.jsx)(tM.Z,{children:"Department"}),(0,i.jsx)(tM.Z,{children:"Device"}),(0,i.jsx)(tM.Z,{children:"Age"}),(0,i.jsx)(tM.Z,{children:"Gender"}),(0,i.jsx)(tM.Z,{children:"Activity"}),(0,i.jsx)(tM.Z,{children:"Sleep"}),(0,i.jsx)(tM.Z,{children:"Mental Wellbeing"}),(0,i.jsx)(tM.Z,{children:"Readiness"}),(0,i.jsx)(tM.Z,{children:"Wellbeing"}),(0,i.jsx)(tM.Z,{children:"Archetypes"}),(0,i.jsx)(tM.Z,{children:"Actions"})]})}),(0,i.jsx)(tk.Z,{children:eG.map(e=>{var t,r,l;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(tP.Z,{hover:!0,children:[(0,i.jsx)(tM.Z,{padding:"checkbox",children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,i.jsx)("input",{type:"checkbox",checked:el.includes(e.profileId),onChange:t=>eK(e.profileId,t.target.checked)}),(null===(t=ep[e.profileId])||void 0===t?void 0:t.status)==="loading"&&(0,i.jsx)(eJ.Z,{size:14}),(null===(r=ep[e.profileId])||void 0===r?void 0:r.status)==="completed"&&(0,i.jsx)(n.Z,{sx:{color:"success.main",fontSize:14},children:"✓"}),(null===(l=ep[e.profileId])||void 0===l?void 0:l.status)==="error"&&(0,i.jsx)(n.Z,{sx:{color:"error.main",fontSize:14},children:"✗"})]})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(t_.Z,{size:"small",value:p[e.profileId]||e.editableProfileId||"",onChange:t=>eL(e.profileId,t.target.value),placeholder:"Enter ID",sx:{minWidth:120,"& .MuiInputBase-root":{fontSize:"0.875rem",fontFamily:"monospace"}}})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(o.Z,{variant:"body2",fontWeight:"medium",children:e.externalId})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(J.Z,{size:"small",sx:{minWidth:150},children:(0,i.jsxs)(Q.Z,{value:x[e.profileId]||"",onChange:t=>eO(e.profileId,t.target.value),displayEmpty:!0,children:[(0,i.jsx)(Y.Z,{value:"",children:(0,i.jsx)("em",{children:"Unassigned"})}),tq.map(e=>(0,i.jsx)(Y.Z,{value:e.id,children:e.name},e.id))]})})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:e.deviceType||"Unknown",size:"small",variant:"outlined"})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(o.Z,{variant:"body2",children:22+e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%45})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%2==0?"Female":"Male",size:"small",color:e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%2==0?"secondary":"primary",variant:"outlined"})}),(0,i.jsx)(tM.Z,{children:e$(e.activityScore,e.profileId,"activity",e)}),(0,i.jsx)(tM.Z,{children:e$(e.sleepScore,e.profileId,"sleep",e)}),(0,i.jsx)(tM.Z,{children:e$(e.mentalHealthScore,e.profileId,"mentalWellbeing",e)}),(0,i.jsx)(tM.Z,{children:e$(e.readinessScore,e.profileId,"readiness",e)}),(0,i.jsx)(tM.Z,{children:e$(e.wellbeingScore,e.profileId,"wellbeing",e)}),(0,i.jsx)(tM.Z,{children:(0,i.jsxs)(n.Z,{display:"flex",alignItems:"center",gap:1,children:[eq(eN(e.profileId)),(0,i.jsx)(d.Z,{title:"View archetype details",children:(0,i.jsx)(h.Z,{size:"small",onClick:()=>ez(e.profileId),color:eZ[e.profileId]?"primary":"default",children:(0,i.jsx)(A.Z,{fontSize:"small"})})})]})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(d.Z,{title:"View Details",children:(0,i.jsx)(h.Z,{size:"small",children:(0,i.jsx)(tH.Z,{})})})})]}),eZ[e.profileId]&&(0,i.jsx)(tP.Z,{children:(0,i.jsx)(tM.Z,{colSpan:13,sx:{py:0},children:(0,i.jsx)(tE.Z,{in:eZ[e.profileId],timeout:"auto",children:(0,i.jsxs)(n.Z,{sx:{margin:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(A.Z,{color:"secondary"}),"Sahha Behavioral Intelligence Profile - ",e.externalId]}),(()=>{let t=eN(e.profileId);return t&&0!==t.archetypes.length?(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2},children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"primary",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(S.Z,{fontSize:"small"}),"Activity & Exercise Archetypes"]}),t.archetypesByCategory.activity.length>0?t.archetypesByCategory.activity.map(e=>(0,i.jsx)(n.Z,{sx:{mb:1},children:(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"medium",children:[eH(e.name),":",(0,i.jsx)(E.Z,{label:eH(e.value),size:"small",sx:{ml:1},color:"ordinal"===e.dataType?"primary":"secondary"})]})},e.id)):(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"No activity archetype data available"})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2},children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"info",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(en.Z,{fontSize:"small"}),"Sleep & Circadian Archetypes"]}),t.archetypesByCategory.sleep.length>0?t.archetypesByCategory.sleep.map(e=>(0,i.jsx)(n.Z,{sx:{mb:1},children:(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"medium",children:[eH(e.name),":",(0,i.jsx)(E.Z,{label:eH(e.value),size:"small",sx:{ml:1},color:"ordinal"===e.dataType?"info":"default"})]})},e.id)):(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"No sleep archetype data available"})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2},children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"success",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(Z.Z,{fontSize:"small"}),"Wellness & Mental Health Archetypes"]}),t.archetypesByCategory.wellness.length>0?t.archetypesByCategory.wellness.map(e=>(0,i.jsx)(n.Z,{sx:{mb:1},children:(0,i.jsxs)(o.Z,{variant:"body2",fontWeight:"medium",children:[eH(e.name),":",(0,i.jsx)(E.Z,{label:eH(e.value),size:"small",sx:{ml:1},color:"success"})]})},e.id)):(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"No wellness archetype data available"})]})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.Z,{sx:{p:2,bgcolor:"info.50"},children:[(0,i.jsxs)(o.Z,{variant:"subtitle2",gutterBottom:!0,color:"info",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(er.Z,{fontSize:"small"}),"Archetype Summary"]}),(0,i.jsxs)(n.Z,{sx:{mb:1},children:[(0,i.jsxs)(o.Z,{variant:"body2",children:["Data Completeness: ",(0,i.jsxs)("strong",{children:[t.archetypeCompleteness,"%"]})]}),(0,i.jsxs)(o.Z,{variant:"body2",children:["Total Archetypes: ",(0,i.jsxs)("strong",{children:[t.archetypes.length,"/14"]})]}),(0,i.jsxs)(o.Z,{variant:"body2",children:["Wearable Data: ",(0,i.jsx)("strong",{children:t.hasWearableData?"Available":"Not Available"})]})]}),t.archetypeCompleteness<80&&(0,i.jsx)(G.Z,{severity:"warning",sx:{mt:1},children:"This profile would benefit from additional data collection to improve archetype accuracy."})]})})]}):(0,i.jsx)(G.Z,{severity:"info",sx:{mb:2},children:"No archetype data available for this profile. With real Sahha API integration, this would show up to 14 behavioral archetypes including activity patterns, sleep behaviors, and wellness states."})})()]})})})})]},e.profileId)})})]})}),(0,i.jsx)(tW.Z,{rowsPerPageOptions:[5,10,25,50],component:"div",count:F.length,rowsPerPage:X,page:K,onPageChange:(e,t)=>$(t),onRowsPerPageChange:e=>{ee(parseInt(e.target.value,10)),$(0)}})]})}),(0,i.jsxs)(L.Z,{open:ei,onClose:()=>ea(!1),children:[(0,i.jsx)(z.Z,{children:"Bulk Department Assignment"}),(0,i.jsxs)(T.Z,{children:[(0,i.jsxs)(o.Z,{variant:"body1",sx:{mb:2},children:["Assign ",el.length," selected profiles to a department:"]}),(0,i.jsxs)(J.Z,{fullWidth:!0,sx:{mt:2},children:[(0,i.jsx)(V.Z,{children:"Department"}),(0,i.jsx)(Q.Z,{value:eo,onChange:e=>ec(e.target.value),label:"Department",children:tq.map(e=>(0,i.jsx)(Y.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(G.Z,{severity:"info",sx:{mt:2},children:"This will override any existing department assignments for the selected profiles."})]}),(0,i.jsxs)(U.Z,{children:[(0,i.jsx)(c.Z,{onClick:()=>ea(!1),children:"Cancel"}),(0,i.jsxs)(c.Z,{onClick:()=>{eo&&0!==el.length&&(el.forEach(e=>{w(e,eo)}),es([]),ea(!1),ec(""))},variant:"contained",disabled:!eo,children:["Assign to ",eo?(null===(r=tq.find(e=>e.id===eo))||void 0===r?void 0:r.name)||"Unknown":"Department"]})]})]})]})}var tU=r(76759);let t$={sedentary:{label:"Sedentary",color:"#D32F2F",order:0},lightly_active:{label:"Lightly Active",color:"#FF9800",order:1},moderately_active:{label:"Moderately Active",color:"#2196F3",order:2},highly_active:{label:"Highly Active",color:"#4CAF50",order:3}},tG={rare_exerciser:{label:"Rare Exerciser",color:"#D32F2F",order:0},occasional_exerciser:{label:"Occasional Exerciser",color:"#FF9800",order:1},regular_exerciser:{label:"Regular Exerciser",color:"#2196F3",order:2},frequent_exerciser:{label:"Frequent Exerciser",color:"#4CAF50",order:3}},tJ={poor_mental_wellness:{label:"Poor",color:"#D32F2F",order:0},fair_mental_wellness:{label:"Fair",color:"#FF9800",order:1},good_mental_wellness:{label:"Good",color:"#2196F3",order:2},optimal_mental_wellness:{label:"Optimal",color:"#4CAF50",order:3}},tV={poor_wellness:{label:"Poor",color:"#D32F2F",order:0},fair_wellness:{label:"Fair",color:"#FF9800",order:1},good_wellness:{label:"Good",color:"#2196F3",order:2},optimal_wellness:{label:"Optimal",color:"#4CAF50",order:3}},tQ=["running","walking","cycling","swimming","weightlifting","yoga","pilates","crossfit","sports","cardio","none"];function tY(e){let{orgId:t}=e,[r,l]=(0,a.useState)(0),[s,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(!0),{profiles:x,assignments:g}=(0,eM.Lu)();if((0,a.useEffect)(()=>{x&&x.length>0&&c(x.map(e=>{var t,r,i,a;let n=e.activityScore||(null===(t=e.scores)||void 0===t?void 0:t.activity)||50,l=e.sleepScore||(null===(r=e.scores)||void 0===r?void 0:r.sleep)||50,s=e.mentalHealthScore||(null===(i=e.scores)||void 0===i?void 0:i.mentalWellbeing)||50,o=e.wellbeingScore||(null===(a=e.scores)||void 0===a?void 0:a.wellbeing)||50,c=e.profileId.split("").reduce((e,t)=>e+t.charCodeAt(0),0),d=["Alex","Jordan","Casey","Morgan","Taylor","Riley","Cameron","Dakota","Avery","Quinn"],h=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez"],m="".concat(d[c%d.length]," ").concat(h[7*c%h.length]),x=g[e.profileId]||"unassigned",p=c%tQ.length,u=n>=25?tQ[p]:"none";return{profileId:e.profileId,employeeName:m,department:({engineering:"Engineering",marketing:"Marketing",sales:"Sales",hr:"HR",finance:"Finance",operations:"Operations",unassigned:"Unassigned"})[x]||"Unassigned",activity_level:n>=75?"highly_active":n>=50?"moderately_active":n>=25?"lightly_active":"sedentary",exercise_frequency:n>=75?"frequent_exerciser":n>=50?"regular_exerciser":n>=25?"occasional_exerciser":"rare_exerciser",mental_wellness:s>=75?"optimal_mental_wellness":s>=50?"good_mental_wellness":s>=25?"fair_mental_wellness":"poor_mental_wellness",overall_wellness:o>=75?"optimal_wellness":o>=50?"good_wellness":o>=25?"fair_wellness":"poor_wellness",primary_exercise:u,scores:{activity:n,sleep:l,mentalWellbeing:s,wellbeing:o}}})),h(!1)},[x,g]),d)return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,i.jsx)(eJ.Z,{size:60})});let y=Object.keys(t$).map(e=>({name:t$[e].label,value:s.filter(t=>t.activity_level===e).length,color:t$[e].color})),v=Object.keys(tG).map(e=>({name:tG[e].label,value:s.filter(t=>t.exercise_frequency===e).length,color:tG[e].color})),j=Object.keys(tJ).map(e=>({name:tJ[e].label,value:s.filter(t=>t.mental_wellness===e).length,color:tJ[e].color})),f=Object.keys(tV).map(e=>({name:tV[e].label,value:s.filter(t=>t.overall_wellness===e).length,color:tV[e].color})),b=tQ.map(e=>({name:e.charAt(0).toUpperCase()+e.slice(1),value:s.filter(t=>t.primary_exercise===e).length})).filter(e=>e.value>0),w=Object.values(s.reduce((e,t)=>(e[t.department]||(e[t.department]={department:t.department,totalEmployees:0,highly_active:0,optimal_wellness:0,frequent_exercisers:0,avgActivityScore:0,avgMentalScore:0,avgWellbeingScore:0}),e[t.department].totalEmployees++,"highly_active"===t.activity_level&&e[t.department].highly_active++,"optimal_wellness"===t.overall_wellness&&e[t.department].optimal_wellness++,"frequent_exerciser"===t.exercise_frequency&&e[t.department].frequent_exercisers++,e[t.department].avgActivityScore+=t.scores.activity,e[t.department].avgMentalScore+=t.scores.mentalWellbeing,e[t.department].avgWellbeingScore+=t.scores.wellbeing,e),{})).map(e=>({...e,avgActivityScore:Math.round(e.avgActivityScore/e.totalEmployees),avgMentalScore:Math.round(e.avgMentalScore/e.totalEmployees),avgWellbeingScore:Math.round(e.avgWellbeingScore/e.totalEmployees),highly_active_pct:Math.round(e.highly_active/e.totalEmployees*100),optimal_wellness_pct:Math.round(e.optimal_wellness/e.totalEmployees*100),frequent_exercisers_pct:Math.round(e.frequent_exercisers/e.totalEmployees*100)}));return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(n.Z,{mb:3,children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(Z.Z,{color:"primary"}),"Behavioral Intelligence - Sahha Archetypes"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Employee behavioral patterns based on Sahha's archetype classification system"})]}),(0,i.jsx)(n.Z,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,i.jsxs)(p.Z,{value:r,onChange:(e,t)=>l(t),children:[(0,i.jsx)(u.Z,{label:"Overview",icon:(0,i.jsx)(ts.Z,{}),iconPosition:"start"}),(0,i.jsx)(u.Z,{label:"Individual Archetypes",icon:(0,i.jsx)(Z.Z,{}),iconPosition:"start"}),(0,i.jsx)(u.Z,{label:"Department Analysis",icon:(0,i.jsx)(ee.Z,{}),iconPosition:"start"})]})}),0===r&&(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(S.Z,{color:"primary"}),"Activity Level Distribution"]}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:y,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(ef.$,{dataKey:"value",fill:"#8884d8",children:y.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(te.Z,{color:"primary"}),"Exercise Frequency"]}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name,": ").concat(e.value),outerRadius:80,fill:"#8884d8",dataKey:"value",children:v.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(eu.Z,{color:"primary"}),"Mental Wellness Levels"]}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eZ.v,{data:j,children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(ef.$,{dataKey:"value",fill:"#8884d8",children:j.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(tU.Z,{color:"primary"}),"Overall Wellness"]}),(0,i.jsx)(eb.h,{width:"100%",height:300,children:(0,i.jsxs)(eC.u,{children:[(0,i.jsx)(eD.b,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name,": ").concat(e.value),outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((e,t)=>(0,i.jsx)(eP.b,{fill:e.color},"cell-".concat(t)))}),(0,i.jsx)(e_.u,{})]})})]})})}),b.length>0&&(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Primary Exercise Types"}),(0,i.jsx)(eb.h,{width:"100%",height:200,children:(0,i.jsxs)(eZ.v,{data:b,layout:"horizontal",children:[(0,i.jsx)(eS.q,{strokeDasharray:"3 3"}),(0,i.jsx)(ew.K,{dataKey:"name"}),(0,i.jsx)(eI.B,{}),(0,i.jsx)(e_.u,{}),(0,i.jsx)(ef.$,{dataKey:"value",fill:"#2196F3"})]})})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Organization Summary"}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Highly Active Employees"}),(0,i.jsx)(o.Z,{variant:"h4",color:"primary",children:s.filter(e=>"highly_active"===e.activity_level).length}),(0,i.jsxs)(o.Z,{variant:"caption",children:[Math.round(s.filter(e=>"highly_active"===e.activity_level).length/s.length*100),"% of workforce"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Optimal Mental Wellness"}),(0,i.jsx)(o.Z,{variant:"h4",color:"success.main",children:s.filter(e=>"optimal_mental_wellness"===e.mental_wellness).length}),(0,i.jsxs)(o.Z,{variant:"caption",children:[Math.round(s.filter(e=>"optimal_mental_wellness"===e.mental_wellness).length/s.length*100),"% of workforce"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Regular+ Exercisers"}),(0,i.jsx)(o.Z,{variant:"h4",color:"info.main",children:s.filter(e=>["regular_exerciser","frequent_exerciser"].includes(e.exercise_frequency)).length}),(0,i.jsxs)(o.Z,{variant:"caption",children:[Math.round(s.filter(e=>["regular_exerciser","frequent_exerciser"].includes(e.exercise_frequency)).length/s.length*100),"% exercise regularly"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:3,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:"Need Support"}),(0,i.jsx)(o.Z,{variant:"h4",color:"warning.main",children:s.filter(e=>"poor_wellness"===e.overall_wellness).length}),(0,i.jsx)(o.Z,{variant:"caption",children:"Poor overall wellness"})]})]})]})})})]}),1===r&&(0,i.jsx)(tA.Z,{component:m.Z,children:(0,i.jsxs)(tC.Z,{children:[(0,i.jsx)(tD.Z,{children:(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tM.Z,{children:"Employee"}),(0,i.jsx)(tM.Z,{children:"Department"}),(0,i.jsx)(tM.Z,{children:"Activity Level"}),(0,i.jsx)(tM.Z,{children:"Exercise Frequency"}),(0,i.jsx)(tM.Z,{children:"Mental Wellness"}),(0,i.jsx)(tM.Z,{children:"Overall Wellness"}),(0,i.jsx)(tM.Z,{children:"Primary Exercise"}),(0,i.jsx)(tM.Z,{children:"Action"})]})}),(0,i.jsx)(tk.Z,{children:s.slice(0,20).map(e=>(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tM.Z,{children:e.employeeName}),(0,i.jsx)(tM.Z,{children:e.department}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:t$[e.activity_level].label,size:"small",style:{backgroundColor:t$[e.activity_level].color,color:"white"}})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:tG[e.exercise_frequency].label,size:"small",style:{backgroundColor:tG[e.exercise_frequency].color,color:"white"}})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:tJ[e.mental_wellness].label,size:"small",style:{backgroundColor:tJ[e.mental_wellness].color,color:"white"}})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(E.Z,{label:tV[e.overall_wellness].label,size:"small",style:{backgroundColor:tV[e.overall_wellness].color,color:"white"}})}),(0,i.jsx)(tM.Z,{children:(0,i.jsx)(o.Z,{variant:"caption",children:e.primary_exercise})}),(0,i.jsxs)(tM.Z,{children:["poor_wellness"===e.overall_wellness&&(0,i.jsx)(E.Z,{label:"Needs Support",color:"error",size:"small"}),"fair_wellness"===e.overall_wellness&&(0,i.jsx)(E.Z,{label:"Monitor",color:"warning",size:"small"}),"optimal_wellness"===e.overall_wellness&&(0,i.jsx)(E.Z,{label:"Thriving",color:"success",size:"small"})]})]},e.profileId))})]})}),2===r&&(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(tA.Z,{component:m.Z,children:(0,i.jsxs)(tC.Z,{children:[(0,i.jsx)(tD.Z,{children:(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tM.Z,{children:"Department"}),(0,i.jsx)(tM.Z,{align:"center",children:"Employees"}),(0,i.jsx)(tM.Z,{align:"center",children:"Avg Activity Score"}),(0,i.jsx)(tM.Z,{align:"center",children:"Avg Mental Score"}),(0,i.jsx)(tM.Z,{align:"center",children:"Avg Wellbeing"}),(0,i.jsx)(tM.Z,{align:"center",children:"Highly Active %"}),(0,i.jsx)(tM.Z,{align:"center",children:"Optimal Wellness %"}),(0,i.jsx)(tM.Z,{align:"center",children:"Regular Exercisers %"})]})}),(0,i.jsx)(tk.Z,{children:w.map(e=>(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tM.Z,{children:e.department}),(0,i.jsx)(tM.Z,{align:"center",children:e.totalEmployees}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsx)(E.Z,{label:"".concat(e.avgActivityScore,"/100"),color:e.avgActivityScore>=70?"success":e.avgActivityScore>=50?"warning":"error",size:"small"})}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsx)(E.Z,{label:"".concat(e.avgMentalScore,"/100"),color:e.avgMentalScore>=70?"success":e.avgMentalScore>=50?"warning":"error",size:"small"})}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsx)(E.Z,{label:"".concat(e.avgWellbeingScore,"/100"),color:e.avgWellbeingScore>=70?"success":e.avgWellbeingScore>=50?"warning":"error",size:"small"})}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsxs)(o.Z,{variant:"body2",color:e.highly_active_pct>=30?"success.main":"warning.main",children:[e.highly_active_pct,"%"]})}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsxs)(o.Z,{variant:"body2",color:e.optimal_wellness_pct>=30?"success.main":"warning.main",children:[e.optimal_wellness_pct,"%"]})}),(0,i.jsx)(tM.Z,{align:"center",children:(0,i.jsxs)(o.Z,{variant:"body2",color:e.frequent_exercisers_pct>=30?"success.main":"warning.main",children:[e.frequent_exercisers_pct,"%"]})})]},e.department))})]})})}),(0,i.jsx)(R.ZP,{item:!0,xs:12,children:(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Department Wellness Comparison"}),(0,i.jsx)(eb.h,{width:"100%",height:400,children:(0,i.jsxs)(eY.H,{data:w.map(e=>({department:e.department,activity:e.avgActivityScore,mental:e.avgMentalScore,wellbeing:e.avgWellbeingScore})),children:[(0,i.jsx)(eX.n,{}),(0,i.jsx)(e0.I,{dataKey:"department"}),(0,i.jsx)(e1.S,{angle:90,domain:[0,100]}),(0,i.jsx)(e2.F,{name:"Activity",dataKey:"activity",stroke:"#2196F3",fill:"#2196F3",fillOpacity:.3}),(0,i.jsx)(e2.F,{name:"Mental",dataKey:"mental",stroke:"#4CAF50",fill:"#4CAF50",fillOpacity:.3}),(0,i.jsx)(e2.F,{name:"Wellbeing",dataKey:"wellbeing",stroke:"#FF9800",fill:"#FF9800",fillOpacity:.3}),(0,i.jsx)(eA.D,{})]})})]})})})]})]})}var tX=r(97312),t0=r(8430),t1=r(88506),t2=r(4026);function t3(e){let{onClose:t}=e,[r,l]=(0,a.useState)("overview"),s=e=>(t,r)=>{l(!!r&&e)};return(0,i.jsxs)(m.Z,{sx:{p:3,mb:3,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:[(0,i.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(v.Z,{color:"primary"}),"Sahha EAP Dashboard - Complete Guide"]}),(0,i.jsx)(o.Z,{variant:"subtitle1",color:"textSecondary",children:"Comprehensive guide to Employee Assistance Program analytics powered by Sahha's health intelligence platform"})]}),t&&(0,i.jsx)(h.Z,{onClick:t,size:"small",children:(0,i.jsx)(t0.Z,{})})]}),(0,i.jsx)(G.Z,{severity:"info",sx:{mb:3},children:(0,i.jsxs)(o.Z,{variant:"body2",children:["This dashboard uses real-time data from ",(0,i.jsx)("strong",{children:"Sahha's health intelligence platform"}),". All metrics are calculated from actual employee health data collected through wearables and smartphone sensors."]})}),(0,i.jsxs)(F.Z,{expanded:"overview"===r,onChange:s("overview"),children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),children:(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(b.Z,{color:"primary"}),"Dashboard Overview & Data Flow"]})}),(0,i.jsx)(O.Z,{children:(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"How the Dashboard Works:"}),(0,i.jsxs)(N.Z,{dense:!0,children:[(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(g.Z,{})}),(0,i.jsx)(K.Z,{primary:"Profile Management Hub",secondary:"Central data source - all analytics tabs pull from here"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eg.Z,{})}),(0,i.jsx)(K.Z,{primary:"Real-time Sahha API Integration",secondary:"Live health scores, sub-scores, and archetype data"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(er.Z,{})}),(0,i.jsx)(K.Z,{primary:"Department Analytics",secondary:"Assign employees to departments for comparative analysis"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(ei.Z,{})}),(0,i.jsx)(K.Z,{primary:"Advanced Intelligence",secondary:"Behavioral archetypes and predictive insights"})]})]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Key Sahha Resources:"}),(0,i.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(c.Z,{variant:"outlined",startIcon:(0,i.jsx)(t1.Z,{}),href:"https://docs.sahha.ai",target:"_blank",size:"small",children:"Sahha API Documentation"}),(0,i.jsx)(c.Z,{variant:"outlined",startIcon:(0,i.jsx)(t1.Z,{}),href:"https://sahha.ai/archetypes",target:"_blank",size:"small",children:"Sahha Archetypes Guide"}),(0,i.jsx)(c.Z,{variant:"outlined",startIcon:(0,i.jsx)(t1.Z,{}),href:"https://sahha.ai/health-scores",target:"_blank",size:"small",children:"Health Scores Explained"}),(0,i.jsx)(c.Z,{variant:"outlined",startIcon:(0,i.jsx)(t1.Z,{}),href:"https://sahha.ai/platform",target:"_blank",size:"small",children:"Sahha Platform Overview"})]})]})]})})]}),(0,i.jsxs)(F.Z,{expanded:"profile-management"===r,onChange:s("profile-management"),children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),children:(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(g.Z,{color:"primary"}),"Profile Management - Data Source Hub"]})}),(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(G.Z,{severity:"success",sx:{mb:2},children:(0,i.jsxs)(o.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Profile Management is the heart of the dashboard"})," - all other tabs get their data from here!"]})}),(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:8,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,children:"Data Flow Process:"}),(0,i.jsx)(n.Z,{sx:{pl:2},children:(0,i.jsxs)(o.Z,{variant:"body2",paragraph:!0,children:[(0,i.jsx)("strong",{children:"1. Profile Loading:"})," Fetches 57 employee profiles from Sahha API",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"2. Health Scores:"})," Loads wellbeing, activity, sleep, mental wellbeing, and readiness scores",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"3. Sub-scores:"})," Detailed metrics like sleep duration, regularity, circadian alignment",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"4. Archetypes:"})," Behavioral patterns (activity_level, mental_wellness, sleep_quality)",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"5. Department Assignment:"})," Assign employees to departments for comparative analysis"]})}),(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"How Other Tabs Use This Data:"}),(0,i.jsxs)(N.Z,{dense:!0,children:[(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eo.Z,{color:"success"})}),(0,i.jsx)(K.Z,{primary:"Executive Overview: Aggregates all health scores for organization-wide insights"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eo.Z,{color:"success"})}),(0,i.jsx)(K.Z,{primary:"Wellbeing Analytics: Uses composite scores across all health dimensions"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eo.Z,{color:"success"})}),(0,i.jsx)(K.Z,{primary:"Activity Analytics: Leverages activity scores and sub-scores"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eo.Z,{color:"success"})}),(0,i.jsx)(K.Z,{primary:"Sleep Analytics: Extracts sleep sub-scores (duration, regularity, debt)"})]}),(0,i.jsxs)(H.ZP,{children:[(0,i.jsx)(q.Z,{children:(0,i.jsx)(eo.Z,{color:"success"})}),(0,i.jsx)(K.Z,{primary:"Mental Wellbeing: Uses mental wellbeing score and related sub-scores"})]})]})]}),(0,i.jsx)(R.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(M.Z,{sx:{bgcolor:"primary.50"},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Quick Start:"}),(0,i.jsxs)(o.Z,{variant:"body2",paragraph:!0,children:["1. Go to ",(0,i.jsx)("strong",{children:"Profile Management"})," tab",(0,i.jsx)("br",{}),"2. Wait for profiles to load (57 employees)",(0,i.jsx)("br",{}),"3. Assign employees to departments",(0,i.jsx)("br",{}),"4. Navigate to analytics tabs to see insights"]}),(0,i.jsx)(G.Z,{severity:"warning",children:(0,i.jsx)(o.Z,{variant:"caption",children:'If analytics show "No data available", check that Profile Management has loaded successfully.'})})]})})})]})]})]}),(0,i.jsxs)(F.Z,{expanded:"analytics-tabs"===r,onChange:s("analytics-tabs"),children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),children:(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(er.Z,{color:"primary"}),"Analytics Tabs Explained"]})}),(0,i.jsx)(O.Z,{children:(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(M.Z,{sx:{mb:2},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(b.Z,{color:"primary"}),"Executive Overview"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"High-level organizational health metrics with trend analysis and risk identification."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Aggregated scores from all employees in Profile Management"]})]})}),(0,i.jsx)(M.Z,{sx:{mb:2},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(Z.Z,{color:"primary"}),"Wellbeing Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Comprehensive wellbeing analysis across physical, mental, social, and emotional dimensions."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Composite scores from wellbeing, activity, sleep, mental health, readiness"]})]})}),(0,i.jsx)(M.Z,{sx:{mb:2},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(S.Z,{color:"primary"}),"Activity Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Physical activity insights with step counts, active hours, and inactivity patterns."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Activity scores and sub-scores (steps, active_hours, extended_inactivity)"]})]})}),(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(w.Z,{color:"primary"}),"Sleep Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Sleep quality analysis with duration, regularity, debt, and circadian alignment metrics."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Sleep scores and sub-scores (sleep_duration, sleep_regularity, sleep_debt, circadian_alignment)"]})]})})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(M.Z,{sx:{mb:2},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(I.Z,{color:"primary"}),"Mental Wellbeing Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Mental wellbeing insights with sub-score breakdown and improvement recommendations."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Mental wellbeing scores and sub-scores (circadian_alignment, steps, active_hours, activity_regularity, sleep_regularity)"]})]})}),(0,i.jsx)(M.Z,{sx:{mb:2},children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(_.Z,{color:"primary"}),"Readiness Analytics"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Energy levels, recovery patterns, and performance readiness metrics."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Readiness scores and recovery-related sub-scores"]})]})}),(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,i.jsx)(A.Z,{color:"primary"}),"Behavioral Intelligence"]}),(0,i.jsx)(o.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Advanced archetype analysis using Sahha's behavioral classification system."}),(0,i.jsxs)(o.Z,{variant:"caption",color:"textSecondary",children:[(0,i.jsx)("strong",{children:"Data Source:"})," Sahha archetypes (activity_level, mental_wellness, sleep_quality, exercise_frequency)"]})]})})]})]})})]}),(0,i.jsxs)(F.Z,{expanded:"sahha-integration"===r,onChange:s("sahha-integration"),children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),children:(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(t1.Z,{color:"primary"}),"Sahha Platform Integration"]})}),(0,i.jsx)(O.Z,{children:(0,i.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Real Sahha Archetypes Used:"}),(0,i.jsxs)(n.Z,{sx:{mb:2},children:[(0,i.jsx)(E.Z,{label:"activity_level",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"exercise_frequency",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"mental_wellness",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"overall_wellness",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"sleep_duration",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"sleep_quality",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"sleep_regularity",size:"small",sx:{mr:1,mb:1}}),(0,i.jsx)(E.Z,{label:"sleep_efficiency",size:"small",sx:{mr:1,mb:1}})]}),(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Health Score Categories:"}),(0,i.jsxs)(N.Z,{dense:!0,children:[(0,i.jsx)(H.ZP,{children:(0,i.jsx)(K.Z,{primary:"Wellbeing Score",secondary:"Overall health composite"})}),(0,i.jsx)(H.ZP,{children:(0,i.jsx)(K.Z,{primary:"Activity Score",secondary:"Physical movement and exercise"})}),(0,i.jsx)(H.ZP,{children:(0,i.jsx)(K.Z,{primary:"Sleep Score",secondary:"Sleep quality and patterns"})}),(0,i.jsx)(H.ZP,{children:(0,i.jsx)(K.Z,{primary:"Mental Wellbeing Score",secondary:"Psychological health indicators"})}),(0,i.jsx)(H.ZP,{children:(0,i.jsx)(K.Z,{primary:"Readiness Score",secondary:"Recovery and energy levels"})})]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Key Sahha Features:"}),(0,i.jsxs)(o.Z,{variant:"body2",paragraph:!0,children:["• ",(0,i.jsx)("strong",{children:"Wearable Integration:"})," Apple Health, Google Fit, Fitbit, Garmin",(0,i.jsx)("br",{}),"• ",(0,i.jsx)("strong",{children:"Smartphone Sensors:"})," Movement, sleep, activity detection",(0,i.jsx)("br",{}),"• ",(0,i.jsx)("strong",{children:"Privacy-First:"})," Edge processing, encrypted data transmission",(0,i.jsx)("br",{}),"• ",(0,i.jsx)("strong",{children:"Real-time Analytics:"})," Live health intelligence and insights",(0,i.jsx)("br",{}),"• ",(0,i.jsx)("strong",{children:"Behavioral Archetypes:"})," AI-powered pattern recognition",(0,i.jsx)("br",{}),"• ",(0,i.jsx)("strong",{children:"Sub-score Granularity:"})," Detailed health component analysis"]}),(0,i.jsx)(G.Z,{severity:"info",children:(0,i.jsxs)(o.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Learn More:"})," Visit ",(0,i.jsx)(tX.Z,{href:"https://sahha.ai",target:"_blank",children:"sahha.ai"})," to understand how Sahha's platform collects and processes health data to generate these insights."]})})]})]})})]}),(0,i.jsxs)(F.Z,{expanded:"technical-notes"===r,onChange:s("technical-notes"),children:[(0,i.jsx)(B.Z,{expandIcon:(0,i.jsx)(el.Z,{}),children:(0,i.jsxs)(o.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(t2.Z,{color:"primary"}),"Technical Implementation Notes"]})}),(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(G.Z,{severity:"warning",sx:{mb:2},children:(0,i.jsxs)(o.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Developer Pain Points Noted:"})," Several areas where Sahha's API structure required careful handling of null values, score field naming conventions, and archetype classification."]})}),(0,i.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"Key Technical Challenges:"}),(0,i.jsxs)(o.Z,{variant:"body2",children:['• Score field naming: "mentalWellbeing" vs "mentalHealth"',(0,i.jsx)("br",{}),"• Null value handling for incomplete profiles",(0,i.jsx)("br",{}),"• Department assignment ID mapping",(0,i.jsx)("br",{}),"• Sub-score extraction from nested objects",(0,i.jsx)("br",{}),"• Real-time data synchronization",(0,i.jsx)("br",{}),"• Archetype classification accuracy"]})]}),(0,i.jsxs)(R.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",gutterBottom:!0,children:"Data Quality Assurance:"}),(0,i.jsxs)(o.Z,{variant:"body2",children:["• All metrics calculated from real API data",(0,i.jsx)("br",{}),"• No fabricated or estimated values",(0,i.jsx)("br",{}),"• Proper error handling for missing data",(0,i.jsx)("br",{}),"• Consistent department mapping across tabs",(0,i.jsx)("br",{}),"• Real Sahha archetype terminology used",(0,i.jsx)("br",{}),"• Profile Management as single source of truth"]})]})]})]})]}),(0,i.jsx)(n.Z,{sx:{mt:3,textAlign:"center"},children:(0,i.jsxs)(o.Z,{variant:"body2",color:"textSecondary",children:["For technical support or questions about Sahha integration, visit"," ",(0,i.jsx)(tX.Z,{href:"https://docs.sahha.ai",target:"_blank",children:"docs.sahha.ai"})," or contact the development team."]})})]})}var t5=r(84841),t6=r(2614),t4=r(14759),t8=r(94395),t9=r(89706),t7=r(87489);function re(e){let{children:t,value:r,index:a,...l}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:r!==a,id:"api-tabpanel-".concat(a),"aria-labelledby":"api-tab-".concat(a),...l,children:r===a&&(0,i.jsx)(n.Z,{sx:{p:3},children:t})})}function rt(e){let{open:t,onClose:r,onCredentialsChange:l,currentCredentials:s}=e,[m,x]=(0,a.useState)(0),[g,y]=(0,a.useState)({appId:"NqrB0AYlviHruQVbF0Cp5Jch2utzQNwe",appSecret:"VsU94PUlVPj7LM9dFAZ4sHPRAYFqgtfmG0WuANKLErtQlbFk8LZNLHIJA1AEnbtC",clientId:"tFcIJ0UjCnV9tL7eyUKeW6s8nhIAkjkW",clientSecret:"uGJFFzeLuifFEHC2y3dgs6J3O2vui3eiptuxlH5D810DmS8NshymlIJUu14nZ3y8"}),[v,b]=(0,a.useState)(!1),[Z,S]=(0,a.useState)("idle"),[w,I]=(0,a.useState)(""),[_,A]=(0,a.useState)(!0),[C,D]=(0,a.useState)(""),[P,W]=(0,a.useState)(""),R=window.location.hostname.includes("vercel.app")||window.location.hostname.includes("netlify.app")||window.location.hostname.includes("sahha.ai");(0,a.useEffect)(()=>{s&&y(s);let e=localStorage.getItem("sahha_webhook_url"),t=localStorage.getItem("sahha_webhook_secret"),r="true"===localStorage.getItem("sahha_use_demo");e&&D(e),t&&W(t),A(r)},[s]);let F=(e,t)=>{y(r=>({...r,[e]:t}))},B=async()=>{S("testing"),I("Testing connection to Sahha API...");try{let t=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),r=await t.json();if(r.success){var e;S("success"),I("✅ Connection successful! Found ".concat((null===(e=r.data)||void 0===e?void 0:e.profileCount)||0," profiles."))}else S("error"),I("❌ Connection failed: ".concat(r.error))}catch(t){S("error");let e="Unknown error occurred";e=t&&"object"==typeof t&&"message"in t?t.message:String(t),I("❌ Connection error: ".concat(e))}},O=e=>{navigator.clipboard.writeText(e)};return(0,i.jsxs)(L.Z,{open:t,onClose:r,maxWidth:"md",fullWidth:!0,children:[(0,i.jsxs)(z.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(f.Z,{}),"API Configuration",R&&(0,i.jsx)(E.Z,{label:"Hosted Demo",color:"primary",size:"small",sx:{ml:"auto"}})]}),(0,i.jsxs)(T.Z,{children:[R&&(0,i.jsx)(G.Z,{severity:"info",sx:{mb:2},children:(0,i.jsx)(o.Z,{variant:"body2",children:"This is a hosted demo with working Sahha credentials pre-configured. You can try it with demo data or enter your own API keys to use your real data."})}),(0,i.jsxs)(p.Z,{value:m,onChange:(e,t)=>x(t),sx:{mb:2},children:[(0,i.jsx)(u.Z,{label:"API Keys"}),(0,i.jsx)(u.Z,{label:"Webhooks"}),(0,i.jsx)(u.Z,{label:"Demo Mode"})]}),(0,i.jsx)(re,{value:m,index:0,children:(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",gap:3,children:[(0,i.jsx)(t5.Z,{control:(0,i.jsx)(t6.Z,{checked:!_,onChange:e=>A(!e.target.checked)}),label:"Use my own Sahha API credentials"}),_?(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Sahha API Credentials"}),(0,i.jsxs)(o.Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Get your API credentials from the"," ",(0,i.jsx)("a",{href:"https://dashboard.sahha.ai",target:"_blank",rel:"noopener noreferrer",children:"Sahha Dashboard"})]}),(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",gap:2,children:[(0,i.jsx)(t_.Z,{label:"App ID",value:g.appId,onChange:e=>F("appId",e.target.value),fullWidth:!0,placeholder:"Your Sahha App ID"}),(0,i.jsx)(t_.Z,{label:"App Secret",type:v?"text":"password",value:g.appSecret,onChange:e=>F("appSecret",e.target.value),fullWidth:!0,placeholder:"Your Sahha App Secret",InputProps:{endAdornment:(0,i.jsx)(h.Z,{onClick:()=>b(!v),children:v?(0,i.jsx)(t4.Z,{}):(0,i.jsx)(t8.Z,{})})}}),(0,i.jsx)(t_.Z,{label:"Client ID",value:g.clientId,onChange:e=>F("clientId",e.target.value),fullWidth:!0,placeholder:"Your Sahha Client ID"}),(0,i.jsx)(t_.Z,{label:"Client Secret",type:v?"text":"password",value:g.clientSecret,onChange:e=>F("clientSecret",e.target.value),fullWidth:!0,placeholder:"Your Sahha Client Secret",InputProps:{endAdornment:(0,i.jsx)(h.Z,{onClick:()=>b(!v),children:v?(0,i.jsx)(t4.Z,{}):(0,i.jsx)(t8.Z,{})})}})]}),(0,i.jsxs)(n.Z,{sx:{mt:2,display:"flex",gap:1,alignItems:"center"},children:[(0,i.jsx)(c.Z,{variant:"outlined",onClick:B,disabled:"testing"===Z||!g.appId||!g.clientId,startIcon:"testing"===Z?(0,i.jsx)(j.Z,{className:"animate-spin"}):void 0,children:"Test Connection"}),"success"===Z&&(0,i.jsx)(eo.Z,{color:"success"}),"error"===Z&&(0,i.jsx)(t9.Z,{color:"error"})]}),w&&(0,i.jsx)(G.Z,{severity:"success"===Z?"success":"error"===Z?"error":"info",sx:{mt:2},children:w})]}):(0,i.jsx)(G.Z,{severity:"success",children:(0,i.jsx)(o.Z,{variant:"body2",children:"Using demo data with realistic organizational health scenarios. Perfect for exploring the dashboard without API setup."})})]})}),(0,i.jsx)(re,{value:m,index:1,children:(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",gap:3,children:[(0,i.jsx)(o.Z,{variant:"h6",children:"Webhook Configuration"}),(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"Set up real-time updates for your dashboard. Configure these settings in your Sahha Dashboard."}),(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,children:"Webhook URL"}),(0,i.jsxs)(n.Z,{display:"flex",gap:1,alignItems:"center",sx:{mb:2},children:[(0,i.jsx)(t_.Z,{value:C,onChange:e=>D(e.target.value),fullWidth:!0,placeholder:"https://your-domain.com/api/webhook/sahha",helperText:"This URL will receive real-time health data updates"}),(0,i.jsx)(d.Z,{title:"Generate webhook URL",children:(0,i.jsx)(h.Z,{onClick:()=>{let e=window.location.origin;D("".concat(e,"/api/webhook/sahha"))},children:(0,i.jsx)(j.Z,{})})}),(0,i.jsx)(d.Z,{title:"Copy to clipboard",children:(0,i.jsx)(h.Z,{onClick:()=>O(C),children:(0,i.jsx)(t7.Z,{})})})]}),(0,i.jsx)(t_.Z,{label:"Webhook Secret",type:v?"text":"password",value:P,onChange:e=>W(e.target.value),fullWidth:!0,placeholder:"Your webhook secret for signature verification",helperText:"Used to verify webhook authenticity",InputProps:{endAdornment:(0,i.jsx)(h.Z,{onClick:()=>b(!v),children:v?(0,i.jsx)(t4.Z,{}):(0,i.jsx)(t8.Z,{})})}})]})}),(0,i.jsx)(G.Z,{severity:"info",children:(0,i.jsxs)(o.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Sahha Dashboard Setup:"}),(0,i.jsx)("br",{}),"1. Go to your Sahha Dashboard → Webhooks",(0,i.jsx)("br",{}),"2. Add the webhook URL above",(0,i.jsx)("br",{}),"3. Select events: ScoreCreatedIntegrationEvent, BiomarkerCreatedIntegrationEvent",(0,i.jsx)("br",{}),"4. Copy the webhook secret to the field above"]})})]})}),(0,i.jsx)(re,{value:m,index:2,children:(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",gap:3,children:[(0,i.jsx)(o.Z,{variant:"h6",children:"Demo Mode"}),(0,i.jsx)(M.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(o.Z,{variant:"subtitle1",gutterBottom:!0,children:"TechCorp Industries Demo Dataset"}),(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Realistic organizational health data for a 500-employee technology company"}),(0,i.jsxs)(n.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,i.jsx)(o.Z,{variant:"body2",children:"• 5 Departments: Engineering, Sales, Marketing, Operations, Executive"}),(0,i.jsx)(o.Z,{variant:"body2",children:"• Behavioral archetypes and patterns"}),(0,i.jsx)(o.Z,{variant:"body2",children:"• Burnout scenarios and interventions"}),(0,i.jsx)(o.Z,{variant:"body2",children:"• Seasonal wellbeing trends"}),(0,i.jsx)(o.Z,{variant:"body2",children:"• Real-time simulated updates"})]}),(0,i.jsx)(c.Z,{variant:"contained",onClick:()=>{A(!0),y({appId:"",appSecret:"",clientId:"",clientSecret:""}),l(null)},sx:{mt:2},startIcon:(0,i.jsx)(eo.Z,{}),children:"Use Demo Data"})]})}),(0,i.jsx)(G.Z,{severity:"warning",children:(0,i.jsx)(o.Z,{variant:"body2",children:"Demo mode uses synthetic data for demonstration purposes only. No real employee data is used or stored."})})]})})]}),(0,i.jsxs)(U.Z,{children:[(0,i.jsx)(c.Z,{onClick:r,children:"Cancel"}),(0,i.jsx)(c.Z,{variant:"contained",onClick:()=>{!_&&g.appId&&g.clientId?(localStorage.setItem("sahha_credentials",JSON.stringify(g)),l(g)):(localStorage.removeItem("sahha_credentials"),l(null)),localStorage.setItem("sahha_use_demo",_.toString()),C&&localStorage.setItem("sahha_webhook_url",C),P&&localStorage.setItem("sahha_webhook_secret",P),r()},children:"Save Configuration"})]})]})}var rr=r(40257);let ri=(0,C.Z)({palette:{primary:{main:"#0066CC",light:"#4A90E2",dark:"#004499"},secondary:{main:"#00AA44",light:"#4CAF50",dark:"#007A31"},error:{main:"#CC3333"},warning:{main:"#FF9933"},success:{main:"#00AA44"},background:{default:"#F8FAFC",paper:"#FFFFFF"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h4:{fontWeight:600},h6:{fontWeight:600}},components:{MuiCard:{styleOverrides:{root:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.08), 0 1px 2px 0 rgba(0, 0, 0, 0.04)",borderRadius:8}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}}}});function ra(e){let{children:t,value:r,index:a,...l}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:r!==a,id:"dashboard-tabpanel-".concat(a),"aria-labelledby":"dashboard-tab-".concat(a),...l,children:r===a&&(0,i.jsx)(n.Z,{sx:{py:3},children:t})})}function rn(){let[e,t]=(0,a.useState)(0),[r,C]=(0,a.useState)(!1),[M,k]=(0,a.useState)(!1),[E,W]=(0,a.useState)(null),[R,F]=(0,a.useState)(new Date),B=rr.env.DEMO_ORG_ID||"demo_techcorp_industries";return(0,i.jsxs)(D.Z,{theme:ri,children:[(0,i.jsx)(P.ZP,{}),(0,i.jsxs)(eM.By,{children:[(0,i.jsx)(l.Z,{position:"static",elevation:1,sx:{bgcolor:"background.paper",color:"text.primary"},children:(0,i.jsxs)(s.Z,{children:[(0,i.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexGrow:1},children:[(0,i.jsx)(g.Z,{sx:{color:"primary.main",fontSize:32}}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{variant:"h6",component:"div",color:"primary",children:"Sahha EAP Dashboard"}),(0,i.jsx)(o.Z,{variant:"caption",color:"textSecondary",children:"Employee Assistance Program Analytics"})]})]}),(0,i.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(c.Z,{variant:"contained",color:"primary",startIcon:(0,i.jsx)(y.Z,{}),onClick:()=>k(!M),sx:{mr:2},children:"Dashboard Guide"}),(0,i.jsx)(d.Z,{title:"Health Intelligence Guide",children:(0,i.jsx)(h.Z,{onClick:()=>k(!M),color:M?"primary":"default",children:(0,i.jsx)(v.Z,{})})}),(0,i.jsx)(d.Z,{title:"Refresh Data",children:(0,i.jsx)(h.Z,{onClick:()=>{F(new Date)},color:"primary",children:(0,i.jsx)(j.Z,{})})}),(0,i.jsx)(d.Z,{title:"API Configuration",children:(0,i.jsx)(h.Z,{onClick:()=>C(!0),color:"primary",children:(0,i.jsx)(f.Z,{})})})]})]})}),(0,i.jsx)(m.Z,{sx:{borderRadius:0},children:(0,i.jsx)(x.Z,{maxWidth:"xl",children:(0,i.jsxs)(p.Z,{value:e,onChange:(e,r)=>{t(r)},"aria-label":"dashboard navigation",sx:{borderBottom:1,borderColor:"divider"},children:[(0,i.jsx)(u.Z,{icon:(0,i.jsx)(b.Z,{}),label:"Executive Overview",id:"dashboard-tab-0","aria-controls":"dashboard-tabpanel-0"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(Z.Z,{}),label:"Wellbeing",id:"dashboard-tab-1","aria-controls":"dashboard-tabpanel-1"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(S.Z,{}),label:"Activity",id:"dashboard-tab-2","aria-controls":"dashboard-tabpanel-2"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(w.Z,{}),label:"Sleep",id:"dashboard-tab-3","aria-controls":"dashboard-tabpanel-3"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(I.Z,{}),label:"Mental Wellbeing",id:"dashboard-tab-4","aria-controls":"dashboard-tabpanel-4"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(_.Z,{}),label:"Readiness",id:"dashboard-tab-5","aria-controls":"dashboard-tabpanel-5"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(g.Z,{}),label:"Profile Management",id:"dashboard-tab-6","aria-controls":"dashboard-tabpanel-6"}),(0,i.jsx)(u.Z,{icon:(0,i.jsx)(A.Z,{}),label:"Behavioral Intelligence",id:"dashboard-tab-7","aria-controls":"dashboard-tabpanel-7"})]})})}),M&&(0,i.jsx)(x.Z,{maxWidth:"xl",sx:{pt:3},children:(0,i.jsx)(t3,{onClose:()=>k(!1)})}),(0,i.jsxs)(x.Z,{maxWidth:"xl",sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,i.jsx)(ra,{value:e,index:0,children:(0,i.jsx)(eG,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:1,children:(0,i.jsx)(e7,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:2,children:(0,i.jsx)(ta,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:3,children:(0,i.jsx)(tm,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:4,children:(0,i.jsx)(ty,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:5,children:(0,i.jsx)(tw,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:6,children:(0,i.jsx)(tK,{orgId:B})}),(0,i.jsx)(ra,{value:e,index:7,children:(0,i.jsx)(tY,{orgId:B})})]}),(0,i.jsx)(rt,{open:r,onClose:()=>C(!1),onCredentialsChange:e=>{W(e)},currentCredentials:E})]})]})}},93514:function(e,t,r){"use strict";r.d(t,{By:function(){return o},Lu:function(){return m},uy:function(){return x}});var i=r(57437),a=r(2265);let n={profiles:[],organizationMetrics:null,assignments:{},editableIds:{},demographics:{},isLoadingProfiles:!1,isLoadingMetrics:!1,isLoadingDemographics:!1,lastApiCall:null,orgId:"demo_techcorp_industries",error:null};function l(e,t){switch(t.type){case"SET_PROFILES":return{...e,profiles:t.payload,isLoadingProfiles:!1};case"UPDATE_PROFILE":return{...e,profiles:e.profiles.map(e=>e.profileId===t.payload.profileId?{...e,...t.payload.updates}:e)};case"SET_ORGANIZATION_METRICS":return{...e,organizationMetrics:t.payload,isLoadingMetrics:!1};case"SET_ASSIGNMENTS":return{...e,assignments:t.payload};case"UPDATE_ASSIGNMENT":return{...e,assignments:{...e.assignments,[t.payload.profileId]:t.payload.departmentId}};case"SET_EDITABLE_IDS":return{...e,editableIds:t.payload};case"UPDATE_EDITABLE_ID":return{...e,editableIds:{...e.editableIds,[t.payload.profileId]:t.payload.editableId}};case"SET_LOADING_PROFILES":return{...e,isLoadingProfiles:t.payload};case"SET_LOADING_METRICS":return{...e,isLoadingMetrics:t.payload};case"SET_LAST_API_CALL":return{...e,lastApiCall:t.payload};case"SET_ORG_ID":return{...e,orgId:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoadingProfiles:!1,isLoadingMetrics:!1};case"CLEAR_DATA":return{...n,orgId:e.orgId};default:return e}}let s=(0,a.createContext)(null);function o(e){let{children:t}=e,[r,o]=(0,a.useReducer)(l,n);return a.useEffect(()=>{console.log("\uD83D\uDE80 SahhaDataProvider initializing with demo data...");let e=d();o({type:"SET_PROFILES",payload:e});let t=h(e);o({type:"SET_ASSIGNMENTS",payload:t}),o({type:"SET_EDITABLE_IDS",payload:e.reduce((e,t)=>(e[t.profileId]=t.editableProfileId||"",e),{})}),o({type:"SET_LAST_API_CALL",payload:new Date}),console.log("\uD83D\uDCCB Demo data initialized: ".concat(e.length," profiles, ").concat(Object.keys(t).length," assignments"))},[]),(0,i.jsx)(s.Provider,{value:{state:r,dispatch:o},children:t})}function c(){let e=(0,a.useContext)(s);if(!e)throw Error("useSahhaData must be used within a SahhaDataProvider");return e}let d=()=>Array.from({length:57},(e,t)=>{let r="demo_profile_".concat(t+1),i=r.split("").reduce((e,t)=>e+t.charCodeAt(0),0),a=(e,t)=>{let r=1e4*Math.sin(i+e+t);return Math.floor((r-Math.floor(r))*(t-e+1))+e};return{profileId:r,externalId:"ext_".concat(t+1),editableProfileId:"EMP-".concat(String(t+1).padStart(3,"0")),deviceType:["iOS","Android"][t%2],isSampleProfile:!0,createdAtUtc:new Date(Date.now()-864e5*a(1,365)).toISOString(),wellbeingScore:a(30,95),activityScore:a(25,90),sleepScore:a(35,85),mentalHealthScore:a(40,88),readinessScore:a(30,92),subScores:{activity:[{name:"steps",value:a(1e3,8e3),unit:"steps"},{name:"active_hours",value:a(4,12),unit:"hrs"},{name:"extended_inactivity",value:a(8,16),unit:"hrs"},{name:"activity_regularity",value:a(15,90),unit:"%"}],sleep:[{name:"sleep_duration",value:a(5.5,9.5),unit:"hrs"},{name:"sleep_regularity",value:a(60,95),unit:"%"},{name:"sleep_debt",value:a(0,120),unit:"mins"},{name:"circadian_alignment",value:a(1,5),unit:"hrs"}],mentalWellbeing:[{name:"circadian_alignment",value:a(1,5),unit:"hrs"},{name:"steps",value:a(1e3,8e3),unit:"steps"},{name:"active_hours",value:a(4,12),unit:"hrs"},{name:"extended_inactivity",value:a(8,16),unit:"hrs"},{name:"activity_regularity",value:a(15,90),unit:"%"},{name:"sleep_regularity",value:a(60,95),unit:"%"}],readiness:[{name:"sleep_debt",value:a(0,120),unit:"mins"},{name:"activity_balance",value:a(60,95),unit:"%"},{name:"recovery_index",value:a(50,90),unit:"score"}],wellbeing:[{name:"overall_wellness",value:a(30,95),unit:"score"},{name:"life_satisfaction",value:a(40,85),unit:"score"}]}}}),h=e=>e.reduce((e,t,r)=>(e[t.profileId]=["tech","operations","sales","admin"][r%4],e),{});function m(){let{state:e,dispatch:t}=c(),r=async function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!r&&e.profiles.length>0)return console.log("\uD83D\uDCCB Using cached profile data, skipping API call"),e.profiles;t({type:"SET_LOADING_PROFILES",payload:!0}),t({type:"SET_ERROR",payload:null}),console.log("\uD83D\uDE80 Loading dashboard with demo data (default mode)");try{let r=d();t({type:"SET_PROFILES",payload:r});let i=h(r);t({type:"SET_ASSIGNMENTS",payload:i}),localStorage.setItem("assignments_".concat(e.orgId),JSON.stringify(i));let a=r.reduce((e,t)=>(e[t.profileId]=t.editableProfileId||"",e),{});return t({type:"SET_EDITABLE_IDS",payload:a}),localStorage.setItem("editableIds_".concat(e.orgId),JSON.stringify(a)),t({type:"SET_LAST_API_CALL",payload:new Date}),t({type:"SET_LOADING_PROFILES",payload:!1}),r}catch(e){return console.error("❌ Unexpected error loading demo data:",e),t({type:"SET_ERROR",payload:"Failed to initialize dashboard"}),t({type:"SET_LOADING_PROFILES",payload:!1}),[]}};return{profiles:e.profiles,assignments:e.assignments,editableIds:e.editableIds,isLoading:e.isLoadingProfiles,error:e.error,lastApiCall:e.lastApiCall,fetchProfiles:r,updateProfileScores:(e,r)=>{t({type:"UPDATE_PROFILE",payload:{profileId:e,updates:r}})},updateAssignment:(r,i)=>{t({type:"UPDATE_ASSIGNMENT",payload:{profileId:r,departmentId:i}});let a={...e.assignments,[r]:i};localStorage.setItem("assignments_".concat(e.orgId),JSON.stringify(a))},updateEditableId:(r,i)=>{t({type:"UPDATE_EDITABLE_ID",payload:{profileId:r,editableId:i}});let a={...e.editableIds,[r]:i};localStorage.setItem("editableIds_".concat(e.orgId),JSON.stringify(a))},setProfiles:e=>{t({type:"SET_PROFILES",payload:e}),t({type:"SET_LAST_API_CALL",payload:new Date})}}}function x(){let{state:e,dispatch:t}=c(),r=async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i&&e.organizationMetrics&&Date.now()-new Date(e.organizationMetrics.lastUpdated).getTime()<3e5)return console.log("\uD83D\uDCCA Using cached organization metrics, skipping API call"),e.organizationMetrics;t({type:"SET_LOADING_METRICS",payload:!0}),t({type:"SET_ERROR",payload:null});try{let i=await fetch("/api/sahha/organization-metrics?orgId=".concat(e.orgId,"&dimension=").concat(r)),a=await i.json();if(a.success){let e=a.data;return t({type:"SET_ORGANIZATION_METRICS",payload:e}),console.log("\uD83D\uDCCA Organization metrics loaded into shared data store"),e}throw Error(a.error||"Failed to fetch organization metrics")}catch(e){throw t({type:"SET_ERROR",payload:e.message}),e}};return{organizationMetrics:e.organizationMetrics,isLoading:e.isLoadingMetrics,error:e.error,fetchOrganizationMetrics:r}}}},function(e){e.O(0,[238,971,117,744],function(){return e(e.s=72590)}),_N_E=e.O()}]);